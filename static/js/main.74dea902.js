/*! For license information please see main.74dea902.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,S=60114,T=60109,C=60110,N=60112,A=60113,D=60120,R=60115,P=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;x=V("react.element"),_=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),S=V("react.profiler"),T=V("react.provider"),C=V("react.context"),N=V("react.forward_ref"),A=V("react.suspense"),D=V("react.suspense_list"),R=V("react.memo"),P=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return H(e.type);case O:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function De(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Fe=!1,Ue=!1;function Ve(){null===Ce&&null===Ne||(Le(),Re())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,We=null,Ge=!1,He=null,Qe={onError:function(e){Ke=!0,We=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,We=null,ze.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},St={};function Tt(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Et[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=Tt("animationend"),Nt=Tt("animationiteration"),At=Tt("animationstart"),Dt=Tt("transitionend"),Rt=new Map,Pt=new Map,Ot=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Gt|0)|0},Wt=Math.log,Gt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Jt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Se(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),Dn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(On),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Vn=f&&"TextEvent"in window&&!Un,jn=f&&(!Fn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Qn(e,t,n,r){De(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(Qn(t,Yn,e,Se(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=We;Ke=!1,We=null,Ge||(Ge=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Dr]||(e[Dr]=!0,u.forEach((function(t){Tr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Or(a,e,i,t),o.add(u))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Rt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Rn;break;case Ct:case Nt:case At:s=wn;break;case Dt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Hn(u))if(er)m=cr;else{m=ur;var y=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=sr);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ii(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(y=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},Vi=null,ji=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Di()){case Ri:return 99;case Pi:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Ri;case 98:return Pi;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Gi(e,t){return e=Wi(e),Ei(e,t)}function Hi(e,t,n){return e=Wi(e),Si(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Ti(e)}$i()}function $i(){if(!Bi&&null!==Vi){Bi=!0;var e=0;try{var t=Vi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Si(Ri,Qi),n}finally{Bi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return m(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Sa=Ea(!0),Ta=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Da=ci(Ca);function Ra(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Da,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Oa(){li(Na),li(Aa),li(Da)}function La(e){Ra(Da.current);var t=Ra(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Va=e);qa(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Va=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ga(e){if(e!==Va)return!1;if(!Ba)return Wa(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)qa(e,t),t=Qr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Va=null,Ba=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Ro,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function mo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Do(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Ro={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Sa(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Gs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Wo(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ma(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=mi(t,s=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,$o,Yo,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Gs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gs(o,u),null!==e?r=Gs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Ra(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Na.current),Ga(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Ar(Sr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Da.current),Ra(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&Bu)&&0===(134217727&qu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Du=b.ReactCurrentOwner,Ru=0,Pu=null,Ou=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,Vu=null,ju=0,Bu=0,qu=0,zu=0,Ku=null,Wu=0,Gu=1/0;function Hu(){Gu=zi()+500}var Qu,$u=null,Yu=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ru)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==Yi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ru)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(qu|=t,4===Uu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Ru)&&0===(48&Ru)?ks(e):(ms(e,n),0===Ru&&(Hu(),Qi())):(0===(4&Ru)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Si(Ri,$i)):Vi.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Ru))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Ru;Ru|=16;var a=Ss();for(Pu===e&&Lu===r||(Hu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Ru=i,null!==Ou?r=0:(Pu=null,Lu=0,r=Uu),0!==(ju&qu))Is(e,0);else if(0!==r){if(2===r&&(Ru|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ts(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Rs(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Wu+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Rs.bind(null,e),r);break}Rs(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Wr(Rs.bind(null,e),n);break}Rs(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ru))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(ju&qu)&&(n=Ts(e,t=Ut(e,t)))}else n=Ts(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ru|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ts(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rs(e),ms(e,zi()),null}function ws(e,t){var n=Ru;Ru|=1;try{return e(t)}finally{0===(Ru=n)&&(Hu(),Qi())}}function bs(e,t){var n=Ru;Ru&=-2,Ru|=8;try{return e(t)}finally{0===(Ru=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function _s(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Pu=e,Ou=Gs(e.current,null),Lu=Mu=ju=t,Uu=0,Vu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Ou;try{if(na(),Ya.current=Ro,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Du.current=null,null===n||null===n.return){Uu=1,Vu=t,Ou=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(_){t=_,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function Ss(){var e=Au.current;return Au.current=Ro,null===e?Ro:e}function Ts(e,t){var n=Ru;Ru|=16;var r=Ss();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Ru=n,Au.current=r,null!==Ou)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Ou;)As(Ou)}function Ns(){for(;null!==Ou&&!Ci();)As(Ou)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Ou=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ou=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ou=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Uu&&(Uu=5)}function Rs(e){var t=Ki();return Gi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Ru))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ou=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ru,Ru|=32,Du.current=null,Br=$t,yr(u=mr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Os()}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Su($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Su($u.alternate,$u);break;case 4:Su($u.alternate,$u);break;case 8:Eu(u,s=$u);var x=s.alternate;wu(s),null!==x&&wu(x)}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);if(b=qr,w=mr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!Br,qr=Br=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&yu(k,$u.alternate,$u),128&_){w=void 0;var I=$u.ref;if(null!==I){var E=$u.stateNode;$u.tag,w=E,"function"===typeof I?I(w):I.current=w}}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);$u=null,Ui(),Ru=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(ms(e,zi()),Yu)throw Yu=!1,e=Ju,Ju=null,e;return 0!==(8&Ru)||Qi(),null}function Os(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&mu(e,$u),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Gi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ru))throw Error(o(331));var t=Ru;Ru|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ru=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Wu?Is(e,0):zu|=n),ms(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case S:return(e=Ks(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case D:return(e=Ks(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return $s(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case N:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e;case O:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ma(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),jo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Oe=function(e,t,n,r,i){var a=Ru;Ru|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ru=a)&&(Hu(),Qi())}},Le=function(){0===(49&Ru)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Ru;Ru|=2;try{return e(t)}finally{0===(Ru=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,De,Re,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ru;if(0!==(48&n))return e(t);Ru|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ru=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(d(321));return e}var R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,N=null,A=3,D=!1,R=!1,P=!1;function O(e){for(var t=_(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,x(S,t)}t=_(T)}}function L(e){if(P=!1,O(e),!R)if(null!==_(S))R=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,P&&(P=!1,i()),D=!0;var a=A;try{for(O(n),N=_(S);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(S)&&I(S),O(n)}else I(S);N=_(S)}if(null!==N)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||D||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(S)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(S)&&e===_(T)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),R||D||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b3c22ee7.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="tuffys-trading-post:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktuffys_trading_post=self.webpackChunktuffys_trading_post||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ce},SDK_VERSION:function(){return Ct},_DEFAULT_ENTRY_NAME:function(){return vt},_addComponent:function(){return kt},_addOrOverwriteComponent:function(){return wt},_apps:function(){return yt},_clearComponents:function(){return It},_components:function(){return gt},_getProvider:function(){return xt},_registerComponent:function(){return bt},_removeServiceInstance:function(){return _t},deleteApp:function(){return Rt},getApp:function(){return At},getApps:function(){return Dt},initializeApp:function(){return Nt},onLog:function(){return Lt},registerVersion:function(){return Ot},setLogLevel:function(){return Mt}});var t,r=n(791),i=n(164);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var w=(0,r.createContext)(null);var b=(0,r.createContext)({outlet:null,matches:[]});function x(e,t){if(!e)throw new Error(t)}function _(e,t,n){void 0===n&&(n="/");var r=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||x(!1),a.relativePath=a.relativePath.slice(r.length));var o=R([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&x(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}var E=/^:\w+$/,S=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(S)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!S(e)})).reduce((function(e,t){return e+(E.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:R([i,l.pathname]),pathnameBase:P(R([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=R([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var R=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||x(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=j(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):R([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function F(){return null!=(0,r.useContext)(w)}function U(){return F()||x(!1),(0,r.useContext)(w).location}function V(){F()||x(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(b).matches,a=U().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=R([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function j(e){var t=(0,r.useContext)(b).matches,n=U().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return A(e,JSON.parse(i),n)}),[e,i,n])}function B(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(b.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function q(e){x(!1)}function z(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;F()&&x(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,b=v.search,_=void 0===b?"":b,I=v.hash,E=void 0===I?"":I,S=v.state,T=void 0===S?null:S,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=D(y,d);return null==e?null:{pathname:e,search:_,hash:E,state:T,key:N}}),[d,y,_,E,T,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(w.Provider,{children:o,value:{location:A,navigationType:c}}))}function K(e){var t=e.children,n=e.location;return function(e,t){F()||x(!1);var n,i=(0,r.useContext)(b).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,U());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||x(!1),n=l}else n=s;var f=n.pathname||"/",h=_(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return B(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:R([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,e.pathnameBase])})})),i)}(W(t),n)}function W(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==q&&x(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=W(e.props.children)),t.push(n)}else t.push.apply(t,W(e.props.children))})),t}function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function $(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)b.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(b.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else S(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],w=v(),b=v();function x(e){return"string"===typeof e?e:y(e)}function _(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function E(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function S(e){u=e;var t=a();c=t[0],k=t[1],w.call({action:u,location:k})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(n,a){var o=t.Push,u=_(n,a);if(E(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}S(o)}},replace:function e(n,r){var a=t.Replace,o=_(n,r);if(E(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),S(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&r.addEventListener(h,p),function(){t(),b.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],w=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(w)}),[u]),(0,r.createElement)(z,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var Y=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=H(e,Q),f=M(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=V(),s=U(),c=j(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",G({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},re(e,t)}function ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}function ce(e){var t=oe();return function(){var n,r=ae(e);if(t){var i=ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}function le(e,t,n){return le=oe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&re(i,n.prototype),i},le.apply(null,arguments)}function fe(e){var t="function"===typeof Map?new Map:void 0;return fe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return le(e,arguments,ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),re(n,e)},fe(e)}var he=n(757),de=n.n(he),pe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pe(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},me=function(e){return function(e){var t=pe(e);return ve.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ye=function(e){try{return ve.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ge(e[n],t[n]));return e}var ke=function(){function e(){var t=this;X(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ee(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function we(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(a)),""].join(".")}function be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function xe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function _e(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ie(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ee(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Se(){var e=be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Te(){return"object"===typeof indexedDB}var Ce=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ne(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ne(a),Ne.prototype.create),a}return ee(n)}(fe(Error)),Ne=function(){function e(t,n,r){X(this,e),this.service=t,this.serviceName=n,this.errors=r}return ee(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ae(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ce(n,a,t);return o}}]),e}();function Ae(e,t){return e.replace(De,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var De=/\{\$([^}]+)}/g;function Re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Oe(u)&&Oe(s)){if(!Pe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Oe(e){return null!==e&&"object"===typeof e}function Le(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Me(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Fe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ue(e,t){var n=new Ve(e,t);return n.subscribe.bind(n)}var Ve=function(){function e(t,n){var r=this;X(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ee(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=te(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=je),void 0===r.error&&(r.error=je),void 0===r.complete&&(r.complete=je);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function je(){}function Be(e){return e&&e._delegate?e._delegate:e}function qe(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var ze=function(){function e(t){X(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return ee(e,[{key:"transaction",value:function(e,t){return new Ke(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new We(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Ke=function(){function e(t){var n=this;X(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return ee(e,[{key:"objectStore",value:function(e){return new We(this._transaction.objectStore(e))}}]),e}(),We=function(){function e(t){X(this,e),this._store=t}return ee(e,[{key:"index",value:function(e){return new Ge(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Ge(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return qe(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return qe(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return qe(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return qe(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Ge=function(){function e(t){X(this,e),this._index=t}return ee(e,[{key:"get",value:function(e){return qe(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function He(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Qe(e){return function(e){if(Array.isArray(e))return o(e)}(e)||He(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$e(a,r,i,o,u,"next",e)}function u(e){$e(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Je=function(){function e(t,n,r){X(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ee(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Xe="[DEFAULT]",Ze=function(){function e(t,n){X(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ee(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ke;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xe})}catch(s){}var t,n=te(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ye(he.mark((function e(){var t;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Qe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Qe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=te(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ux){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Xe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ux){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.component?this.component.multipleInstances?e:Xe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var et,tt,nt=function(){function e(t){X(this,e),this.name=t,this.providers=new Map}return ee(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ze(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),rt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tt||(tt={}));var it,at,ot={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},ut=tt.INFO,st=(J(et={},tt.DEBUG,"log"),J(et,tt.VERBOSE,"log"),J(et,tt.INFO,"info"),J(et,tt.WARN,"warn"),J(et,tt.ERROR,"error"),et),ct=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=st[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},lt=function(){function e(t){X(this,e),this.name=t,this._logLevel=ut,this._logHandler=ct,this._userLogHandler=null,rt.push(this)}return ee(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in tt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ot[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tt.DEBUG].concat(t)),this._logHandler.apply(this,[this,tt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,tt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tt.INFO].concat(t)),this._logHandler.apply(this,[this,tt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tt.WARN].concat(t)),this._logHandler.apply(this,[this,tt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tt.ERROR].concat(t)),this._logHandler.apply(this,[this,tt.ERROR].concat(t))}}]),e}();var ft=function(){function e(t){X(this,e),this.container=t}return ee(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ht="@firebase/app",dt="0.7.20",pt=new lt("@firebase/app"),vt="[DEFAULT]",mt=(J(it={},ht,"fire-core"),J(it,"@firebase/app-compat","fire-core-compat"),J(it,"@firebase/analytics","fire-analytics"),J(it,"@firebase/analytics-compat","fire-analytics-compat"),J(it,"@firebase/app-check","fire-app-check"),J(it,"@firebase/app-check-compat","fire-app-check-compat"),J(it,"@firebase/auth","fire-auth"),J(it,"@firebase/auth-compat","fire-auth-compat"),J(it,"@firebase/database","fire-rtdb"),J(it,"@firebase/database-compat","fire-rtdb-compat"),J(it,"@firebase/functions","fire-fn"),J(it,"@firebase/functions-compat","fire-fn-compat"),J(it,"@firebase/installations","fire-iid"),J(it,"@firebase/installations-compat","fire-iid-compat"),J(it,"@firebase/messaging","fire-fcm"),J(it,"@firebase/messaging-compat","fire-fcm-compat"),J(it,"@firebase/performance","fire-perf"),J(it,"@firebase/performance-compat","fire-perf-compat"),J(it,"@firebase/remote-config","fire-rc"),J(it,"@firebase/remote-config-compat","fire-rc-compat"),J(it,"@firebase/storage","fire-gcs"),J(it,"@firebase/storage-compat","fire-gcs-compat"),J(it,"@firebase/firestore","fire-fst"),J(it,"@firebase/firestore-compat","fire-fst-compat"),J(it,"fire-js","fire-js"),J(it,"firebase","fire-js-all"),it),yt=new Map,gt=new Map;function kt(e,t){try{e.container.addComponent(t)}catch(n){pt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function wt(e,t){e.container.addOrOverwriteComponent(t)}function bt(e){var t=e.name;if(gt.has(t))return pt.debug("There were multiple attempts to register component ".concat(t,".")),!1;gt.set(t,e);var n,r=te(yt.values());try{for(r.s();!(n=r.n()).done;){kt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function xt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt;xt(e,t).clearInstance(n)}function It(){gt.clear()}var Et=(J(at={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),J(at,"bad-app-name","Illegal App name: '{$appName}"),J(at,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),J(at,"app-deleted","Firebase App named '{$appName}' already deleted"),J(at,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),J(at,"invalid-log-argument","First argument to `onLog` must be null or a function."),J(at,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),J(at,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),J(at,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),J(at,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),at),St=new Ne("app","Firebase",Et),Tt=function(){function e(t,n,r){var i=this;X(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",(function(){return i}),"PUBLIC"))}return ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}}]),e}(),Ct="9.6.10";function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:vt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw St.create("bad-app-name",{appName:String(i)});var a=yt.get(i);if(a){if(Pe(e,a.options)&&Pe(r,a.config))return a;throw St.create("duplicate-app",{appName:i})}var o,u=new nt(i),s=te(gt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Tt(e,r,u);return yt.set(i,l),l}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=yt.get(e);if(!t)throw St.create("no-app",{appName:e});return t}function Dt(){return Array.from(yt.values())}function Rt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Ye(he.mark((function e(t){var n;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!yt.has(n)){e.next=6;break}return yt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t,n){var r,i=null!==(r=mt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void pt.warn(u.join(" "))}bt(new Je("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Lt(e,t){if(null!==e&&"function"!==typeof e)throw St.create("invalid-log-argument");!function(e,t){var n,r=te(rt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ot[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:tt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Mt(e){var t;t=e,rt.forEach((function(e){e.setLogLevel(t)}))}var Ft="firebase-heartbeat-store",Ut=null;function Vt(){var e,t,n;return Ut||(Ut=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ft)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new ze(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new ze(a.result),e.oldVersion,e.newVersion,new Ke(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw St.create("storage-open",{originalErrorMessage:e.message})}))),Ut}function jt(e){return Bt.apply(this,arguments)}function Bt(){return Bt=Ye(he.mark((function e(t){var n;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ft).objectStore(Ft).get(Kt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),St.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Bt.apply(this,arguments)}function qt(e,t){return zt.apply(this,arguments)}function zt(){return zt=Ye(he.mark((function e(t,n){var r,i,a;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vt();case 3:return r=e.sent,i=r.transaction(Ft,"readwrite"),a=i.objectStore(Ft),e.next=8,a.put(n,Kt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),St.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),zt.apply(this,arguments)}function Kt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Wt=function(){function e(t){var n=this;X(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Yt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ee(e,[{key:"triggerHeartbeat",value:function(){var e=Ye(he.mark((function e(){var t,n,r;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Gt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ye(he.mark((function e(){var t,n,r,i,a;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Gt(),n=Ht(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=me(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gt(){return(new Date).toISOString().substring(0,10)}function Ht(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=te(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Jt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Jt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Qt,$t,Yt=function(){function e(t){X(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ee(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ye(he.mark((function e(){return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ye(he.mark((function e(){var t;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,jt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ye(he.mark((function e(t){var n,r;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ye(he.mark((function e(t){var n,r;return he.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Qe(r.heartbeats),Qe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jt(e){return me(JSON.stringify({version:2,heartbeats:e})).length}Qt="",bt(new Je("platform-logger",(function(e){return new ft(e)}),"PRIVATE")),bt(new Je("heartbeat",(function(e){return new Wt(e)}),"PRIVATE")),Ot(ht,dt,Qt),Ot(ht,dt,"esm2017"),Ot("fire-js","");var Xt=function(){function e(t,n){var r=this;X(this,e),this._delegate=t,this.firebase=n,kt(t,new Je("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Rt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){kt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){wt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Zt=(J($t={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),J($t,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$t),en=new Ne("app-compat","Firebase",Zt);var tn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ot,setLogLevel:Mt,onLog:Lt,apps:null,SDK_VERSION:Ct,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(bt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw en.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ge(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Re(n,e=e||vt))throw en.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Xt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ge(n,e)},createSubscribe:Ue,ErrorFactory:Ne,deepExtend:ge}),n}(),nn=new lt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){nn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var rn=self.firebase.SDK_VERSION;rn&&rn.indexOf("LITE")>=0&&nn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var an=tn;!function(e){Ot("@firebase/app-compat","0.1.21",e)}();function on(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}function un(){return un="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=on(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},un.apply(this,arguments)}an.registerVersion("firebase","9.6.10","app-compat");function sn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var cn;Object.create;var ln="facebook.com",fn="github.com",hn="google.com",dn="password",pn="twitter.com",vn="EMAIL_SIGNIN",mn="PASSWORD_RESET",yn="RECOVER_EMAIL",gn="REVERT_SECOND_FACTOR_ADDITION",kn="VERIFY_AND_CHANGE_EMAIL",wn="VERIFY_EMAIL";function bn(){return J({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var xn=function(){var e;return J(e={},"admin-restricted-operation","This operation is restricted to administrators only."),J(e,"argument-error",""),J(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),J(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),J(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),J(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),J(e,"cordova-not-ready","Cordova framework is not ready."),J(e,"cors-unsupported","This browser is not supported."),J(e,"credential-already-in-use","This credential is already associated with a different user account."),J(e,"custom-token-mismatch","The custom token corresponds to a different audience."),J(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),J(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),J(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),J(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),J(e,"email-already-in-use","The email address is already in use by another account."),J(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),J(e,"expired-action-code","The action code has expired."),J(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),J(e,"internal-error","An internal AuthError has occurred."),J(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),J(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),J(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),J(e,"invalid-auth-event","An internal AuthError has occurred."),J(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),J(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),J(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),J(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),J(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),J(e,"invalid-email","The email address is badly formatted."),J(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),J(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),J(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),J(e,"invalid-credential","The supplied auth credential is malformed or has expired."),J(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),J(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),J(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),J(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),J(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),J(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),J(e,"wrong-password","The password is invalid or the user does not have a password."),J(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),J(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),J(e,"invalid-provider-id","The specified provider ID is invalid."),J(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),J(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),J(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),J(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),J(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),J(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),J(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),J(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),J(e,"missing-continue-uri","A continue URL must be provided in the request."),J(e,"missing-iframe-start","An internal AuthError has occurred."),J(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),J(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),J(e,"missing-multi-factor-info","No second factor identifier is provided."),J(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),J(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),J(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),J(e,"app-deleted","This instance of FirebaseApp has been deleted."),J(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),J(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),J(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),J(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),J(e,"no-auth-event","An internal AuthError has occurred."),J(e,"no-such-provider","User was not linked to an account with the given provider."),J(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),J(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),J(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),J(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),J(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),J(e,"provider-already-linked","User can only be linked to one identity for the given provider."),J(e,"quota-exceeded","The project's quota for this operation has been exceeded."),J(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),J(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),J(e,"rejected-credential","The request contains malformed or mismatching credentials."),J(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),J(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),J(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),J(e,"timeout","The operation has timed out."),J(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),J(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),J(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),J(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),J(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),J(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),J(e,"unverified-email","The operation requires a verified email."),J(e,"user-cancelled","The user did not grant your application the permissions it requested."),J(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),J(e,"user-disabled","The user account has been disabled by an administrator."),J(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),J(e,"user-signed-out",""),J(e,"weak-password","The password must be 6 characters long or more."),J(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),J(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},_n=bn,In=new Ne("auth","Firebase",bn()),En=new lt("@firebase/auth");function Sn(e){if(En.logLevel<=tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];En.error.apply(En,["Auth (".concat(Ct,"): ").concat(e)].concat(n))}}function Tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Dn.apply(void 0,[e].concat(n))}function Cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dn.apply(void 0,[e].concat(n))}function Nn(e,t,n){var r=Object.assign(Object.assign({},_n()),J({},t,n));return new Ne("auth","Firebase",r).create(t,{appName:e.name})}function An(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Tn(e,"argument-error"),Nn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Qe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Qe(o)))}return In.create.apply(In,[e].concat(n))}function Rn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Dn.apply(void 0,[t].concat(r))}}function Pn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Sn(t),new Error(t)}function On(e,t){e||Pn(t)}var Ln=new Map;function Mn(e){On(e instanceof Function,"Expected a class definition");var t=Ln.get(e);return t?(On(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ln.set(e,t),t)}function Fn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Un(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var jn=function(){function e(t,n){X(this,e),this.shortDelay=t,this.longDelay=n,On(n>t,"Short delay should be less than long delay!"),this.isMobile=xe()||Ee()}return ee(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Un()||Ie()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Bn(e,t){On(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var qn=function(){function e(){X(this,e)}return ee(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),zn=(J(cn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),J(cn,"MISSING_CUSTOM_TOKEN","internal-error"),J(cn,"INVALID_IDENTIFIER","invalid-email"),J(cn,"MISSING_CONTINUE_URI","internal-error"),J(cn,"INVALID_PASSWORD","wrong-password"),J(cn,"MISSING_PASSWORD","internal-error"),J(cn,"EMAIL_EXISTS","email-already-in-use"),J(cn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),J(cn,"INVALID_IDP_RESPONSE","invalid-credential"),J(cn,"INVALID_PENDING_TOKEN","invalid-credential"),J(cn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),J(cn,"MISSING_REQ_TYPE","internal-error"),J(cn,"EMAIL_NOT_FOUND","user-not-found"),J(cn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),J(cn,"EXPIRED_OOB_CODE","expired-action-code"),J(cn,"INVALID_OOB_CODE","invalid-action-code"),J(cn,"MISSING_OOB_CODE","internal-error"),J(cn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),J(cn,"INVALID_ID_TOKEN","invalid-user-token"),J(cn,"TOKEN_EXPIRED","user-token-expired"),J(cn,"USER_NOT_FOUND","user-token-expired"),J(cn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),J(cn,"INVALID_CODE","invalid-verification-code"),J(cn,"INVALID_SESSION_INFO","invalid-verification-id"),J(cn,"INVALID_TEMPORARY_PROOF","invalid-credential"),J(cn,"MISSING_SESSION_INFO","missing-verification-id"),J(cn,"SESSION_EXPIRED","code-expired"),J(cn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),J(cn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),J(cn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),J(cn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),J(cn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),J(cn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),J(cn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),J(cn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),J(cn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),J(cn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),J(cn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),cn),Kn=new jn(3e4,6e4);function Wn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Gn(e,t,n,r){return Hn.apply(this,arguments)}function Hn(){return Hn=Ye(de().mark((function e(t,n,r,i){var a,o=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Qn(t,a,Ye(de().mark((function e(){var a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Le(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",qn.fetch()(Xn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Hn.apply(this,arguments)}function Qn(e,t,n){return $n.apply(this,arguments)}function $n(){return $n=Ye(de().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},zn),n),e.prev=2,a=new Zn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw er(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw er(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw er(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Nn(t,p,d);case 30:Tn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ce)){e.next=37;break}throw e.t0;case 37:Tn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),$n.apply(this,arguments)}function Yn(e,t,n,r){return Jn.apply(this,arguments)}function Jn(){return Jn=Ye(de().mark((function e(t,n,r,i){var a,o,u=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Gn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Tn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Xn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Bn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Zn=function(){function e(t){var n=this;X(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Cn(n.auth,"network-request-failed"))}),Kn.get())}))}return ee(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function er(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Cn(e,t,r);return i.customData._tokenResponse=n,i}function tr(e,t){return nr.apply(this,arguments)}function nr(){return nr=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return ir=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}function ar(e,t){return or.apply(this,arguments)}function or(){return or=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function ur(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function sr(){return sr=Ye(de().mark((function e(t){var n,r,i,a,o,u,s=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Be(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Rn((a=lr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ur(cr(a.auth_time)),issuedAtTime:ur(cr(a.iat)),expirationTime:ur(cr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function cr(e){return 1e3*Number(e)}function lr(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Sn("JWT malformed, contained fewer than 3 sections"),null;try{var a=ye(r);return a?JSON.parse(a):(Sn("Failed to decode base64 JWT payload"),null)}catch(o){return Sn("Caught error parsing JWT payload as JSON",o),null}}function fr(e,t){return hr.apply(this,arguments)}function hr(){return hr=Ye(de().mark((function e(t,n){var r=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ce&&dr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),hr.apply(this,arguments)}function dr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var pr=function(){function e(t){X(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ee(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),vr=function(){function e(t,n){X(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ee(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function mr(e){return yr.apply(this,arguments)}function yr(){return yr=Ye(de().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,fr(t,ar(r,{idToken:i}));case 6:Rn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?wr(o.providerUserInfo):[],s=kr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new vr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function gr(){return(gr=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be(t),e.next=3,mr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Qe(n),Qe(t))}function wr(e){return e.map((function(e){var t=e.providerId,n=sn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function br(e,t){return xr.apply(this,arguments)}function xr(){return xr=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,{},Ye(de().mark((function e(){var r,i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Xn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",qn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}var _r=function(){function e(){X(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ee(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Rn(e.idToken,"internal-error"),Rn("undefined"!==typeof e.idToken,"internal-error"),Rn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=lr(e);return Rn(t,"internal-error"),Rn("undefined"!==typeof t.exp,"internal-error"),Rn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ye(de().mark((function e(t){var n,r=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Rn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Pn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Rn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Rn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Rn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ir(e,t){Rn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Er=function(){function e(t){X(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Qe(a.providerData):[],this.metadata=new vr(a.createdAt||void 0,a.lastLoginAt||void 0)}return ee(e,[{key:"getIdToken",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Rn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return sr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return gr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Rn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ye(de().mark((function e(t){var n,r,i=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,mr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,fr(this,tr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Rn(k&&_,t,"internal-error");var I=_r.fromJSON(this.name,_);Rn("string"===typeof k,t,"internal-error"),Ir(f,t.name),Ir(h,t.name),Rn("boolean"===typeof w,t,"internal-error"),Rn("boolean"===typeof b,t,"internal-error"),Ir(d,t.name),Ir(p,t.name),Ir(v,t.name),Ir(m,t.name),Ir(y,t.name),Ir(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Ye(de().mark((function t(n,r){var i,a,o,u=arguments;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new _r).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,mr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Sr=function(){function e(){X(this,e),this.type="NONE",this.storage={}}return ee(e,[{key:"_isAvailable",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Sr.type="NONE";var Tr=Sr;function Cr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Nr=function(){function e(t,n,r){X(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Cr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Cr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ee(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Er._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ye(de().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Mn(Tr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Mn(Tr),u=Cr(i,n.config.apiKey,n.name),s=null,c=te(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Er._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ar(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Or(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Dr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mr(t))return"Blackberry";if(Fr(t))return"Webos";if(Rr(t))return"Safari";if((t.includes("chrome/")||Pr(t))&&!t.includes("edge/"))return"Chrome";if(Lr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/firefox\//i.test(e)}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/crios\//i.test(e)}function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/iemobile/i.test(e)}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/android/i.test(e)}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/blackberry/i.test(e)}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/webos/i.test(e)}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/iphone|ipad|ipod/i.test(e)}function Vr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return Ur(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function jr(){return Se()&&10===document.documentMode}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return Ur(e)||Lr(e)||Fr(e)||Mr(e)||/windows phone/i.test(e)||Or(e)}function qr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ar(be());break;case"Worker":t="".concat(Ar(be()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ct,"/").concat(r)}var zr=function(){function e(t,n,r){X(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wr(this),this.idTokenSubscription=new Wr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=In,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ee(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Mn(t)),this._initializationPromise=this.queue(Ye(de().mark((function r(){var i,a;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Nr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ye(de().mark((function e(t){var n,r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Rn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Be(t):null)&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ye(de().mark((function e(t){var n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Mn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ne("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Rn(n=t&&Mn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Nr.create(this,[Mn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ye(de().mark((function e(t){var n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Rn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ye(de().mark((function e(){var t,n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=J({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Kr(e){return Be(e)}var Wr=function(){function e(t){var n=this;X(this,e),this.auth=t,this.observer=null,this.addObserver=Ue((function(e){return n.observer=e}))}return ee(e,[{key:"next",get:function(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Gr(e,t,n){var r=Kr(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Hr(t),o=function(e){var t=Hr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Qr(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Qr(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Hr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $r=function(){function e(t,n){X(this,e),this.providerId=t,this.signInMethod=n}return ee(e,[{key:"toJSON",value:function(){return Pn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Pn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Pn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Pn("not implemented")}}]),e}();function Yr(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:resetPassword",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return Zr=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:update",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithPassword",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return ai=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:sendOobCode",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ii(t,n));case 1:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return ci=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ii(t,n));case 1:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return fi=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ii(t,n));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(e,t){return di.apply(this,arguments)}function di(){return di=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ii(t,n));case 1:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithEmailLink",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return yi=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithEmailLink",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}var gi=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return X(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ee(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ni(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",pi(t,{email:this._email,oobCode:this._password}));case 5:Tn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Xr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",mi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Tn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($r);function ki(e,t){return wi.apply(this,arguments)}function wi(){return wi=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithIdp",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}var bi=function(e){ie(n,e);var t=ce(n);function n(){var e;return X(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ee(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ki(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ki(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ki(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Le(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}($r);function xi(e,t){return _i.apply(this,arguments)}function _i(){return _i=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:sendVerificationCode",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Ii(){return Ii=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ei(){return Ei=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw er(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}var Si=J({},"USER_NOT_FOUND","user-not-found");function Ti(){return Ti=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithPhoneNumber",Wn(t,r),Si));case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}var Ci=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ee(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ii.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ei.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ti.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}($r);var Ni=function(){function e(t){var n,r,i,a,o,u;X(this,e);var s=Me(Fe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Rn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ee(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Me(Fe(e)).link,n=t?Me(Fe(t)).deep_link_id:null,r=Me(Fe(e)).deep_link_id;return(r?Me(Fe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Ux){return null}}}]),e}();var Ai=function(){function e(){X(this,e),this.providerId=e.PROVIDER_ID}return ee(e,null,[{key:"credential",value:function(e,t){return gi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ni.parseLink(t);return Rn(n,"argument-error"),gi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ai.PROVIDER_ID="password",Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Di=function(){function e(t){X(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ee(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ri=function(e){ie(n,e);var t=ce(n);function n(){var e;return X(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ee(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Qe(this.scopes)}}]),n}(Di),Pi=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Rn(e.idToken||e.accessToken,"argument-error"),bi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Rn("providerId"in t&&"signInMethod"in t,"argument-error"),bi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ri),Oi=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.call(this,"facebook.com")}return ee(n,null,[{key:"credential",value:function(e){return bi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ux){return null}}}]),n}(Ri);Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Oi.PROVIDER_ID="facebook.com";var Li=function(e){ie(n,e);var t=ce(n);function n(){var e;return X(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ee(n,null,[{key:"credential",value:function(e,t){return bi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Ux){return null}}}]),n}(Ri);Li.GOOGLE_SIGN_IN_METHOD="google.com",Li.PROVIDER_ID="google.com";var Mi=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.call(this,"github.com")}return ee(n,null,[{key:"credential",value:function(e){return bi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ux){return null}}}]),n}(Ri);Mi.GITHUB_SIGN_IN_METHOD="github.com",Mi.PROVIDER_ID="github.com";var Fi=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ee(n,[{key:"_getIdTokenResponse",value:function(e){return ki(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ki(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ki(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($r),Ui=function(e){ie(n,e);var t=ce(n);function n(e){return X(this,n),Rn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ee(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Fi.fromJSON(e);return Rn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Fi._create(r,n)}catch(i){return null}}}]),n}(Di),Vi=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.call(this,"twitter.com")}return ee(n,null,[{key:"credential",value:function(e,t){return bi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Ux){return null}}}]),n}(Ri);function ji(e,t){return Bi.apply(this,arguments)}function Bi(){return Bi=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signUp",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}Vi.TWITTER_SIGN_IN_METHOD="twitter.com",Vi.PROVIDER_ID="twitter.com";var qi=function(){function e(t){X(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ee(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ye(de().mark((function t(n,r,i){var a,o,u,s,c=arguments;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Er._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=zi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ye(de().mark((function t(n,r,i){var a;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=zi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function zi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ki(){return Ki=Ye(de().mark((function e(t){var n,r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ji(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}var Wi=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a){var o,u;return X(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ne(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ee(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ce);function Gi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wi._fromErrorAndOperation(e,n,t,r);throw n}))}function Hi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Qi(e,t){return $i.apply(this,arguments)}function $i(){return $i=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Xi(!0,r,n);case 3:return e.t0=rr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Hi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Yi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=Ye(de().mark((function e(t,n){var r,i,a=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=fr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Xi(e,t,n){return Zi.apply(this,arguments)}function Zi(){return(Zi=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(n);case 2:i=Hi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Rn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return ta=Ye(de().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,fr(t,Gi(i,a,n,t),r);case 6:return Rn((o=e.sent).idToken,i,"internal-error"),Rn(u=lr(o.idToken),i,"internal-error"),s=u.sub,Rn(t.uid===s,i,"user-mismatch"),e.abrupt("return",qi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Tn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ta.apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=Ye(de().mark((function e(t,n){var r,i,a,o,u=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Gi(t,i,n);case 4:return a=e.sent,e.next=7,qi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",na(Kr(t),n));case 1:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function oa(e,t){return ua.apply(this,arguments)}function ua(){return(ua=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Xi(!1,r,n.providerId);case 3:return e.abrupt("return",Yi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e,t){return ca.apply(this,arguments)}function ca(){return(ca=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(Be(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(e,t){return fa.apply(this,arguments)}function fa(){return fa=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yn(t,"POST","/v1/accounts:signInWithCustomToken",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function ha(){return ha=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kr(t),e.next=3,la(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}var da=function(){function e(t,n){X(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ee(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?pa._fromServerResponse(e,t):Tn(e,"internal-error")}}]),e}(),pa=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ee(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(da);function va(e,t,n){var r;Rn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Rn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Rn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Rn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ma(){return ma=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),a={requestType:"PASSWORD_RESET",email:n},r&&va(i,a,r),e.next=5,si(i,a);case 5:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(){return ya=Ye(de().mark((function e(t,n,r){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(Be(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ga(){return ga=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei(Be(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return wa.apply(this,arguments)}function wa(){return wa=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Yr(r,{oobCode:n});case 3:i=e.sent,Rn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Rn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Rn(i.mfaInfo,r,"internal-error");case 13:Rn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=da._fromServerResponse(Kr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function ba(){return ba=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka(Be(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function xa(e,t,n){return _a.apply(this,arguments)}function _a(){return _a=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kr(t),e.next=3,ji(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,qi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),_a.apply(this,arguments)}function Ia(){return Ia=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),a={requestType:"EMAIL_SIGNIN",email:n},Rn(r.handleCodeInApp,i,"argument-error"),r&&va(i,a,r),e.next=6,li(i,a);case 6:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Ea(){return Ea=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),Rn((a=Ai.credentialWithLink(n,r||Fn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ia(i,a));case 4:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Sa(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:createAuthUri",Wn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}function Ca(){return Ca=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Un()?Fn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Sa(Be(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Na(){return(Na=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&va(r.auth,a,n),e.next=8,oi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(){return(Aa=Ye(de().mark((function e(t,n,r){var i,a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&va(i.auth,o,r),e.next=8,hi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Pa(){return(Pa=Ye(de().mark((function e(t,n){var r,i,a,o,u,s,c;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Be(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,fr(a,Da(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t,n){return La.apply(this,arguments)}function La(){return La=Ye(de().mark((function e(t,n,r){var i,a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,fr(t,Xr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}var Ma=ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};X(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Fa=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a){var o;return X(this,n),(o=t.call(this,e,r,i)).username=a,o}return ee(n)}(Ma),Ua=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"facebook.com",r)}return ee(n)}(Ma),Va=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ee(n)}(Fa),ja=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"google.com",r)}return ee(n)}(Ma),Ba=function(e){ie(n,e);var t=ce(n);function n(e,r,i){return X(this,n),t.call(this,e,"twitter.com",r,i)}return ee(n)}(Fa);function qa(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=lr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ma(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ua(a,i);case"github.com":return new Va(a,i);case"google.com":return new ja(a,i);case"twitter.com":return new Ba(a,i,e.screenName||null);case"custom":case"anonymous":return new Ma(a,null);default:return new Ma(a,r,i)}}(n)}var za=function(){function e(t,n){X(this,e),this.type=t,this.credential=n}return ee(e,[{key:"toJSON",value:function(){return{multiFactorSession:J({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ka=function(){function e(t,n,r){X(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ee(e,[{key:"resolveSignIn",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Kr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return da._fromServerResponse(r,e)}));Rn(i.mfaPendingCredential,r,"internal-error");var o=za._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ye(de().mark((function e(t){var a,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Rn(n.user,r,"internal-error"),e.abrupt("return",qi._forOperation(n.user,n.operationType,u));case 17:Tn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Wa(e,t){return Gn(e,"POST","/v2/accounts/mfaEnrollment:start",Wn(e,t))}function Ga(e,t){return Gn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Wn(e,t))}var Ha=function(){function e(t){var n=this;X(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return da._fromServerResponse(t.auth,e)})))}))}return ee(e,[{key:"getSession",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=za,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,fr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ye(de().mark((function e(t){var n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,fr(this.user,Ga(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Qa=new WeakMap;var $a="__sak",Ya=function(){function e(t,n){X(this,e),this.storageRetriever=t,this.type=n}return ee(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem($a,"1"),this.storage.removeItem($a),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ux){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ja=function(e){ie(n,e);var t=ce(n);function n(){var e;return X(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=be();return Rr(e)||Ur(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Br(),e._shouldAllowMigration=!0,e}return ee(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);jr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ye(de().mark((function e(t,r){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ye(de().mark((function e(t){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ya);Ja.type="LOCAL";var Xa=Ja,Za=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ee(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ya);Za.type="SESSION";var eo=Za;function to(e){return Promise.all(e.map(function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var no=function(){function e(t){X(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ee(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ye(de().mark((function e(t){var n,r,i,a,o,u,s,c;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,to(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ro(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}no.receivers=[];var io=function(){function e(t){X(this,e),this.target=t,this.handlers=new Set}return ee(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ye(de().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ro("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ao(){return window}function oo(){return"undefined"!==typeof ao().WorkerGlobalScope&&"function"===typeof ao().importScripts}function uo(){return so.apply(this,arguments)}function so(){return(so=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function co(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var lo="firebaseLocalStorageDb",fo="firebaseLocalStorage",ho="fbase_key",po=function(){function e(t){X(this,e),this.request=t}return ee(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function vo(e,t){return e.transaction([fo],t?"readwrite":"readonly").objectStore(fo)}function mo(){var e=indexedDB.deleteDatabase(lo);return new po(e).toPromise()}function yo(){var e=indexedDB.open(lo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(fo,{keyPath:ho})}catch(r){n(r)}})),e.addEventListener("success",Ye(de().mark((function n(){var r;return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(fo)){n.next=12;break}return r.close(),n.next=5,mo();case 5:return n.t0=t,n.next=8,yo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vo(t,!0).put((J(i={},ho,n),J(i,"value",r),i)),e.abrupt("return",new po(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function wo(e,t){return bo.apply(this,arguments)}function bo(){return bo=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t,!1).get(n),e.next=3,new po(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function xo(e,t){var n=vo(e,!0).delete(t);return new po(n).toPromise()}var _o=function(){function e(){X(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ee(e,[{key:"_openDb",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,yo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ye(de().mark((function e(){var t=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=no._getInstance(oo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ye(de().mark((function e(n,r){var i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ye(de().mark((function e(){var t,n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new io(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&co()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,yo();case 5:return t=e.sent,e.next=8,go(t,$a,"1");case 8:return e.next=10,xo(t,$a);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ye(de().mark((function e(t,n){var r=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return go(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return wo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ye(de().mark((function e(t){var n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return xo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=vo(e,!1).getAll();return new po(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=te(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();_o.type="LOCAL";var Io=_o;function Eo(e,t){return Gn(e,"POST","/v2/accounts/mfaSignIn:start",Wn(e,t))}function So(e){return To.apply(this,arguments)}function To(){return To=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Cn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function No(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ao=1e12,Do=function(){function e(t){X(this,e),this.auth=t,this.counter=Ao,this._widgets=new Map}return ee(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ro(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ao;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ao;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ao,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ro=function(){function e(t,n,r){var i=this;X(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Rn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ee(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Po=No("rcb"),Oo=new jn(3e4,6e4),Lo="https://www.google.com/recaptcha/api.js?",Mo=function(){function e(){X(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ao().grecaptcha}return ee(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Rn(Fo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ao().grecaptcha):new Promise((function(r,i){var a=ao().setTimeout((function(){i(Cn(e,"network-request-failed"))}),Oo.get());ao()[Po]=function(){ao().clearTimeout(a),delete ao()[Po];var o=ao().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Cn(e,"internal-error"))},Co("".concat(Lo,"?").concat(Le({onload:Po,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Cn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ao().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Fo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Uo=function(){function e(){X(this,e)}return ee(e,[{key:"load",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Do(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Vo="recaptcha",jo={theme:"light",type:"image"},Bo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},jo),r=arguments.length>2?arguments[2]:void 0;X(this,e),this.parameters=n,this.type=Vo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kr(r),this.isInvisible="invisible"===this.parameters.size,Rn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Rn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uo:new Mo,this.validateStartingState()}return ee(e,[{key:"verify",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Rn(!this.parameters.sitekey,this.auth,"argument-error"),Rn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Rn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ao()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Rn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ye(de().mark((function e(){var t,n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn(Un()&&!oo(),this.auth,"internal-error"),e.next=3,qo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,So(this.auth);case 8:Rn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Rn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var zo=function(){function e(t,n){X(this,e),this.verificationId=t,this.onConfirmation=n}return ee(e,[{key:"confirm",value:function(e){var t=Ci._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Ko(){return Ko=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kr(t),e.next=3,Qo(i,n,Be(r));case 3:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return ia(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Wo(e,t,n){return Go.apply(this,arguments)}function Go(){return(Go=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,Xi(!1,i,"phone");case 3:return e.next=5,Qo(i.auth,n,Be(r));case 5:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return oa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(){return(Ho=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,Qo(i.auth,n,Be(r));case 3:return a=e.sent,e.abrupt("return",new zo(a,(function(e){return sa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t,n){return $o.apply(this,arguments)}function $o(){return $o=Ye(de().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Rn("string"===typeof a,t,"argument-error"),Rn(r.type===Vo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Rn("enroll"===u.type,t,"internal-error"),e.next=13,Wa(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Rn("signin"===u.type,t,"internal-error"),Rn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Eo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,xi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$o.apply(this,arguments)}function Yo(){return(Yo=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(Be(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jo=function(){function e(t){X(this,e),this.providerId=e.PROVIDER_ID,this.auth=Kr(t)}return ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return Qo(this.auth,e,Be(t))}}],[{key:"credential",value:function(e,t){return Ci._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ci._fromTokenResponse(n,r):null}}]),e}();function Xo(e,t){return t?Mn(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jo.PROVIDER_ID="phone",Jo.PHONE_SIGN_IN_METHOD="phone";var Zo=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ee(n,[{key:"_getIdTokenResponse",value:function(e){return ki(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ki(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ki(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($r);function eu(e){return na(e.auth,new Zo(e),e.bypassAuthState)}function tu(e){var t=e.auth,n=e.user;return Rn(n,t,"internal-error"),ea(n,new Zo(e),e.bypassAuthState)}function nu(e){return ru.apply(this,arguments)}function ru(){return ru=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Rn(r=t.user,n,"internal-error"),e.abrupt("return",Yi(r,new Zo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}var iu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];X(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ee(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ye(de().mark((function t(n,r){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ye(de().mark((function e(t){var n,r,i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eu;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return tu;default:Tn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),au=new jn(2e3,1e4);function ou(e,t,n){return uu.apply(this,arguments)}function uu(){return uu=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kr(t),An(t,n,Di),a=Xo(i,r),o=new fu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function su(){return(su=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An((i=Be(t)).auth,n,Di),a=Xo(i.auth,r),o=new fu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An((i=Be(t)).auth,n,Di),a=Xo(i.auth,r),o=new fu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fu=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a,o){var u;return X(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ne(u),u}return ee(n,[{key:"executeNotNull",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Rn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ye(de().mark((function e(){var t,n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On(1===this.filter.length,"Popup operations only handle one event"),t=ro(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Cn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Cn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Cn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,au.get())}()}}]),n}(iu);fu.currentPopupAction=null;var hu=new Map,du=function(e){ie(n,e);var t=ce(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return X(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ee(n,[{key:"execute",value:function(){var e=Ye(de().mark((function e(){var t,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,pu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,un(ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hu.set(this.auth._key(),t);case 21:return this.bypassAuthState||hu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ye(de().mark((function e(t){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",un(ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",un(ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(iu);function pu(e,t){return vu.apply(this,arguments)}function vu(){return vu=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ku(n),i=gu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function mu(e,t){return yu.apply(this,arguments)}function yu(){return yu=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gu(t)._set(ku(n),"true"));case 1:case"end":return e.stop()}}),e)}))),yu.apply(this,arguments)}function gu(e){return Mn(e._redirectPersistence)}function ku(e){return Cr("pendingRedirect",e.config.apiKey,e.name)}function wu(e,t,n){return function(e,t,n){return bu.apply(this,arguments)}(e,t,n)}function bu(){return bu=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kr(t),An(t,n,Di),a=Xo(i,r),e.next=5,mu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}function xu(e,t,n){return function(e,t,n){return _u.apply(this,arguments)}(e,t,n)}function _u(){return(_u=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An((i=Be(t)).auth,n,Di),a=Xo(i.auth,r),e.next=5,mu(a,i.auth);case 5:return e.next=7,Au(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t,n){return function(e,t,n){return Eu.apply(this,arguments)}(e,t,n)}function Eu(){return(Eu=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An((i=Be(t)).auth,n,Di),a=Xo(i.auth,r),e.next=5,Xi(!1,i,n.providerId);case 5:return e.next=7,mu(a,i.auth);case 7:return e.next=9,Au(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t)._initializationPromise;case 2:return e.abrupt("return",Cu(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Cu(e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=Ye(de().mark((function e(t,n){var r,i,a,o,u,s=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Kr(t),a=Xo(i,n),o=new du(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}function Au(e){return Du.apply(this,arguments)}function Du(){return(Du=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ro("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ru=function(){function e(t){X(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ee(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ou(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ou(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Cn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Pu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Pu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ou(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Lu(e){return Mu.apply(this,arguments)}function Mu(){return Mu=Ye(de().mark((function e(t){var n,r=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Gn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}var Fu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uu=/^https?/;function Vu(){return Vu=Ye(de().mark((function e(t){var n,r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lu(t);case 4:n=e.sent,r=n.authorizedDomains,i=te(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ju(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Tn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Vu.apply(this,arguments)}function ju(e){var t=Fn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Uu.test(r))return!1;if(Fu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bu=new jn(3e4,6e4);function qu(){var e=ao().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Qe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var zu=null;function Ku(e){return zu=zu||function(e){return new Promise((function(t,n){var r,i,a;function o(){qu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){qu(),n(Cn(e,"network-request-failed"))},timeout:Bu.get()})}if(null===(i=null===(r=ao().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ao().gapi)||void 0===a?void 0:a.load)){var u=No("iframefcb");return ao()[u]=function(){gapi.load?o():n(Cn(e,"network-request-failed"))},Co("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw zu=null,e}))}(e),zu}var Wu=new jn(5e3,15e3),Gu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qu(e){var t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Bn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ct},i=Hu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Le(r).slice(1))}function $u(e){return Yu.apply(this,arguments)}function Yu(){return Yu=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ku(t);case 2:return n=e.sent,Rn(r=ao().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gu,dontclear:!0},(function(e){return new Promise(function(){var n=Ye(de().mark((function n(r,i){var a,o,u;return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ao().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Cn(t,"network-request-failed"),o=ao().setTimeout((function(){i(a)}),Wu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}var Ju={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xu="_blank",Zu="http://localhost",es=function(){function e(t){X(this,e),this.window=t,this.associatedEvent=null}return ee(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ts(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ju),{width:r.toString(),height:i.toString(),top:a,left:o}),l=be().toLowerCase();n&&(u=Pr(l)?Xu:n),Dr(l)&&(t=t||Zu,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Vr(l)&&"_self"!==u)return ns(t||"",u),new es(null);var h=window.open(t||"",u,f);Rn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new es(h)}function ns(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rs="__/auth/handler",is="emulator/auth/handler";function as(e,t,n,r,i,a){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ct,eventId:i};if(t instanceof Di){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ri){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rs);return Bn(t,is)}(e),"?").concat(Le(p).slice(1))}var os="webStorageSupport",us=function(){function e(){X(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eo,this._completeRedirectFn=Cu}return ee(e,[{key:"_openPopup",value:function(){var e=Ye(de().mark((function e(t,n,r,i){var a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=as(t,n,r,Fn(),i),e.abrupt("return",ts(t,o,ro()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ye(de().mark((function e(t,n,r,i){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=as(t,n,r,Fn(),i),ao().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(On(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$u(t);case 2:return n=e.sent,r=new Ru(t),n.register("authEvent",(function(e){return Rn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(os,{type:os},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Tn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Br()||Rr()||Ur()}}]),e}(),ss=us,cs=function(){function e(t){X(this,e),this.factorId=t}return ee(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Pn("unexpected MultiFactorSessionType")}}}]),e}(),ls=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this,"phone")).credential=e,r}return ee(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Gn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Wn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Gn(e,"POST","/v2/accounts/mfaSignIn:finalize",Wn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(cs),fs=function(){function e(){X(this,e)}return ee(e,null,[{key:"assertion",value:function(e){return ls._fromCredential(e)}}]),e}();fs.FACTOR_ID="phone";var hs,ds="@firebase/auth",ps="0.19.11",vs=function(){function e(t){X(this,e),this.auth=t,this.internalListeners=new Map}return ee(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function ms(){return window}hs="Browser",bt(new Je("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Rn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Rn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:hs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qr(hs)},i=new zr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),bt(new Je("auth-internal",(function(e){return function(e){return new vs(e)}(Kr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(ds,ps,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(hs)),Ot(ds,ps,"esm2017");function ys(e,t,n){return gs.apply(this,arguments)}function gs(){return gs=Ye(de().mark((function e(t,n,r){var i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ms(),o=a.BuildInfo,On(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Is(n.sessionId);case 4:return u=e.sent,s={},Ur()?s.ibi=o.packageName:Lr()?s.apn=o.packageName:Tn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",as(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function ks(){return ks=Ye(de().mark((function e(t){var n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ms(),r=n.BuildInfo,i={},Ur()?i.iosBundleId=r.packageName:Lr()?i.androidPackageName=r.packageName:Tn(t,"operation-not-supported-in-this-environment"),e.next=5,Lu(t,i);case 5:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function ws(e){var t=ms().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function bs(e,t,n){return xs.apply(this,arguments)}function xs(){return xs=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ms(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Cn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Lr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),xs.apply(this,arguments)}function _s(e){var t,n,r,i,a,o,u,s,c,l,f=ms();Rn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Rn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Rn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Rn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Rn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Is(e){return Es.apply(this,arguments)}function Es(){return(Es=Ye(de().mark((function e(t){var n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ss(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e){if(On(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ts=function(e){ie(n,e);var t=ce(n);function n(){var e;return X(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ee(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),un(ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ru);function Cs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Ps(),postBody:null,tenantId:e.tenantId,error:Cn(e,"no-auth-event")}}function Ns(e,t){return Os()._set(Ls(e),t)}function As(e){return Ds.apply(this,arguments)}function Ds(){return Ds=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Os()._get(Ls(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Os()._remove(Ls(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}function Rs(e,t){var n,r,i=function(e){var t=Ms(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ms(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ms(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ms(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Cn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ps(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Os(){return Mn(Xa)}function Ls(e){return Cr("authEvent",e.config.apiKey,e.name)}function Ms(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||He(t)||u(t)||s();r[0];return Me(r.slice(1).join("?"))}var Fs=function(){function e(){X(this,e),this._redirectPersistence=eo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cu}return ee(e,[{key:"_initialize",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ts(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Tn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ye(de().mark((function e(t,n,r,i){var a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),hu.clear(),e.next=10,this._originValidation(t);case 10:return o=Cs(t,r,i),e.next=13,Ns(t,o);case 13:return e.next=15,ys(t,o,n);case 15:return u=e.sent,e.next=18,ws(u);case 18:return s=e.sent,e.abrupt("return",bs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ks.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ms(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,As(e);case 2:t.onEvent(Vs());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ye(de().mark((function n(r){var i,a;return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,As(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Rs(i,r.url)),t.onEvent(a||Vs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ms().handleOpenURL=function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Us=Fs;function Vs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Cn("no-auth-event")}}function js(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return!("file:"!==js()&&"ionic:"!==js()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function qs(){return Se()&&11===(null===document||void 0===document?void 0:document.documentMode)}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return/Edge\/\d+/.test(e)}function Ks(){try{var e=self.localStorage,t=ro();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be();return qs()||zs(e)}()||Te()}catch(n){return Ws()&&Te()}return!1}function Ws(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Gs(){return("http:"===js()||"https:"===js()||Ie()||Bs())&&!(Ee()||_e())&&Ks()&&!Ws()}function Hs(){return Bs()&&"undefined"!==typeof document}function Qs(){return $s.apply(this,arguments)}function $s(){return($s=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ys={LOCAL:"local",NONE:"none",SESSION:"session"},Js=Rn,Xs="persistence";function Zs(e,t){Js(Object.values(Ys).includes(t),e,"invalid-persistence-type"),Ee()?Js(t!==Ys.SESSION,e,"unsupported-persistence-type"):_e()?Js(t===Ys.NONE,e,"unsupported-persistence-type"):Ws()?Js(t===Ys.NONE||t===Ys.LOCAL&&Te(),e,"unsupported-persistence-type"):Js(t===Ys.NONE||Ks(),e,"unsupported-persistence-type")}function ec(e){return tc.apply(this,arguments)}function tc(){return tc=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=nc(),r=Cr(Xs,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var rc=Rn,ic=function(){function e(){X(this,e),this.browserResolver=Mn(ss),this.cordovaResolver=Mn(Us),this.underlyingResolver=null,this._redirectPersistence=eo,this._completeRedirectFn=Cu}return ee(e,[{key:"_initialize",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ye(de().mark((function e(t,n,r,i){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ye(de().mark((function e(t,n,r,i){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Hs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return rc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ac(e){return e.unwrap()}function oc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new fc(e,function(e,t){var n,r=Be(e),i=t;return Rn(t.customData.operationType,r,"argument-error"),Rn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ka._fromError(r,i)}(e,t));else if(r){var i=uc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function uc(e){var t=(e instanceof Ce?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ce)&&"temporaryProof"in t&&"phoneNumber"in t)return Jo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===dn)return null;switch(r){case hn:n=Li;break;case ln:n=Oi;break;case fn:n=Mi;break;case pn:n=Vi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Fi._create(r,u):bi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Pi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ce?n.credentialFromError(e):n.credentialFromResult(e)}function sc(e,t){return t.catch((function(t){throw t instanceof Ce&&oc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,uc(t)),additionalUserInfo:qa(e),user:hc.getOrCreate(r)}}))}function cc(e,t){return lc.apply(this,arguments)}function lc(){return lc=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return sc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}var fc=function(){function e(t,n){X(this,e),this.resolver=n,this.auth=t.wrapped()}return ee(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return sc(ac(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),hc=function(){function e(t){X(this,e),this._delegate=t,this.multiFactor=function(e){var t=Be(e);return Qa.has(t)||Qa.set(t,Ha._fromUser(t)),Qa.get(t)}(t)}return ee(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(this.auth,oa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cc(this.auth,Wo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(this.auth,cu(this._delegate,t,ic)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(Kr(this.auth));case 2:return e.abrupt("return",Iu(this._delegate,t,ic));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(this.auth,sa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return cc(this.auth,function(e,t,n){return Ho.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return sc(this.auth,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,ic))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(Kr(this.auth));case 2:return e.abrupt("return",xu(this._delegate,t,ic));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Na.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Oa(Be(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Oa(Be(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Yo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Pa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Aa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();hc.USER_MAP=new WeakMap;var dc=Rn,pc=function(){function e(t,n){if(X(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;dc(r,"invalid-api-key",{appName:t.name}),dc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ic:void 0;this._delegate=n.initialize({options:{persistence:mc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(xn),this.linkUnderlyingAuth()}return ee(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?hc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Gr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ga.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ka(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ya.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(this._delegate,xa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ca.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ni.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Su(this._delegate,ic);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",sc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Kr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=vc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=vc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ia.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ma.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zs(this._delegate,t),e.t0=t,e.next=e.t0===Ys.SESSION?4:e.t0===Ys.LOCAL?6:e.t0===Ys.NONE?11:13;break;case 4:return n=eo,e.abrupt("break",14);case 6:return e.next=8,Mn(Io)._isAvailable();case 8:return r=e.sent,n=r?Io:Xa,e.abrupt("break",14);case 11:return n=Tr,e.abrupt("break",14);case 13:return e.abrupt("return",Tn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return sc(this._delegate,function(e){return Ki.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return sc(this._delegate,ia(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return sc(this._delegate,function(e,t){return ha.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return sc(this._delegate,function(e,t,n){return ia(Be(e),Ai.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return sc(this._delegate,function(e,t,n){return Ea.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return cc(this._delegate,function(e,t,n){return Ko.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",sc(this._delegate,ou(this._delegate,t,ic)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dc(Gs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ec(this._delegate);case 3:return e.abrupt("return",wu(this._delegate,t,ic));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ba.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function vc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&hc.getOrCreate(e))},error:t,complete:n}}function mc(e,t){var n=function(e,t){var n=nc();if(!n)return[];var r=Cr(Xs,e,t);switch(n.getItem(r)){case Ys.NONE:return[Tr];case Ys.LOCAL:return[Io,eo];case Ys.SESSION:return[eo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Io)||n.push(Io),"undefined"!==typeof window)for(var r=0,i=[Xa,eo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Tr)||n.push(Tr),n}pc.Persistence=Ys;var yc=function(){function e(){X(this,e),this.providerId="phone",this._delegate=new Jo(ac(an.auth()))}return ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Jo.credential(e,t)}}]),e}();yc.PHONE_SIGN_IN_METHOD=Jo.PHONE_SIGN_IN_METHOD,yc.PROVIDER_ID=Jo.PROVIDER_ID;var gc,kc=Rn,wc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:an.app();X(this,e),kc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Bo(t,n,i.auth()),this.type=this._delegate.type}return ee(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(gc=an).INTERNAL.registerComponent(new Je("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new pc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vn,PASSWORD_RESET:mn,RECOVER_EMAIL:yn,REVERT_SECOND_FACTOR_ADDITION:gn,VERIFY_AND_CHANGE_EMAIL:kn,VERIFY_EMAIL:wn}},EmailAuthProvider:Ai,FacebookAuthProvider:Oi,GithubAuthProvider:Mi,GoogleAuthProvider:Li,OAuthProvider:Pi,SAMLAuthProvider:Ui,PhoneAuthProvider:yc,PhoneMultiFactorGenerator:fs,RecaptchaVerifier:wc,TwitterAuthProvider:Vi,Auth:pc,AuthCredential:$r,Error:Ce}).setInstantiationMode("LAZY").setMultipleInstances(!1)),gc.registerVersion("@firebase/auth-compat","0.2.11");var bc,xc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_c={},Ic=Ic||{},Ec=xc||self;function Sc(){}function Tc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Cc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Nc="closure_uid_"+(1e9*Math.random()>>>0),Ac=0;function Dc(e,t,n){return e.call.apply(e.bind,arguments)}function Rc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Pc(e,t,n){return(Pc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dc:Rc).apply(null,arguments)}function Oc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Lc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Mc(){this.s=this.s,this.o=this.o}var Fc={};Mc.prototype.s=!1,Mc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Nc)&&e[Nc]||(e[Nc]=++Ac)}(this);delete Fc[e]}},Mc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Uc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Vc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function jc(e){return Array.prototype.concat.apply([],arguments)}function Bc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function qc(e){return/^[\s\xa0]*$/.test(e)}var zc,Kc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Wc(e,t){return-1!=e.indexOf(t)}function Gc(e,t){return e<t?-1:e>t?1:0}e:{var Hc=Ec.navigator;if(Hc){var Qc=Hc.userAgent;if(Qc){zc=Qc;break e}}zc=""}function $c(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Yc(e){var t={};for(var n in e)t[n]=e[n];return t}var Jc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Jc.length;a++)n=Jc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zc(e){return Zc[" "](e),e}Zc[" "]=Sc;var el,tl=Wc(zc,"Opera"),nl=Wc(zc,"Trident")||Wc(zc,"MSIE"),rl=Wc(zc,"Edge"),il=rl||nl,al=Wc(zc,"Gecko")&&!(Wc(zc.toLowerCase(),"webkit")&&!Wc(zc,"Edge"))&&!(Wc(zc,"Trident")||Wc(zc,"MSIE"))&&!Wc(zc,"Edge"),ol=Wc(zc.toLowerCase(),"webkit")&&!Wc(zc,"Edge");function ul(){var e=Ec.document;return e?e.documentMode:void 0}e:{var sl="",cl=function(){var e=zc;return al?/rv:([^\);]+)(\)|;)/.exec(e):rl?/Edge\/([\d\.]+)/.exec(e):nl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ol?/WebKit\/(\S+)/.exec(e):tl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(cl&&(sl=cl?cl[1]:""),nl){var ll=ul();if(null!=ll&&ll>parseFloat(sl)){el=String(ll);break e}}el=sl}var fl,hl={};function dl(){return function(e){var t=hl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Kc(String(el)).split("."),n=Kc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Gc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Gc(0==a[2].length,0==o[2].length)||Gc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ec.document&&nl){var pl=ul();fl=pl||(parseInt(el,10)||void 0)}else fl=void 0;var vl=fl,ml=function(){if(!Ec.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ec.addEventListener("test",Sc,t),Ec.removeEventListener("test",Sc,t)}catch(n){}return e}();function yl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function gl(e,t){if(yl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(al){e:{try{Zc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:kl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gl.Z.h.call(this)}}yl.prototype.h=function(){this.defaultPrevented=!0},Lc(gl,yl);var kl={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var wl="closure_listenable_"+(1e6*Math.random()|0),bl=0;function xl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++bl,this.ca=this.fa=!1}function _l(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Il(e){this.src=e,this.g={},this.h=0}function El(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Uc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(_l(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Sl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Il.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Sl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new xl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Tl="closure_lm_"+(1e6*Math.random()|0),Cl={};function Nl(e,t,n,r,i){if(r&&r.once)return Dl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nl(e,t[a],n,r,i);return null}return n=Ul(n),e&&e[wl]?e.N(t,n,Cc(r)?!!r.capture:!!r,i):Al(e,t,n,!1,r,i)}function Al(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Cc(i)?!!i.capture:!!i,u=Ml(e);if(u||(e[Tl]=u=new Il(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ll;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ml||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ol(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Dl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Dl(e,t[a],n,r,i);return null}return n=Ul(n),e&&e[wl]?e.O(t,n,Cc(r)?!!r.capture:!!r,i):Al(e,t,n,!0,r,i)}function Rl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rl(e,t[a],n,r,i);else r=Cc(r)?!!r.capture:!!r,n=Ul(n),e&&e[wl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Sl(a=e.g[t],n,r,i))&&(_l(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ml(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Sl(t,n,r,i)),(n=-1<e?t[e]:null)&&Pl(n))}function Pl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[wl])El(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ol(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ml(t))?(El(n,e),0==n.h&&(n.src=null,t[Tl]=null)):_l(e)}}}function Ol(e){return e in Cl?Cl[e]:Cl[e]="on"+e}function Ll(e,t){if(e.ca)e=!0;else{t=new gl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Pl(e),e=n.call(r,t)}return e}function Ml(e){return(e=e[Tl])instanceof Il?e:null}var Fl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ul(e){return"function"===typeof e?e:(e[Fl]||(e[Fl]=function(t){return e.handleEvent(t)}),e[Fl])}function Vl(){Mc.call(this),this.i=new Il(this),this.P=this,this.I=null}function jl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new yl(t,e);else if(t instanceof yl)t.target=t.target||e;else{var i=t;Xc(t=new yl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Bl(o,r,!0,t)&&i}if(i=Bl(o=t.g=e,r,!0,t)&&i,i=Bl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Bl(o=t.g=n[a],r,!1,t)&&i}function Bl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&El(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Lc(Vl,Mc),Vl.prototype[wl]=!0,Vl.prototype.removeEventListener=function(e,t,n,r){Rl(this,e,t,n,r)},Vl.prototype.M=function(){if(Vl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_l(n[r]);delete t.g[e],t.h--}}this.I=null},Vl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ql=Ec.JSON.stringify;function zl(){var e=Jl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Kl,Wl=function(){function e(){X(this,e),this.h=this.g=null}return ee(e,[{key:"add",value:function(e,t){var n=Gl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Gl=new(function(){function e(t,n){X(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ee(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Hl}),(function(e){return e.reset()})),Hl=function(){function e(){X(this,e),this.next=this.g=this.h=null}return ee(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ql(e){Ec.setTimeout((function(){throw e}),0)}function $l(e,t){Kl||function(){var e=Ec.Promise.resolve(void 0);Kl=function(){e.then(Xl)}}(),Yl||(Kl(),Yl=!0),Jl.add(e,t)}var Yl=!1,Jl=new Wl;function Xl(){for(var e;e=zl();){try{e.h.call(e.g)}catch(n){Ql(n)}var t=Gl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yl=!1}function Zl(e,t){Vl.call(this),this.h=e||1,this.g=t||Ec,this.j=Pc(this.kb,this),this.l=Date.now()}function ef(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function tf(e,t,n){if("function"===typeof e)n&&(e=Pc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Pc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ec.setTimeout(e,t||0)}function nf(e){e.g=tf((function(){e.g=null,e.i&&(e.i=!1,nf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Lc(Zl,Vl),(bc=Zl.prototype).da=!1,bc.S=null,bc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jl(this,"tick"),this.da&&(ef(this),this.start()))}},bc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bc.M=function(){Zl.Z.M.call(this),ef(this),delete this.g};var rf=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ee(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:nf(this)}},{key:"M",value:function(){un(ae(n.prototype),"M",this).call(this),this.g&&(Ec.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Mc);function af(e){Mc.call(this),this.h=e,this.g={}}Lc(af,Mc);var of=[];function uf(e,t,n,r){Array.isArray(n)||(n&&(of[0]=n.toString()),n=of);for(var i=0;i<n.length;i++){var a=Nl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function sf(e){$c(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Pl(e)}),e),e.g={}}function cf(){this.g=!0}function lf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ql(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}af.prototype.M=function(){af.Z.M.call(this),sf(this)},af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cf.prototype.Aa=function(){this.g=!1},cf.prototype.info=function(){};var ff={},hf=null;function df(){return hf=hf||new Vl}function pf(e){yl.call(this,ff.Ma,e)}function vf(e){var t=df();jl(t,new pf(t,e))}function mf(e,t){yl.call(this,ff.STAT_EVENT,e),this.stat=t}function yf(e){var t=df();jl(t,new mf(t,e))}function gf(e,t){yl.call(this,ff.Na,e),this.size=t}function kf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ec.setTimeout((function(){e()}),t)}ff.Ma="serverreachability",Lc(pf,yl),ff.STAT_EVENT="statevent",Lc(mf,yl),ff.Na="timingevent",Lc(gf,yl);var wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xf(){}function _f(e){return e.h||(e.h=e.i())}function If(){}xf.prototype.h=null;var Ef,Sf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tf(){yl.call(this,"d")}function Cf(){yl.call(this,"c")}function Nf(){}function Af(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new af(this),this.P=Rf,e=il?125:void 0,this.W=new Zl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}Lc(Tf,yl),Lc(Cf,yl),Lc(Nf,xf),Nf.prototype.g=function(){return new XMLHttpRequest},Nf.prototype.i=function(){return{}},Ef=new Nf;var Rf=45e3,Pf={},Of={};function Lf(e,t,n){e.K=1,e.v=ih(Xf(t)),e.s=n,e.U=!0,Mf(e,null)}function Mf(e,t){e.F=Date.now(),jf(e),e.A=Xf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),yh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Df,e.g=kd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new rf(Pc(e.Ia,e,e.g),e.O)),uf(e.V,e.g,"readystatechange",e.gb),t=e.H?Yc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),vf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ff(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Uf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Vf(e,n))==Of){4==t&&(e.o=4,yf(14),i=!1),lf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Pf){e.o=4,yf(15),lf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}lf(e.j,e.m,r,null),Wf(e,r)}Ff(e)&&r!=Of&&r!=Pf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,yf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),fd(t),t.L=!0,yf(11))):(lf(e.j,e.m,n,"[Invalid Chunked Response]"),Kf(e),zf(e))}function Vf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Of:(n=Number(t.substring(n,r)),isNaN(n)?Pf:(r+=1)+n>t.length?Of:(t=t.substr(r,n),e.C=r+n,t))}function jf(e){e.Y=Date.now()+e.P,Bf(e,e.P)}function Bf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=kf(Pc(e.eb,e),t)}function qf(e){e.B&&(Ec.clearTimeout(e.B),e.B=null)}function zf(e){0==e.l.G||e.I||pd(e.l,e)}function Kf(e){qf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ef(e.W),sf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Wf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Eh(n.i,e)))if(n.I=e.N,!e.J&&Eh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dd(n),nd(n)}ld(n),yf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=kf(Pc(n.ab,n),6e3));if(1>=Ih(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else md(n,11)}else if((e.J||n.g==e)&&dd(n),!qc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Wc(l,"spdy")||Wc(l,"quic")||Wc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Sh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,rh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=gd(r,r.H?r.la:null,r.W),d.J){Th(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(qf(p),jf(p)),r.g=d}else cd(r);0<n.l.length&&ad(n)}else"stop"!=a[0]&&"close"!=a[0]||md(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?md(n,7):td(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}vf(4)}catch(a){}}function Gf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Tc(e)||"string"===typeof e)Vc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Tc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Tc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Hf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Hf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Qf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];$f(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)$f(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function $f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(bc=Af.prototype).setTimeout=function(e){this.P=e},bc.gb=function(e){e=e.target;var t=this.L;t&&3==Yh(e)?t.l():this.Ia(e)},bc.Ia=function(e){try{if(e==this.g)e:{var t=Yh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||il||this.g&&(this.h.h||this.g.ga()||Jh(this.g)))){this.I||4!=t||7==n||vf(8==n||0>=r?3:2),qf(this);var i=this.g.ba();this.N=i;t:if(Ff(this)){var a=Jh(this.g);e="";var o=a.length,u=4==Yh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Kf(this),zf(this);var s="";break t}this.h.i=new Ec.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,yf(12),Kf(this),zf(this);break e}lf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wf(this,i)}this.U?(Uf(this,t,s),il&&this.i&&3==t&&(uf(this.V,this.W,"tick",this.fb),this.W.start())):(lf(this.j,this.m,s,null),Wf(this,s)),4==t&&Kf(this),this.i&&!this.I&&(4==t?pd(this.l,this):(this.i=!1,jf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,yf(12)):(this.o=0,yf(13)),Kf(this),zf(this)}}}catch(t){}},bc.fb=function(){if(this.g){var e=Yh(this.g),t=this.g.ga();this.C<t.length&&(qf(this),Uf(this,e,t),this.i&&4!=e&&jf(this))}},bc.cancel=function(){this.I=!0,Kf(this)},bc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(vf(3),yf(17)),Kf(this),this.o=2,zf(this)):Bf(this,this.Y-e)},(bc=Hf.prototype).R=function(){Qf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},bc.T=function(){return Qf(this),this.g.concat()},bc.get=function(e,t){return $f(this.h,e)?this.h[e]:t},bc.set=function(e,t){$f(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},bc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Yf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Jf){this.g=void 0!==t?t:e.g,Zf(this,e.j),this.s=e.s,eh(this,e.i),th(this,e.m),this.l=e.l,t=e.h;var n=new dh;n.i=t.i,t.g&&(n.g=new Hf(t.g),n.h=t.h),nh(this,n),this.o=e.o}else e&&(n=String(e).match(Yf))?(this.g=!!t,Zf(this,n[1]||"",!0),this.s=ah(n[2]||""),eh(this,n[3]||"",!0),th(this,n[4]),this.l=ah(n[5]||"",!0),nh(this,n[6]||"",!0),this.o=ah(n[7]||"")):(this.g=!!t,this.h=new dh(null,this.g))}function Xf(e){return new Jf(e)}function Zf(e,t,n){e.j=n?ah(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function eh(e,t,n){e.i=n?ah(t,!0):t}function th(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function nh(e,t,n){t instanceof dh?(e.h=t,function(e,t){t&&!e.j&&(ph(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vh(this,t),yh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=oh(t,fh)),e.h=new dh(t,e.g))}function rh(e,t,n){e.h.set(t,n)}function ih(e){return rh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ah(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function oh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,uh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function uh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Jf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(oh(t,sh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(oh(t,sh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(oh(n,"/"==n.charAt(0)?lh:ch,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",oh(n,hh)),e.join("")};var sh=/[#\/\?@]/g,ch=/[#\?:]/g,lh=/[#\?]/g,fh=/[#\?@]/g,hh=/#/g;function dh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ph(e){e.g||(e.g=new Hf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vh(e,t){ph(e),t=gh(e,t),$f(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,$f((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Qf(e)))}function mh(e,t){return ph(e),t=gh(e,t),$f(e.g.h,t)}function yh(e,t,n){vh(e,t),0<n.length&&(e.i=null,e.g.set(gh(e,t),Bc(n)),e.h+=n.length)}function gh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(bc=dh.prototype).add=function(e,t){ph(this),this.i=null,e=gh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},bc.forEach=function(e,t){ph(this),this.g.forEach((function(n,r){Vc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},bc.T=function(){ph(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},bc.R=function(e){ph(this);var t=[];if("string"===typeof e)mh(this,e)&&(t=jc(t,this.g.get(gh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=jc(t,e[n])}return t},bc.set=function(e,t){return ph(this),this.i=null,mh(this,e=gh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},bc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},bc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var kh=ee((function e(t,n){X(this,e),this.h=t,this.g=n}));function wh(e){this.l=e||xh,Ec.PerformanceNavigationTiming?e=0<(e=Ec.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ec.g&&Ec.g.Ea&&Ec.g.Ea()&&Ec.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bh,xh=10;function _h(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ih(e){return e.h?1:e.g?e.g.size:0}function Eh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sh(e,t){e.g?e.g.add(t):e.h=t}function Th(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ch(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=te(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Bc(e.i)}function Nh(){}function Ah(){this.g=new Nh}function Dh(e,t,n){var r=n||"";try{Gf(e,(function(e,n){var i=e;Cc(e)&&(i=ql(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ph(e){this.l=e.$b||null,this.j=e.ib||!1}function Oh(e,t){Vl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Lh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wh.prototype.cancel=function(){if(this.i=Ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=te(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Nh.prototype.stringify=function(e){return Ec.JSON.stringify(e,void 0)},Nh.prototype.parse=function(e){return Ec.JSON.parse(e,void 0)},Lc(Ph,xf),Ph.prototype.g=function(){return new Oh(this.l,this.j)},Ph.prototype.i=(bh={},function(){return bh}),Lc(Oh,Vl);var Lh=0;function Mh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Fh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Uh(e)}function Uh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(bc=Oh.prototype).open=function(e,t){if(this.readyState!=Lh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Uh(this)},bc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ec).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},bc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fh(this)),this.readyState=Lh},bc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ec.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},bc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fh(this):Uh(this),3==this.readyState&&Mh(this)}},bc.Ua=function(e){this.g&&(this.response=this.responseText=e,Fh(this))},bc.Ta=function(e){this.g&&(this.response=e,Fh(this))},bc.ha=function(){this.g&&Fh(this)},bc.setRequestHeader=function(e,t){this.v.append(e,t)},bc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},bc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Oh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Vh=Ec.JSON.parse;function jh(e){Vl.call(this),this.headers=new Hf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bh,this.K=this.L=!1}Lc(jh,Vl);var Bh="",qh=/^https?$/i,zh=["POST","PUT"];function Kh(e){return"content-type"==e.toLowerCase()}function Wh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gh(e),Qh(e)}function Gh(e){e.D||(e.D=!0,jl(e,"complete"),jl(e,"error"))}function Hh(e){if(e.h&&"undefined"!=typeof Ic&&(!e.C[1]||4!=Yh(e)||2!=e.ba()))if(e.v&&4==Yh(e))tf(e.Fa,0,e);else if(jl(e,"readystatechange"),4==Yh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Yf)[1]||null;if(!a&&Ec.self&&Ec.self.location){var o=Ec.self.location.protocol;a=o.substr(0,o.length-1)}i=!qh.test(a?a.toLowerCase():"")}t=i}if(t)jl(e,"complete"),jl(e,"success");else{e.m=6;try{var u=2<Yh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Gh(e)}}finally{Qh(e)}}}function Qh(e,t){if(e.g){$h(e);var n=e.g,r=e.C[0]?Sc:null;e.g=null,e.C=null,t||jl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function $h(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ec.clearTimeout(e.A),e.A=null)}function Yh(e){return e.g?e.g.readyState:0}function Jh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Bh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return $c(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):rh(e,t,n))}function Zh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ed(e){this.za=0,this.l=[],this.h=new cf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zh("baseRetryDelayMs",5e3,e),this.$a=Zh("retryDelaySeedMs",1e4,e),this.Ya=Zh("forwardChannelMaxRetries",2,e),this.ra=Zh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new wh(e&&e.concurrentRequestLimit),this.Ca=new Ah,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function td(e){if(rd(e),3==e.G){var t=e.V++,n=Xf(e.F);rh(n,"SID",e.J),rh(n,"RID",t),rh(n,"TYPE","terminate"),ud(e,n),(t=new Af(e,e.h,t,void 0)).K=2,t.v=ih(Xf(n)),n=!1,Ec.navigator&&Ec.navigator.sendBeacon&&(n=Ec.navigator.sendBeacon(t.v.toString(),"")),!n&&Ec.Image&&((new Image).src=t.v,n=!0),n||(t.g=kd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),jf(t)}yd(e)}function nd(e){e.g&&(fd(e),e.g.cancel(),e.g=null)}function rd(e){nd(e),e.u&&(Ec.clearTimeout(e.u),e.u=null),dd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ec.clearTimeout(e.m),e.m=null)}function id(e,t){e.l.push(new kh(e.Za++,t)),3==e.G&&ad(e)}function ad(e){_h(e.i)||e.m||(e.m=!0,$l(e.Ha,e),e.C=0)}function od(e,t){var n;n=t?t.m:e.V++;var r=Xf(e.F);rh(r,"SID",e.J),rh(r,"RID",n),rh(r,"AID",e.U),ud(e,r),e.o&&e.s&&Xh(r,e.o,e.s),n=new Af(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=sd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Sh(e.i,n),Lf(n,r,t)}function ud(e,t){e.j&&Gf({},(function(e,n){rh(t,n,e)}))}function sd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Pc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Dh(l,o,"req"+c+"_")}catch(Gd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function cd(e){e.g||e.u||(e.Y=1,$l(e.Ga,e),e.A=0)}function ld(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=kf(Pc(e.Ga,e),vd(e,e.A)),e.A++,!0)}function fd(e){null!=e.B&&(Ec.clearTimeout(e.B),e.B=null)}function hd(e){e.g=new Af(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Xf(e.oa);rh(t,"RID","rpc"),rh(t,"SID",e.J),rh(t,"CI",e.N?"0":"1"),rh(t,"AID",e.U),ud(e,t),rh(t,"TYPE","xmlhttp"),e.o&&e.s&&Xh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ih(Xf(t)),n.s=null,n.U=!0,Mf(n,e)}function dd(e){null!=e.v&&(Ec.clearTimeout(e.v),e.v=null)}function pd(e,t){var n=null;if(e.g==t){dd(e),fd(e),e.g=null;var r=2}else{if(!Eh(e.i,t))return;n=t.D,Th(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;jl(r=df(),new gf(r,n,t,i)),ad(e)}else cd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ih(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=kf(Pc(e.Ha,e,t),vd(e,e.C)),e.C++,!0))}(e,t)||2==r&&ld(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:md(e,5);break;case 4:md(e,10);break;case 3:md(e,6);break;default:md(e,2)}}function vd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function md(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Pc(e.jb,e);n||(n=new Jf("//www.google.com/images/cleardot.gif"),Ec.location&&"http"==Ec.location.protocol||Zf(n,"https"),ih(n)),function(e,t){var n=new cf;if(Ec.Image){var r=new Image;r.onload=Oc(Rh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Oc(Rh,n,r,"TestLoadImage: error",!1,t),r.onabort=Oc(Rh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Oc(Rh,n,r,"TestLoadImage: timeout",!1,t),Ec.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else yf(2);e.G=0,e.j&&e.j.va(t),yd(e),rd(e)}function yd(e){e.G=0,e.I=-1,e.j&&(0==Ch(e.i).length&&0==e.l.length||(e.i.i.length=0,Bc(e.l),e.l.length=0),e.j.ua())}function gd(e,t,n){var r=function(e){return e instanceof Jf?Xf(e):new Jf(e,void 0)}(n);if(""!=r.i)t&&eh(r,t+"."+r.i),th(r,r.m);else{var i=Ec.location;r=function(e,t,n,r){var i=new Jf(null,void 0);return e&&Zf(i,e),t&&eh(i,t),n&&th(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&$c(e.aa,(function(e,t){rh(r,t,e)})),t=e.D,n=e.sa,t&&n&&rh(r,t,n),rh(r,"VER",e.ma),ud(e,r),r}function kd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new jh(new Ph({ib:!0})):new jh(e.qa)).L=e.H,t}function wd(){}function bd(){if(nl&&!(10<=Number(vl)))throw Error("Environmental error: no available transport.")}function xd(e,t){Vl.call(this),this.g=new ed(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!qc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!qc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ed(this)}function _d(e){Tf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Id(){Cf.call(this),this.status=1}function Ed(e){this.g=e}(bc=jh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ef.g(),this.C=this.u?_f(this.u):_f(Ef),this.g.onreadystatechange=Pc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Wh(this,a)}e=n||"";var i=new Hf(this.headers);r&&Gf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Kh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ec.FormData&&e instanceof Ec.FormData,!(0<=Uc(zh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$h(this),0<this.B&&((this.K=function(e){return nl&&dl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pc(this.pa,this)):this.A=tf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Wh(this,a)}},bc.pa=function(){"undefined"!=typeof Ic&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jl(this,"timeout"),this.abort(8))},bc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jl(this,"complete"),jl(this,"abort"),Qh(this))},bc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qh(this,!0)),jh.Z.M.call(this)},bc.Fa=function(){this.s||(this.F||this.v||this.l?Hh(this):this.cb())},bc.cb=function(){Hh(this)},bc.ba=function(){try{return 2<Yh(this)?this.g.status:-1}catch(bh){return-1}},bc.ga=function(){try{return this.g?this.g.responseText:""}catch(bh){return""}},bc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Vh(t)}},bc.Da=function(){return this.m},bc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(bc=ed.prototype).ma=8,bc.G=1,bc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},bc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Af(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Xc(n=Yc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=sd(this,t,r),rh(i=Xf(this.F),"RID",e),rh(i,"CVER",22),this.D&&rh(i,"X-HTTP-Session-Id",this.D),ud(this,i),this.o&&n&&Xh(i,this.o,n),Sh(this.i,t),this.Ra&&rh(i,"TYPE","init"),this.ja?(rh(i,"$req",r),rh(i,"SID","null"),t.$=!0,Lf(t,i,null)):Lf(t,i,r),this.G=2}}else 3==this.G&&(e?od(this,e):0==this.l.length||_h(this.i)||od(this))},bc.Ga=function(){if(this.u=null,hd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=kf(Pc(this.bb,this),e)}},bc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yf(10),nd(this),hd(this))},bc.ab=function(){null!=this.v&&(this.v=null,nd(this),ld(this),yf(19))},bc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),yf(2)):(this.h.info("Failed to ping google.com"),yf(1))},(bc=wd.prototype).xa=function(){},bc.wa=function(){},bc.va=function(){},bc.ua=function(){},bc.Oa=function(){},bd.prototype.g=function(e,t){return new xd(e,t)},Lc(xd,Vl),xd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),$l(Pc(e.hb,e,t))),yf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=gd(e,null,e.W),ad(e)},xd.prototype.close=function(){td(this.g)},xd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,id(this.g,t)}else this.v?((t={}).__data__=ql(e),id(this.g,t)):id(this.g,e)},xd.prototype.M=function(){this.g.j=null,delete this.j,td(this.g),delete this.g,xd.Z.M.call(this)},Lc(_d,Tf),Lc(Id,Cf),Lc(Ed,wd),Ed.prototype.xa=function(){jl(this.g,"a")},Ed.prototype.wa=function(e){jl(this.g,new _d(e))},Ed.prototype.va=function(e){jl(this.g,new Id(e))},Ed.prototype.ua=function(){jl(this.g,"b")},bd.prototype.createWebChannel=bd.prototype.g,xd.prototype.send=xd.prototype.u,xd.prototype.open=xd.prototype.m,xd.prototype.close=xd.prototype.close,wf.NO_ERROR=0,wf.TIMEOUT=8,wf.HTTP_ERROR=6,bf.COMPLETE="complete",If.EventType=Sf,Sf.OPEN="a",Sf.CLOSE="b",Sf.ERROR="c",Sf.MESSAGE="d",Vl.prototype.listen=Vl.prototype.N,jh.prototype.listenOnce=jh.prototype.O,jh.prototype.getLastError=jh.prototype.La,jh.prototype.getLastErrorCode=jh.prototype.Da,jh.prototype.getStatus=jh.prototype.ba,jh.prototype.getResponseJson=jh.prototype.Qa,jh.prototype.getResponseText=jh.prototype.ga,jh.prototype.send=jh.prototype.ea;var Sd=_c.createWebChannelTransport=function(){return new bd},Td=_c.getStatEventTarget=function(){return df()},Cd=_c.ErrorCode=wf,Nd=_c.EventType=bf,Ad=_c.Event=ff,Dd=_c.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Rd=_c.FetchXmlHttpFactory=Ph,Pd=_c.WebChannel=If,Od=_c.XhrIo=jh,Ld="@firebase/firestore",Md=function(){function e(t){X(this,e),this.uid=t}return ee(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Md.UNAUTHENTICATED=new Md(null),Md.GOOGLE_CREDENTIALS=new Md("google-credentials-uid"),Md.FIRST_PARTY=new Md("first-party-uid"),Md.MOCK_USER=new Md("mock-user");var Fd="9.6.10",Ud=new lt("@firebase/firestore");function Vd(){return Ud.logLevel}function jd(e){if(Ud.logLevel<=tt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Ud.debug.apply(Ud,["Firestore (".concat(Fd,"): ").concat(e)].concat(Qe(i)))}}function Bd(e){if(Ud.logLevel<=tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Ud.error.apply(Ud,["Firestore (".concat(Fd,"): ").concat(e)].concat(Qe(i)))}}function qd(e){if(Ud.logLevel<=tt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Ud.warn.apply(Ud,["Firestore (".concat(Fd,"): ").concat(e)].concat(Qe(i)))}}function zd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Kd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Fd,") INTERNAL ASSERTION FAILED: ")+e;throw Bd(t),new Error(t)}function Wd(e,t){e||Kd()}function Gd(e,t){return e}var Hd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qd=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ee(n)}(Ce),$d=ee((function e(){var t=this;X(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yd=ee((function e(t,n){X(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Jd=function(){function e(){X(this,e)}return ee(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Md.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Xd=function(){function e(t){X(this,e),this.token=t,this.changeListener=null}return ee(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Zd=function(){function e(t){X(this,e),this.t=t,this.currentUser=Md.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ee(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new $d;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new $d,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){jd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(jd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $d)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Wd("string"==typeof n.accessToken),new Yd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Wd(null===e||"string"==typeof e),new Md(e)}}]),e}(),ep=ee((function e(t,n,r){X(this,e),this.type="FirstParty",this.user=Md.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),tp=function(){function e(t,n,r){X(this,e),this.h=t,this.l=n,this.m=r}return ee(e,[{key:"getToken",value:function(){return Promise.resolve(new ep(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Md.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),np=ee((function e(t){X(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),rp=function(){function e(t){X(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ee(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,jd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):jd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Wd("string"==typeof t.token),e.p=t.token,new np(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),ip=function(){function e(t,n){var r=this;X(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return ee(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ap(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ip.A=-1;var op=function(){function e(){X(this,e)}return ee(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ap(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function up(e,t){return e<t?-1:e>t?1:0}function sp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function cp(e){return e+"\0"}var lp=function(){function e(t,n){if(X(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Qd(Hd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qd(Hd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qd(Hd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qd(Hd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ee(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?up(this.nanoseconds,e.nanoseconds):up(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),fp=function(){function e(t){X(this,e),this.timestamp=t}return ee(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new lp(0,0))}},{key:"max",value:function(){return new e(new lp(253402300799,999999999))}}]),e}();function hp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var vp=function(){function e(t,n,r){X(this,e),void 0===n?n=0:n>t.length&&Kd(),void 0===r?r=t.length-n:r>t.length-n&&Kd(),this.segments=t,this.offset=n,this.len=r}return ee(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),mp=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Qe(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vp),yp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gp=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return yp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Qd(Hd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Qd(Hd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Qd(Hd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(vp),kp=function(){function e(t){X(this,e),this.fields=t,t.sort(gp.comparator)}return ee(e,[{key:"covers",value:function(e){var t,n=te(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return sp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var wp=function(e){function t(e){X(this,t),this.binaryString=e}return ee(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return up(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();wp.EMPTY_BYTE_STRING=new wp("");var bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xp(e){if(Wd(!!e),"string"==typeof e){var t=0,n=bp.exec(e);if(Wd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_p(e.seconds),nanos:_p(e.nanos)}}function _p(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ip(e){return"string"==typeof e?wp.fromBase64String(e):wp.fromUint8Array(e)}function Ep(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sp(e){var t=e.mapValue.fields.__previous_value__;return Ep(t)?Sp(t):t}function Tp(e){var t=xp(e.mapValue.fields.__local_write_time__.timestampValue);return new lp(t.seconds,t.nanos)}var Cp=ee((function e(t,n,r,i,a,o,u,s){X(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Np=function(){function e(t,n){X(this,e),this.projectId=t,this.database=n||"(default)"}return ee(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ap(e){return null==e}function Dp(e){return 0===e&&1/e==-1/0}function Rp(e){return"number"==typeof e&&Number.isInteger(e)&&!Dp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Pp=function(){function e(t){X(this,e),this.path=t}return ee(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===mp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(mp.fromString(t))}},{key:"fromName",value:function(t){return new e(mp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(mp.emptyPath())}},{key:"comparator",value:function(e,t){return mp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new mp(t.slice()))}}]),e}(),Op={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lp={nullValue:"NULL_VALUE"};function Mp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ep(e)?4:Yp(e)?9:10:Kd()}function Fp(e,t){if(e===t)return!0;var n=Mp(e);if(n!==Mp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Tp(e).isEqual(Tp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=xp(e.timestampValue),r=xp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ip(e.bytesValue).isEqual(Ip(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _p(e.geoPointValue.latitude)===_p(t.geoPointValue.latitude)&&_p(e.geoPointValue.longitude)===_p(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _p(e.integerValue)===_p(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=_p(e.doubleValue),r=_p(t.doubleValue);return n===r?Dp(n)===Dp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sp(e.arrayValue.values||[],t.arrayValue.values||[],Fp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hp(n)!==hp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fp(n[i],r[i])))return!1;return!0}(e,t);default:return Kd()}}function Up(e,t){return void 0!==(e.values||[]).find((function(e){return Fp(e,t)}))}function Vp(e,t){if(e===t)return 0;var n=Mp(e),r=Mp(t);if(n!==r)return up(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return up(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=_p(e.integerValue||e.doubleValue),r=_p(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return jp(e.timestampValue,t.timestampValue);case 4:return jp(Tp(e),Tp(t));case 5:return up(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ip(e),r=Ip(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=up(n[i],r[i]);if(0!==a)return a}return up(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=up(_p(e.latitude),_p(t.latitude));return 0!==n?n:up(_p(e.longitude),_p(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Vp(n[i],r[i]);if(a)return a}return up(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=up(r[o],a[o]);if(0!==u)return u;var s=Vp(n[r[o]],i[a[o]]);if(0!==s)return s}return up(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Kd()}}function jp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return up(e,t);var n=xp(e),r=xp(t),i=up(n.seconds,r.seconds);return 0!==i?i:up(n.nanos,r.nanos)}function Bp(e){return qp(e)}function qp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=xp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ip(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Pp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=te(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=qp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=te(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(qp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Kd();var t,n}function zp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Kp(e){return!!e&&"integerValue"in e}function Wp(e){return!!e&&"arrayValue"in e}function Gp(e){return!!e&&"nullValue"in e}function Hp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qp(e){return!!e&&"mapValue"in e}function $p(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return dp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=$p(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$p(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Yp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jp(e,t){return void 0===e?t:void 0===t||Vp(e,t)>0?e:t}function Xp(e,t){return void 0===e?t:void 0===t||Vp(e,t)<0?e:t}var Zp=function(){function e(t){X(this,e),this.value=t}return ee(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(t)}},{key:"setAll",value:function(e){var t=this,n=gp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=$p(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Fp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){dp(t,(function(t,n){return e[t]=n}));var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e($p(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ev(e){var t=[];return dp(e.fields,(function(e,n){var r=new gp([e]);if(Qp(n)){var i=ev(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=te(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new kp(t)}var tv=function(){function e(t,n,r,i,a,o){X(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ee(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Zp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Zp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,fp.min(),fp.min(),Zp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,fp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,fp.min(),Zp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,fp.min(),Zp.empty(),2)}}]),e}(),nv=ee((function e(t,n,r,i){X(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function rv(e){return e.fields.find((function(e){return 2===e.kind}))}function iv(e){return e.fields.filter((function(e){return 2!==e.kind}))}nv.UNKNOWN_ID=-1;var av=ee((function e(t,n){X(this,e),this.fieldPath=t,this.kind=n})),ov=function(){function e(t,n){X(this,e),this.sequenceNumber=t,this.offset=n}return ee(e,null,[{key:"empty",value:function(){return new e(0,cv.min())}}]),e}();function uv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fp.fromTimestamp(1e9===r?new lp(n+1,0):new lp(n,r));return new cv(i,Pp.empty(),t)}function sv(e){return new cv(e.readTime,e.key,-1)}var cv=function(){function e(t,n,r){X(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ee(e,null,[{key:"min",value:function(){return new e(fp.min(),Pp.empty(),-1)}},{key:"max",value:function(){return new e(fp.max(),Pp.empty(),-1)}}]),e}();function lv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Pp.comparator(e.documentKey,t.documentKey))?n:up(e.largestBatchId,t.largestBatchId)}var fv=ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;X(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function hv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new fv(e,t,n,r,i,a,o)}function dv(e){var t=Gd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Bp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ap(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Bp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Bp(e)})).join(",")),t.P=n}return t.P}function pv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Cv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Fp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Av(e.startAt,t.startAt)&&Av(e.endAt,t.endAt)}function vv(e){return Pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function mv(e,t){return e.filters.filter((function(e){return e instanceof yv&&e.field.isEqual(t)}))}var yv=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Vp(t,this.value)):null!==t&&Mp(this.value)===Mp(t)&&this.v(Vp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new gv(e,t,r):"array-contains"===t?new xv(e,r):"in"===t?new _v(e,r):"not-in"===t?new Iv(e,r):"array-contains-any"===t?new Ev(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new kv(e,n):new wv(e,n)}}]),n}(function(){return ee((function e(){X(this,e)}))}()),gv=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this,e,r,i)).key=Pp.fromName(i.referenceValue),a}return ee(n,[{key:"matches",value:function(e){var t=Pp.comparator(e.key,this.key);return this.v(t)}}]),n}(yv),kv=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,"in",r)).keys=bv("in",r),i}return ee(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yv),wv=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,"not-in",r)).keys=bv("not-in",r),i}return ee(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yv);function bv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Pp.fromName(e.referenceValue)}))}var xv=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"array-contains",r)}return ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Wp(t)&&Up(t.arrayValue,this.value)}}]),n}(yv),_v=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"in",r)}return ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Up(this.value.arrayValue,t)}}]),n}(yv),Iv=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"not-in",r)}return ee(n,[{key:"matches",value:function(e){if(Up(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Up(this.value.arrayValue,t)}}]),n}(yv),Ev=function(e){ie(n,e);var t=ce(n);function n(e,r){return X(this,n),t.call(this,e,"array-contains-any",r)}return ee(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Up(t.value.arrayValue,e)}))}}]),n}(yv),Sv=ee((function e(t,n){X(this,e),this.position=t,this.inclusive=n})),Tv=ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";X(this,e),this.field=t,this.dir=n}));function Cv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Nv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Pp.comparator(Pp.fromName(o.referenceValue),n.key):Vp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Av(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Fp(e.position[n],t.position[n]))return!1;return!0}var Dv=ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;X(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Rv(e,t,n,r,i,a,o,u){return new Dv(e,t,n,r,i,a,o,u)}function Pv(e){return new Dv(e)}function Ov(e){return!Ap(e.limit)&&"F"===e.limitType}function Lv(e){return!Ap(e.limit)&&"L"===e.limitType}function Mv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fv(e){var t,n=te(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Uv(e){return null!==e.collectionGroup}function Vv(e){var t=Gd(e);if(null===t.D){t.D=[];var n=Fv(t),r=Mv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Tv(n)),t.D.push(new Tv(gp.keyField(),"asc"));else{var i,a=!1,o=te(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Tv(gp.keyField(),s))}}}return t.D}function jv(e){var t=Gd(e);if(!t.C)if("F"===t.limitType)t.C=hv(t.path,t.collectionGroup,Vv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=te(Vv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Tv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Sv(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Sv(t.startAt.position,!t.startAt.inclusive):null;t.C=hv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Bv(e,t,n){return new Dv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qv(e,t){return pv(jv(e),jv(t))&&e.limitType===t.limitType}function zv(e){return"".concat(dv(jv(e)),"|lt:").concat(e.limitType)}function Kv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Bp(t.value));var t})).join(", "),"]")),Ap(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Bp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Bp(e)})).join(",")),"Target(".concat(t,")")}(jv(e)),"; limitType=").concat(e.limitType,")")}function Wv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=te(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=te(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Nv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Nv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vv(e),t))}(e,t)}function Gv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hv(e){return function(t,n){var r,i=!1,a=te(Vv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Qv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Qv(e,t,n){var r=e.field.isKeyField()?Pp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vp(r,i):Kd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kd()}}function $v(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dp(t)?"-0":t}}function Yv(e){return{integerValue:""+e}}function Jv(e,t){return Rp(t)?Yv(t):$v(e,t)}var Xv=ee((function e(){X(this,e),this._=void 0}));function Zv(e,t,n){return e instanceof nm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rm?im(e,t):e instanceof am?om(e,t):function(e,t){var n=tm(e,t),r=sm(n)+sm(e.k);return Kp(n)&&Kp(e.k)?Yv(r):$v(e.M,r)}(e,t)}function em(e,t,n){return e instanceof rm?im(e,t):e instanceof am?om(e,t):n}function tm(e,t){return e instanceof um?Kp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var nm=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n)}(Xv),rm=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).elements=e,r}return ee(n)}(Xv);function im(e,t){var n,r=cm(t),i=te(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Fp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var am=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).elements=e,r}return ee(n)}(Xv);function om(e,t){var n,r=cm(t),i=te(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Fp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var um=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).M=e,i.k=r,i}return ee(n)}(Xv);function sm(e){return _p(e.integerValue||e.doubleValue)}function cm(e){return Wp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lm=ee((function e(t,n){X(this,e),this.field=t,this.transform=n}));var fm=ee((function e(t,n){X(this,e),this.version=t,this.transformResults=n})),hm=function(){function e(t,n){X(this,e),this.updateTime=t,this.exists=n}return ee(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function dm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var pm=ee((function e(){X(this,e)}));function vm(e,t,n){e instanceof wm?function(e,t,n){var r=e.value.clone(),i=_m(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bm?function(e,t,n){if(dm(e.precondition,t)){var r=_m(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mm(e,t,n){e instanceof wm?function(e,t,n){if(dm(e.precondition,t)){var r=e.value.clone(),i=Im(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(km(t),r).setHasLocalMutations()}}(e,t,n):e instanceof bm?function(e,t,n){if(dm(e.precondition,t)){var r=Im(e.fieldTransforms,n,t),i=t.data;i.setAll(xm(e)),i.setAll(r),t.convertToFoundDocument(km(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){dm(e.precondition,t)&&t.convertToNoDocument(fp.min())}(e,t)}function ym(e,t){var n,r=null,i=te(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=tm(a.transform,o||null);null!=u&&(null==r&&(r=Zp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function gm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rm&&t instanceof rm||e instanceof am&&t instanceof am?sp(e.elements,t.elements,Fp):e instanceof um&&t instanceof um?Fp(e.k,t.k):e instanceof nm&&t instanceof nm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function km(e){return e.isFoundDocument()?e.version:fp.min()}var wm=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return X(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ee(n)}(pm),bm=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return X(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ee(n)}(pm);function xm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function _m(e,t,n){var r=new Map;Wd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,em(o,u,n[i]))}return r}function Im(e,t,n){var r,i=new Map,a=te(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Zv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Em,Sm,Tm=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ee(n)}(pm),Cm=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ee(n)}(pm),Nm=ee((function e(t){X(this,e),this.count=t}));function Am(e){switch(e){default:return Kd();case Hd.CANCELLED:case Hd.UNKNOWN:case Hd.DEADLINE_EXCEEDED:case Hd.RESOURCE_EXHAUSTED:case Hd.INTERNAL:case Hd.UNAVAILABLE:case Hd.UNAUTHENTICATED:return!1;case Hd.INVALID_ARGUMENT:case Hd.NOT_FOUND:case Hd.ALREADY_EXISTS:case Hd.PERMISSION_DENIED:case Hd.FAILED_PRECONDITION:case Hd.ABORTED:case Hd.OUT_OF_RANGE:case Hd.UNIMPLEMENTED:case Hd.DATA_LOSS:return!0}}function Dm(e){if(void 0===e)return Bd("GRPC error has no .code"),Hd.UNKNOWN;switch(e){case Em.OK:return Hd.OK;case Em.CANCELLED:return Hd.CANCELLED;case Em.UNKNOWN:return Hd.UNKNOWN;case Em.DEADLINE_EXCEEDED:return Hd.DEADLINE_EXCEEDED;case Em.RESOURCE_EXHAUSTED:return Hd.RESOURCE_EXHAUSTED;case Em.INTERNAL:return Hd.INTERNAL;case Em.UNAVAILABLE:return Hd.UNAVAILABLE;case Em.UNAUTHENTICATED:return Hd.UNAUTHENTICATED;case Em.INVALID_ARGUMENT:return Hd.INVALID_ARGUMENT;case Em.NOT_FOUND:return Hd.NOT_FOUND;case Em.ALREADY_EXISTS:return Hd.ALREADY_EXISTS;case Em.PERMISSION_DENIED:return Hd.PERMISSION_DENIED;case Em.FAILED_PRECONDITION:return Hd.FAILED_PRECONDITION;case Em.ABORTED:return Hd.ABORTED;case Em.OUT_OF_RANGE:return Hd.OUT_OF_RANGE;case Em.UNIMPLEMENTED:return Hd.UNIMPLEMENTED;case Em.DATA_LOSS:return Hd.DATA_LOSS;default:return Kd()}}(Sm=Em||(Em={}))[Sm.OK=0]="OK",Sm[Sm.CANCELLED=1]="CANCELLED",Sm[Sm.UNKNOWN=2]="UNKNOWN",Sm[Sm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sm[Sm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sm[Sm.NOT_FOUND=5]="NOT_FOUND",Sm[Sm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sm[Sm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sm[Sm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sm[Sm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sm[Sm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sm[Sm.ABORTED=10]="ABORTED",Sm[Sm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sm[Sm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sm[Sm.INTERNAL=13]="INTERNAL",Sm[Sm.UNAVAILABLE=14]="UNAVAILABLE",Sm[Sm.DATA_LOSS=15]="DATA_LOSS";var Rm=function(){function e(t,n){X(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ee(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){dp(this.inner,(function(t,n){var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return pp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Pm=function(){function e(t,n){X(this,e),this.comparator=t,this.root=n||Lm.EMPTY}return ee(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Lm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Om(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Om(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Om(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Om(this.root,e,this.comparator,!0)}}]),e}(),Om=function(){function e(t,n,r,i){X(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ee(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Lm=function(){function e(t,n,r,i,a){X(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ee(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Kd();if(this.right.isRed())throw Kd();var e=this.left.check();if(e!==this.right.check())throw Kd();return e+(this.isRed()?0:1)}}]),e}();Lm.EMPTY=null,Lm.RED=!0,Lm.BLACK=!1,Lm.EMPTY=new(function(){function e(){X(this,e),this.size=0}return ee(e,[{key:"key",get:function(){throw Kd()}},{key:"value",get:function(){throw Kd()}},{key:"color",get:function(){throw Kd()}},{key:"left",get:function(){throw Kd()}},{key:"right",get:function(){throw Kd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Lm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Mm=function(){function e(t){X(this,e),this.comparator=t,this.data=new Pm(this.comparator)}return ee(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fm=function(){function e(t){X(this,e),this.iter=t}return ee(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Um(e){return e.hasNext()?e.getNext():void 0}var Vm=new Pm(Pp.comparator);function jm(){return Vm}var Bm=new Pm(Pp.comparator);function qm(){return Bm}function zm(){return new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Km=new Pm(Pp.comparator),Wm=new Mm(Pp.comparator);function Gm(){for(var e=Wm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hm=new Mm(up);function Qm(){return Hm}var $m=function(){function e(t,n,r,i,a){X(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ee(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ym.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(fp.min(),r,Qm(),jm(),Gm())}}]),e}(),Ym=function(){function e(t,n,r,i,a){X(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ee(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(wp.EMPTY_BYTE_STRING,n,Gm(),Gm(),Gm())}}]),e}(),Jm=ee((function e(t,n,r,i){X(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Xm=ee((function e(t,n){X(this,e),this.targetId=t,this.$=n})),Zm=ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;X(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ey=function(){function e(){X(this,e),this.B=0,this.L=ry(),this.U=wp.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return ee(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=Gm(),t=Gm(),n=Gm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kd()}})),new Ym(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=ry()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),ty=function(){function e(t){X(this,e),this.nt=t,this.st=new Map,this.it=jm(),this.rt=ny(),this.ot=new Mm(up)}return ee(e,[{key:"ut",value:function(e){var t,n=te(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=te(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Kd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(vv(i))if(0===n){var a=new Pp(i.path);this.ct(t,a,tv.newNoDocument(a,fp.min()))}else Wd(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&vv(a.target)){var o=new Pp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,tv.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Gm();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new $m(e,n,this.ot,this.it,r);return this.it=jm(),this.rt=ny(),this.ot=new Mm(up),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new ey,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Mm(up),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||jd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new ey),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function ny(){return new Pm(Pp.comparator)}function ry(){return new Pm(Pp.comparator)}var iy={asc:"ASCENDING",desc:"DESCENDING"},ay={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oy=ee((function e(t,n){X(this,e),this.databaseId=t,this.N=n}));function uy(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sy(e,t){return e.N?t.toBase64():t.toUint8Array()}function cy(e,t){return uy(e,t.toTimestamp())}function ly(e){return Wd(!!e),fp.fromTimestamp(function(e){var t=xp(e);return new lp(t.seconds,t.nanos)}(e))}function fy(e,t){return function(e){return new mp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function hy(e){var t=mp.fromString(e);return Wd(Ly(t)),t}function dy(e,t){return fy(e.databaseId,t.path)}function py(e,t){var n=hy(t);if(n.get(1)!==e.databaseId.projectId)throw new Qd(Hd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qd(Hd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pp(gy(n))}function vy(e,t){return fy(e.databaseId,t)}function my(e){var t=hy(e);return 4===t.length?mp.emptyPath():gy(t)}function yy(e){return new mp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gy(e){return Wd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ky(e,t,n){return{name:dy(e,t),fields:n.value.mapValue.fields}}function wy(e,t,n){var r=py(e,t.name),i=ly(t.updateTime),a=new Zp({mapValue:{fields:t.fields}}),o=tv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function by(e,t){return"found"in t?function(e,t){Wd(!!t.found),t.found.name,t.found.updateTime;var n=py(e,t.found.name),r=ly(t.found.updateTime),i=new Zp({mapValue:{fields:t.found.fields}});return tv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Wd(!!t.missing),Wd(!!t.readTime);var n=py(e,t.missing),r=ly(t.readTime);return tv.newNoDocument(n,r)}(e,t):Kd()}function xy(e,t){var n;if(t instanceof wm)n={update:ky(e,t.key,t.value)};else if(t instanceof Tm)n={delete:dy(e,t.key)};else if(t instanceof bm)n={update:ky(e,t.key,t.data),updateMask:Oy(t.fieldMask)};else{if(!(t instanceof Cm))return Kd();n={verify:dy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof nm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof am)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof um)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Kd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:cy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kd()}(e,t.precondition)),n}function _y(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?hm.updateTime(ly(e.updateTime)):void 0!==e.exists?hm.exists(e.exists):hm.none()}(t.currentDocument):hm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Wd("REQUEST_TIME"===t.setToServerValue),n=new nm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new rm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new am(i)}else"increment"in t?n=new um(e,t.increment):Kd();var a=gp.fromServerFormat(t.fieldPath);return new lm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=py(e,t.update.name),a=new Zp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new kp(t.map((function(e){return gp.fromServerFormat(e)})))}(t.updateMask);return new bm(i,a,o,n,r)}return new wm(i,a,n,r)}if(t.delete){var u=py(e,t.delete);return new Tm(u,n)}if(t.verify){var s=py(e,t.verify);return new Cm(s,n)}return Kd()}function Iy(e,t){return{documents:[vy(e,t.path)]}}function Ey(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=vy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Hp(e.value))return{unaryFilter:{field:Ay(e.field),op:"IS_NAN"}};if(Gp(e.value))return{unaryFilter:{field:Ay(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hp(e.value))return{unaryFilter:{field:Ay(e.field),op:"IS_NOT_NAN"}};if(Gp(e.value))return{unaryFilter:{field:Ay(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ay(e.field),op:Ny(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ay(e.field),direction:Cy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Ap(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Sy(e){var t=my(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Ty(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Tv(Dy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ap(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Sv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Sv(n,t)}(n.endAt)),Rv(t,i,u,o,s,"F",c,l)}function Ty(e){return e?void 0!==e.unaryFilter?[Py(e)]:void 0!==e.fieldFilter?[Ry(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ty(e)})).reduce((function(e,t){return e.concat(t)})):Kd():[]}function Cy(e){return iy[e]}function Ny(e){return ay[e]}function Ay(e){return{fieldPath:e.canonicalString()}}function Dy(e){return gp.fromServerFormat(e.fieldPath)}function Ry(e){return yv.create(Dy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kd()}}(e.fieldFilter.op),e.fieldFilter.value)}function Py(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Dy(e.unaryFilter.field);return yv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Dy(e.unaryFilter.field);return yv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Dy(e.unaryFilter.field);return yv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Dy(e.unaryFilter.field);return yv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kd()}}function Oy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ly(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function My(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Uy(t)),t=Fy(e.get(n),t);return Uy(t)}function Fy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Uy(e){return e+"\x01\x01"}function Vy(e){var t=e.length;if(Wd(t>=2),2===t)return Wd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),mp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Kd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Kd()}a=o+2}return new mp(r)}var jy=["userId","batchId"];function By(e,t){return[e,My(t)]}function qy(e,t,n){return[e,My(t),n]}var zy={},Ky=["prefixPath","collectionGroup","readTime","documentId"],Wy=["prefixPath","collectionGroup","documentId"],Gy=["collectionGroup","readTime","prefixPath","documentId"],Hy=["canonicalId","targetId"],Qy=["targetId","path"],$y=["path","targetId"],Yy=["collectionId","parent"],Jy=["indexId","uid"],Xy=["uid","sequenceNumber"],Zy=["indexId","uid","arrayValue","directionalValue","documentKey"],eg=["indexId","uid","documentKey"],tg=["userId","collectionPath","documentId"],ng=["userId","collectionPath","largestBatchId"],rg=["userId","collectionGroup","largestBatchId"],ig=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ag=[].concat(Qe(ig),["documentOverlays"]),og=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ug=[].concat(og,["indexConfiguration","indexState","indexEntries"]),sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cg=function(){function e(){X(this,e),this.onCommittedListeners=[]}return ee(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),lg=function(){function e(t){var n=this;X(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ee(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Kd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=te(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),fg=function(){function e(t,n){var r=this;X(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new $d,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new pg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=kg(e.target.error);r.At.reject(new pg(t,n))}}return ee(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(jd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new pg(n,t)}}}]),e}(),hg=function(){function e(t,n,r){X(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(be())&&Bd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ee(e,[{key:"Nt",value:function(){var e=Ye(de().mark((function e(t){var n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new pg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Qd(Hd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Qd(Hd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new pg(t,n))},i.onupgradeneeded=function(e){jd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){jd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ye(de().mark((function e(t,n,r,i){var a,o,u,s,c=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(de().mark((function e(){var n,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=fg.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),lg.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,jd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jd("SimpleDb","Removing database:",e),yg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Te())return!1;if(e.St())return!0;var t=be(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),dg=function(){function e(t){X(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return ee(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return yg(this.Ft.delete())}}]),e}(),pg=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,Hd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ee(n)}(Qd);function vg(e){return"IndexedDbTransactionError"===e.name}var mg=function(){function e(t){X(this,e),this.store=t}return ee(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),yg(n)}},{key:"add",value:function(e){return jd("SimpleDb","ADD",this.store.name,e,e),yg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return yg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jd("SimpleDb","DELETE",this.store.name,e),yg(this.store.delete(e))}},{key:"count",value:function(){return jd("SimpleDb","COUNT",this.store.name),yg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new lg((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new lg((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){jd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new lg((function(n,r){t.onerror=function(e){var t=kg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new lg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new dg(i),o=t(i.primaryKey,i.value,a);if(o instanceof lg){var u=o.catch((function(e){return a.done(),lg.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return lg.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function yg(e){return new lg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=kg(e.target.error);n(t)}}))}var gg=!1;function kg(e){var t=hg.Vt(be());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Qd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gg||(gg=!0,setTimeout((function(){throw r}),0)),r}}return e}var wg=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return ee(n)}(cg);function bg(e,t){var n=Gd(e);return hg.xt(n.Ht,t)}var xg=function(){function e(t,n,r,i){X(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ee(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&vm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=te(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&mm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=te(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&mm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(fp.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Gm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&sp(this.mutations,e.mutations,(function(e,t){return gm(e,t)}))&&sp(this.baseMutations,e.baseMutations,(function(e,t){return gm(e,t)}))}}]),e}(),_g=function(){function e(t,n,r,i){X(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ee(e,null,[{key:"from",value:function(t,n,r){Wd(t.mutations.length===r.length);for(var i=Km,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ig=function(){function e(t,n){X(this,e),this.largestBatchId=t,this.mutation=n}return ee(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Eg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wp.EMPTY_BYTE_STRING;X(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ee(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Sg=ee((function e(t){X(this,e),this.Jt=t}));function Tg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:dy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:uy(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ng(t.version)};else{if(!t.isUnknownDocument())return Kd();r.unknownDocument={path:n.path.toArray(),version:Ng(t.version)}}return r}function Cg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ng(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ag(e){var t=new lp(e.seconds,e.nanoseconds);return fp.fromTimestamp(t)}function Dg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return _y(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return _y(e.Jt,t)})),u=lp.fromMillis(t.localWriteTimeMs);return new xg(t.batchId,u,n,o)}function Rg(e){var t,n,r=Ag(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ag(e.lastLimboFreeSnapshotVersion):fp.min();return void 0!==e.query.documents?(Wd(1===(n=e.query).documents.length),t=jv(Pv(my(n.documents[0])))):t=function(e){return jv(Sy(e))}(e.query),new Eg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,wp.fromBase64String(e.resumeToken))}function Pg(e,t){var n,r=Ng(t.snapshotVersion),i=Ng(t.lastLimboFreeSnapshotVersion);n=vv(t.target)?Iy(e.Jt,t.target):Ey(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:dv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Og(e){var t=Sy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bv(t,t.limit,"L"):t}function Lg(e,t){return new Ig(t.largestBatchId,_y(e.Jt,t.overlayMutation))}function Mg(e,t){var n=t.path.lastSegment();return[e,My(t.path.popLast()),n]}var Fg=function(){function e(){X(this,e)}return ee(e,[{key:"getBundleMetadata",value:function(e,t){return Ug(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ag(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ug(e).put({bundleId:(n=t).id,createTime:Ng(ly(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Vg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Og(t.bundledQuery),readTime:Ag(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Vg(e).put(function(e){return{name:e.name,readTime:Ng(ly(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ug(e){return bg(e,"bundles")}function Vg(e){return bg(e,"namedQueries")}var jg=function(){function e(t,n){X(this,e),this.M=t,this.userId=n}return ee(e,[{key:"getOverlay",value:function(e,t){var n=this;return Bg(e).get(Mg(this.userId,t)).next((function(e){return e?Lg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ig(t,a);i.push(r.Xt(e,o))})),lg.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(My(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Bg(e).Qt("collectionPathOverlayIndex",i))})),lg.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=zm(),a=My(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Bg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Lg(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=zm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Lg(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Bg(e).put(function(e,t,n){var r=c(Mg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:xy(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Bg(e){return bg(e,"documentOverlays")}var qg=function(){function e(){X(this,e)}return ee(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(_p(e.integerValue));else if("doubleValue"in e){var n=_p(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Dp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ip(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Yp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Kd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Pp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function zg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Kg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=zg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}qg.fe=new qg;var Wg=function(){function e(){X(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ee(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Kg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Kg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Gg=function(){function e(t){X(this,e),this.De=t}return ee(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Hg=function(){function e(t){X(this,e),this.De=t}return ee(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Qg=function(){function e(){X(this,e),this.De=new Wg,this.Ce=new Gg(this.De),this.xe=new Hg(this.De)}return ee(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),$g=function(){function e(t,n,r,i){X(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ee(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Yg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Jg(e.arrayValue,t.arrayValue))?n:0!==(n=Jg(e.directionalValue,t.directionalValue))?n:Pp.comparator(e.documentKey,t.documentKey)}function Jg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Xg=function(){function e(t){X(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=te(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ee(e,[{key:"$e",value:function(e){var t=rv(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=iv(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=te(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Zg=function(){function e(){X(this,e),this.qe=new ek}return ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),lg.resolve()}},{key:"getCollectionParents",value:function(e,t){return lg.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return lg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return lg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return lg.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return lg.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return lg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return lg.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return lg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return lg.resolve()}}]),e}(),ek=function(){function e(){X(this,e),this.index={}}return ee(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mm(mp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Mm(mp.comparator)).toArray()}}]),e}(),tk=new Uint8Array(0),nk=function(){function e(t){X(this,e),this.user=t,this.Ge=new ek,this.Ke=new Rm((function(e){return dv(e)}),(function(e,t){return pv(e,t)})),this.uid=t.uid||""}return ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:My(i)};return rk(e).put(a)}return lg.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[cp(t),""],!1,!0);return rk(e).qt(r).next((function(e){var r,i=te(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Vy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=ak(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ak(e),r=ok(e),i=ik(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ik(e),i=!0,a=new Map;return lg.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Gm();return lg.forEach(a,(function(i,a){var o;jd("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(dv(t)));var u=function(e,t){var n=rv(t);if(void 0===n)return null;var r,i=te(mv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=te(iv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=te(mv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=te(iv(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=te(mv(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?Lp:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?zp(Np.empty(),Pp.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Kd();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=Lp}Jp(c,d)===d&&(c=d,l=p)}}catch(y){f.e(y)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var m=e.startAt.position[v];Jp(c,m)===m&&(c=m,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Sv(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=te(iv(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=te(mv(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?zp(Np.empty(),Pp.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Op:Kd(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=Op}Xp(c,d)===d&&(c=d,l=p)}}catch(y){f.e(y)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var m=e.endAt.position[v];Xp(c,m)===m&&(c=m,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Sv(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return lg.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Pp(Vy(t.documentKey)))}))}))}))})).next((function(){return e}))}return lg.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):tk,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Qe(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new $g(e,Pp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new $g(e,Pp.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new $g(e,Pp.empty(),tk,tk)}},{key:"getFieldIndex",value:function(e,t){var n=new Xg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Qg,i=te(iv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);qg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Qg;return qg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Qg);var i,a=0,o=te(iv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=te(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&Wp(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);qg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=Qe(e),a=[],o=te(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=te(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Qg;f.seed(l.Se()),qg.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof yv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ak(e),i=ok(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return lg.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new ov(t.sequenceNumber,new cv(Ag(t.readTime),new Pp(Vy(t.documentKey)),t.largestBatchId)):ov.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new av(gp.fromServerFormat(n),r)}));return new nv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:up(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ak(e),a=ok(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return lg.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ng(r.readTime),documentKey:My(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return lg.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?lg.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),lg.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?lg.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return ik(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:My(t.key.path)})}},{key:"cn",value:function(e,t,n){return ik(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,My(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=ik(e),i=new Mm(Yg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,My(t.path)])},(function(e,r){i=i.add(new $g(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new Mm(Yg),r=this.Ze(t,e);if(null==r)return n;var i=rv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Wp(a)){var o,u=te(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new $g(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new $g(t.indexId,e.key,tk,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;jd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Um(a),s=Um(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Um(o)):l?(i(u),u=Um(a)):(u=Um(a),s=Um(o))}}(n,r,Yg,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),lg.waitFor(a)}},{key:"sn",value:function(e){var t=1;return ok(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Yg(e,t)})).filter((function(e,t,n){return!t||0!==Yg(e,n[t-1])}));var r=[];r.push(e);var i,a=te(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Yg(o,e),s=Yg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function rk(e){return bg(e,"collectionParents")}function ik(e){return bg(e,"indexEntries")}function ak(e){return bg(e,"indexConfiguration")}function ok(e){return bg(e,"indexState")}var uk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sk=function(){function e(t,n,r){X(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ee(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ck(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Wd(1===u)})));var c,l=[],f=te(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=qy(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return lg.waitFor(a).next((function(){return l}))}function lk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Kd();t=e.noDocument}return JSON.stringify(t).length}sk.DEFAULT_COLLECTION_PERCENTILE=10,sk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sk.DEFAULT=new sk(41943040,sk.DEFAULT_COLLECTION_PERCENTILE,sk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sk.DISABLED=new sk(-1,0,0);var fk=function(){function e(t,n,r,i){X(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return ee(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dk(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=pk(e),o=dk(e);return o.add({}).next((function(u){Wd("number"==typeof u);var s,c=new xg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return xy(e.Jt,t)})),i=n.mutations.map((function(t){return xy(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Mm((function(e,t){return up(e.canonicalString(),t.canonicalString())})),d=te(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=qy(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,zy))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),lg.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return dk(e).get(t).next((function(e){return e?(Wd(e.userId===n.userId),Dg(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?lg.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return dk(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Wd(t.batchId>=r),a=Dg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dk(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dk(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Dg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=By(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return pk(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Vy(l);if(s===n.userId&&t.path.isEqual(h))return dk(e).get(f).next((function(e){if(!e)throw Kd();Wd(e.userId===n.userId),a.push(Dg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mm(up),i=[];return t.forEach((function(t){var a=By(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=pk(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Vy(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),lg.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=By(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Mm(up);return pk(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Vy(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(dk(e).get(t).next((function(e){if(null===e)throw Kd();Wd(e.userId===n.userId),r.push(Dg(n.M,e))})))})),lg.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ck(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),lg.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return lg.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return pk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Vy(e[1]);i.push(a)}else r.done()})).next((function(){Wd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return hk(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return vk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Wd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function hk(e,t,n){var r=By(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return pk(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function dk(e){return bg(e,"mutations")}function pk(e){return bg(e,"documentMutations")}function vk(e){return bg(e,"mutationQueues")}var mk=function(){function e(t){X(this,e),this.wn=t}return ee(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),yk=function(){function e(t,n){X(this,e),this.referenceDelegate=t,this.M=n}return ee(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new mk(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return fp.fromTimestamp(new lp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return gk(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return Wd(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return gk(e).Wt((function(o,u){var s=Rg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return lg.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return gk(e).Wt((function(e,n){var r=Rg(n);t(r)}))}},{key:"yn",value:function(e){return kk(e).get("targetGlobalKey").next((function(e){return Wd(null!==e),e}))}},{key:"pn",value:function(e,t){return kk(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return gk(e).put(Pg(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=dv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Rg(n);pv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=wk(e);return t.forEach((function(t){var o=My(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),lg.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=wk(e);return lg.forEach(t,(function(t){var a=My(t.path);return lg.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=wk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=wk(e),i=Gm();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Vy(e[1]),a=new Pp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=My(t.path),r=IDBKeyRange.bound([n],[cp(n)],!1,!0),i=0;return wk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return gk(e).get(t).next((function(e){return e?Rg(e):null}))}}]),e}();function gk(e){return bg(e,"targets")}function kk(e){return bg(e,"targetGlobal")}function wk(e){return bg(e,"targetDocuments")}function bk(e){return xk.apply(this,arguments)}function xk(){return xk=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Hd.FAILED_PRECONDITION&&t.message===sg){e.next=2;break}throw t;case 2:jd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),xk.apply(this,arguments)}function _k(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=up(r,o);return 0===s?up(i,u):s}var Ik=function(){function e(t){X(this,e),this.En=t,this.buffer=new Mm(_k),this.An=0}return ee(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();_k(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ek=function(){function e(t,n){X(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return ee(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;jd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!vg(n.t0)){n.next=12;break}jd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,bk(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Sk=function(){function e(t,n){X(this,e),this.Sn=t,this.params=n}return ee(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return lg.resolve(ip.A);var r=new Ik(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jd("LruGarbageCollector","Garbage collection skipped; disabled"),lg.resolve(uk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),uk):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Vd()<=tt.DEBUG&&jd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),lg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Tk=function(){function e(t,n){X(this,e),this.db=t,this.garbageCollector=function(e,t){return new Sk(e,t)}(this,n)}return ee(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ck(e,n)}},{key:"removeReference",value:function(e,t,n){return Ck(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ck(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return vk(e).zt((function(r){return hk(e,r,t).next((function(e){return e&&(n=!0),lg.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,fp.min()),wk(e).delete([0,My(o.path)])}))}));i.push(s)}})).next((function(){return lg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ck(e,t)}},{key:"kn",value:function(e,t){var n,r=wk(e),i=ip.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ip.A&&t(new Pp(Vy(n)),i),i=s,n=u):i=ip.A})).next((function(){i!==ip.A&&t(new Pp(Vy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ck(e,t){return wk(e).put(function(e,t){return{targetId:0,path:My(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Nk=function(){function e(){X(this,e),this.changes=new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ee(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,tv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?lg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ak=function(){function e(t){X(this,e),this.M=t}return ee(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Pk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Pk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Cg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=tv.newInvalidDocument(t);return Pk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ok(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:tv.newInvalidDocument(t)};return Pk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ok(t))},(function(e,i){r={document:n.Fn(t,i),size:lk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=jm();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=jm(),i=new Pm(Pp.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,lk(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return lg.resolve();var r=new Mm(Mk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ok(r.first()),Ok(r.last())),a=r.getIterator(),o=a.getNext();return Pk(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Pp.fromSegments([].concat(Qe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Mk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Ok(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Cg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pk(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=jm(),i=te(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(Pp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=jm(),o=Lk(t,n),u=Lk(t,cv.max());return Pk(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(Pp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Dk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Rk(e).get("remoteDocumentGlobalKey").next((function(e){return Wd(!!e),e}))}},{key:"On",value:function(e,t){return Rk(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=wy(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Pp.fromSegments(t.noDocument.path),i=Ag(t.noDocument.readTime);n=tv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Kd();var a=Pp.fromSegments(t.unknownDocument.path),o=Ag(t.unknownDocument.version);n=tv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new lp(e[0],e[1]);return fp.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(fp.min()))return n}return tv.newInvalidDocument(e)}}]),e}(),Dk=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Mm((function(e,t){return up(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Tg(t.qn.M,o);i=i.add(a.path.popLast());var c=lk(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Tg(t.qn.M,o.convertToNoDocument(fp.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),lg.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Nk);function Rk(e){return bg(e,"remoteDocumentGlobal")}function Pk(e){return bg(e,"remoteDocumentsV14")}function Ok(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Lk(e,t){var n=t.documentKey.path.toArray();return[e,Cg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Mk(e,t){var n=e.path.length-t.path.length;return 0!==n?n:Pp.comparator(e,t)}var Fk=function(){function e(t){X(this,e),this.M=t}return ee(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new fg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jy,{unique:!0}),e.createObjectStore("documentMutations")}(e),Uk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=lg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Uk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return lg.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:tg});t.createIndex("collectionPathOverlayIndex",ng,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ky});t.createIndex("documentKeyIndex",Wy),t.createIndex("collectionGroupIndex",Gy)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Jy}).createIndex("sequenceNumberIndex",Xy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Zy}).createIndex("documentKeyIndex",eg,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=lk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return lg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return lg.forEach(r,(function(r){Wd(r.userId===n.userId);var i=Dg(t.M,r);return ck(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new mp(n),o=function(e){return[0,My(e)]}(a);r.push(t.get(o).next((function(n){return n?lg.resolve():function(n){return t.put({targetId:0,path:My(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return lg.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Yy});var n=t.store("collectionParents"),r=new ek,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:My(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new mp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Vy(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Rg(r),a=Pg(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Pp(mp.fromString(i.document.name).popFirst(5)):i.noDocument?Pp.fromSegments(i.noDocument.path):i.unknownDocument?Pp.fromSegments(i.unknownDocument.path):Kd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return lg.waitFor(r)}))}}]),e}();function Uk(e){e.createObjectStore("targetDocuments",{keyPath:Qy}).createIndex("documentTargetsIndex",$y,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hy,{unique:!0}),e.createObjectStore("targetGlobal")}var Vk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jk=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(X(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=u,this.Yn=c,this.Xn=l,this.Zn=f,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new Qd(Hd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tk(this,i),this.cs=n+"main",this.M=new Sg(s),this.hs=new hg(this.cs,this.Zn,new Fk(this.M)),this.ls=new yk(this.referenceDelegate,this.M),this.fs=function(e){return new Ak(e)}(this.M),this.ds=new Fg,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&Bd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ee(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Qd(Hd.FAILED_PRECONDITION,Vk);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new ip(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=Ye(de().mark((function n(r){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=Ye(de().mark((function t(n){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return qk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(vg(t))return jd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return Bk(e).get("owner").next((function(e){return lg.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return qk(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i,a=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=bg(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return lg.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=te(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?lg.resolve(!0):Bk(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Qd(Hd.FAILED_PRECONDITION,Vk);return!1}}return!(!t.networkEnabled||!t.inForeground)||qk(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ye(de().mark((function e(){var t=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new wg(e,ip.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return qk(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return fk.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new nk(e)}},{key:"getDocumentOverlayCache",value:function(e){return jg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;jd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?ug:13===i?og:12===i?ag:11===i?ig:void Kd();return this.hs.runTransaction(e,o,u,(function(i){return a=new wg(i,r.ts?r.ts.next():ip.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw Bd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new Qd(Hd.FAILED_PRECONDITION,sg);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return Bk(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Qd(Hd.FAILED_PRECONDITION,Vk)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bk(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=Bk(e);return n.get("owner").next((function(e){return t.bs(e)?(jd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lg.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Bd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return jd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Bd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(Lc){Bd("Failed to set zombie client id.",Lc)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(Lc){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return hg.vt()}}]),e}();function Bk(e){return bg(e,"owner")}function qk(e){return bg(e,"clientMetadata")}function zk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Kk=function(){function e(t,n,r){X(this,e),this.fs=t,this.$s=n,this.indexManager=r}return ee(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=te(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=te(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):Uv(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Pp(t)).next((function(e){var t=qm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=qm();return this.indexManager.getCollectionParents(e,i).next((function(o){return lg.forEach(o,(function(o){var u=function(e,t){return new Dv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=te(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=tv.newInvalidDocument(s),r=r.insert(s,c)),mm(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Wv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Wk=function(){function e(t,n,r,i){X(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return ee(e,null,[{key:"Js",value:function(t,n){var r,i=Gm(),a=Gm(),o=te(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Gk=function(){function e(){X(this,e)}return ee(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(fp.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(Ov(t)||Lv(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Vd()<=tt.DEBUG&&jd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Kv(t)),i.Xs.Ks(e,t,uv(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new Mm(Hv(e));return t.forEach((function(t,r){Wv(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Vd()<=tt.DEBUG&&jd("QueryEngine","Using full collection scan to execute query:",Kv(t)),this.Xs.Ks(e,t,cv.min())}}]),e}(),Hk=function(){function e(t,n,r,i){X(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Pm(up),this.ii=new Rm((function(e){return dv(e)}),pv),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return ee(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Kk(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function Qk(e,t,n,r){return new Hk(e,t,n,r)}function $k(e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Gm(),s=te(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=te(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=te(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=te(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Jk(e,t){var n=Gd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=lg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Wd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function Xk(e){var t=Gd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function Zk(e,t){var n=Gd(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(wp.EMPTY_BYTE_STRING,fp.min()).withLastLimboFreeSnapshotVersion(fp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=jm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ew(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(fp.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return lg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function ew(e,t,n){var r=Gm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=jm();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(fp.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):jd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function tw(e,t){var n=Gd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function nw(e,t){var n=Gd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,lg.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Eg(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function rw(e,t,n){return iw.apply(this,arguments)}function iw(){return iw=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),vg(e.t1)){e.next=12;break}throw e.t1;case 12:jd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),iw.apply(this,arguments)}function aw(e,t,n){var r=Gd(e),i=fp.min(),a=Gm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gd(e),i=r.ii.get(n);return void 0!==i?lg.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,jv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:fp.min(),n?a:Gm())})).next((function(e){return sw(r,Gv(t),e),{documents:e,hi:a}}))}))}function ow(e,t){var n=Gd(e),r=Gd(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function uw(e,t){var n=Gd(e),r=n.ri.get(t)||fp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,uv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return sw(n,t,e),e}))}function sw(e,t,n){var r=fp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function cw(e,t,n,r){return lw.apply(this,arguments)}function lw(){return lw=Ye(de().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gd(t),o=Gm(),u=jm(),s=te(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,nw(a,function(e){return jv(Pv(mp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ew(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ls.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e,t){return hw.apply(this,arguments)}function hw(){return hw=Ye(de().mark((function e(t,n){var r,i,a,o=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Gm(),e.next=3,nw(t,jv(Og(n.bundledQuery)));case 3:return i=e.sent,a=Gd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ly(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(wp.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}var dw=function(){function e(t){X(this,e),this.M=t,this._i=new Map,this.wi=new Map}return ee(e,[{key:"getBundleMetadata",value:function(e,t){return lg.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:ly(n.createTime)}),lg.resolve()}},{key:"getNamedQuery",value:function(e,t){return lg.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Og(e.bundledQuery),readTime:ly(e.readTime)}}(t)),lg.resolve()}}]),e}(),pw=function(){function e(){X(this,e),this.overlays=new Pm(Pp.comparator),this.mi=new Map}return ee(e,[{key:"getOverlay",value:function(e,t){return lg.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),lg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),lg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=zm(),i=t.length+1,a=new Pp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return lg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Pm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=zm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=zm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return lg.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ig(t,n));var a=this.mi.get(t);void 0===a&&(a=Gm(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),vw=function(){function e(){X(this,e),this.gi=new Mm(mw.yi),this.pi=new Mm(mw.Ii)}return ee(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new mw(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new mw(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Pp(new mp([])),r=new mw(n,e),i=new mw(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Pp(new mp([])),n=new mw(t,e),r=new mw(t,e+1),i=Gm();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new mw(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),mw=function(){function e(t,n){X(this,e),this.key=t,this.Vi=n}return ee(e,null,[{key:"yi",value:function(e,t){return Pp.comparator(e.key,t.key)||up(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return up(e.Vi,t.Vi)||Pp.comparator(e.key,t.key)}}]),e}(),yw=function(){function e(t,n){X(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new Mm(mw.yi)}return ee(e,[{key:"checkEmpty",value:function(e){return lg.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new xg(i,t,n,r);this.$s.push(a);var o,u=te(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new mw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return lg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return lg.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return lg.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return lg.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return lg.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new mw(t,0),i=new mw(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),lg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mm(up);return t.forEach((function(e){var t=new mw(e,0),i=new mw(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),lg.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Pp.isDocumentKey(i)||(i=i.child(""));var a=new mw(new Pp(i),0),o=new Mm(up);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),lg.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Wd(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return lg.forEach(t.mutations,(function(i){var a=new mw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new mw(t,0),r=this.Si.firstAfterOrEqual(n);return lg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,lg.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),gw=function(){function e(t){X(this,e),this.ki=t,this.docs=new Pm(Pp.comparator),this.size=0}return ee(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return lg.resolve(n?n.document.mutableCopy():tv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():tv.newInvalidDocument(e))})),lg.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=jm(),i=new Pp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||lv(sv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return lg.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Kd()}},{key:"Mi",value:function(e,t){return lg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new kw(this)}},{key:"getSize",value:function(e){return lg.resolve(this.size)}}]),e}(),kw=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).qn=e,r}return ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),lg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(Nk),ww=function(){function e(t){X(this,e),this.persistence=t,this.Oi=new Rm((function(e){return dv(e)}),pv),this.lastRemoteSnapshotVersion=fp.min(),this.highestTargetId=0,this.Fi=0,this.$i=new vw,this.targetCount=0,this.Bi=mk.mn()}return ee(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),lg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return lg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return lg.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),lg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),lg.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new mk(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,lg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),lg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,lg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),lg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return lg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return lg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),lg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),lg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),lg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return lg.resolve(n)}},{key:"containsKey",value:function(e,t){return lg.resolve(this.$i.containsKey(t))}}]),e}(),bw=function(){function e(t,n){var r=this;X(this,e),this.Li={},this.overlays={},this.ts=new ip(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new ww(this),this.indexManager=new Zg,this.fs=new gw((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Sg(n),this.ds=new dw(this.M)}return ee(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new pw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new yw(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;jd("MemoryPersistence","Starting transaction:",e);var i=new xw(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return lg.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),xw=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ee(n)}(cg),_w=function(){function e(t){X(this,e),this.persistence=t,this.Qi=new vw,this.ji=null}return ee(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw Kd()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),lg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),lg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),lg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lg.forEach(this.zi,(function(r){var i=Pp.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,fp.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return lg.or([function(){return lg.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function Iw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ew(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Sw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Tw=function(){function e(t,n,r,i){X(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ee(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Qd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Bd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Cw=function(){function e(t,n,r){X(this,e),this.targetId=t,this.state=n,this.error=r}return ee(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Qd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Bd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Nw=function(){function e(t,n){X(this,e),this.clientId=t,this.activeTargetIds=n}return ee(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Qm(),o=0;i&&o<r.activeTargetIds.length;++o)i=Rp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Bd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Aw=function(){function e(t,n){X(this,e),this.clientId=t,this.onlineState=n}return ee(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Bd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Dw=function(){function e(){X(this,e),this.activeTargetIds=Qm()}return ee(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Rw=function(){function e(t,n,r,i,a){X(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Pm(up),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Iw(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Dw),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ee(e,[{key:"start",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=te(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Iw(this.persistenceKey,i)))&&(o=Nw.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=te(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Sw(this.persistenceKey,e));if(n){var r=Cw.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Sw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Bd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(Ye(de().mark((function e(){var r,i,a,o,u,s,c;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=ip.A;if(null!=e)try{var n=JSON.parse(e);Wd("number"==typeof n),t=n}catch(e){Bd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ip.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Tw(this.currentUser,e,t,n),i=Ew(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Ew(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Sw(this.persistenceKey,e),i=new Cw(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Nw.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Tw.Ji(new Md(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Cw.Ji(r,t)}},{key:"wr",value:function(e){return Aw.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:jd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Qm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Pw=function(){function e(){X(this,e),this.Fr=new Dw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ee(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Dw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ow=function(){function e(){X(this,e)}return ee(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Lw=function(){function e(){var t=this;X(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return ee(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){jd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=te(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){jd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=te(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Mw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fw=function(){function e(t){X(this,e),this.jr=t.jr,this.Wr=t.Wr}return ee(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Uw=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ee(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Od;o.listenOnce(Nd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Cd.NO_ERROR:var t=o.getResponseJson();jd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Cd.TIMEOUT:jd("Connection",'RPC "'+e+'" timed out'),a(new Qd(Hd.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:var n=o.getStatus();if(jd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hd).indexOf(t)>=0?t:Hd.UNKNOWN}(r.status);a(new Qd(u,r.message))}else a(new Qd(Hd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Qd(Hd.UNAVAILABLE,"Connection failed."));break;default:Kd()}}finally{jd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Sd(),a=Td(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Rd({})),this.uo(o.initMessageHeaders,t,n),xe()||Ee()||be().indexOf("Electron/")>=0||Se()||be().indexOf("MSAppHost/")>=0||Ie()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");jd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Fw({jr:function(e){l?jd("Connection","Not sending because WebChannel is closed:",e):(c||(jd("Connection","Opening WebChannel transport."),s.open(),c=!0),jd("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Pd.EventType.OPEN,(function(){l||jd("Connection","WebChannel transport opened.")})),h(s,Pd.EventType.CLOSE,(function(){l||(l=!0,jd("Connection","WebChannel transport closed"),f.eo())})),h(s,Pd.EventType.ERROR,(function(e){l||(l=!0,qd("Connection","WebChannel transport errored:",e),f.eo(new Qd(Hd.UNAVAILABLE,"The operation could not be completed")))})),h(s,Pd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Wd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){jd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Em[e];if(void 0!==t)return Dm(t)}(a),u=i.message;void 0===o&&(o=Hd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Qd(o,u)),s.close()}else jd("Connection","WebChannel received:",n),f.no(n)}})),h(a,Ad.STAT_EVENT,(function(e){e.stat===Dd.PROXY?jd("Connection","Detected buffering proxy"):e.stat===Dd.NOPROXY&&jd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){X(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ee(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);jd("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return jd("RestConnection","Received: ",e),e}),(function(t){throw qd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Mw[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Vw(){return"undefined"!=typeof window?window:null}function jw(){return"undefined"!=typeof document?document:null}function Bw(e){return new oy(e,!0)}var qw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;X(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ee(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&jd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),zw=function(){function e(t,n,r,i,a,o,u,s){X(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new qw(t,n)}return ee(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Hd.RESOURCE_EXHAUSTED?(Bd(n.toString()),Bd("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Hd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Qd(Hd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return jd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(jd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Kw=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return X(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return ee(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Wd(void 0===t||"string"==typeof t),wp.fromBase64String(t||"")):(Wd(void 0===t||t instanceof Uint8Array),wp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Hd.UNKNOWN:Dm(e.code);return new Qd(t,e.message||"")}(o);n=new Zm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=py(e,s.document.name),l=ly(s.document.updateTime),f=new Zp({mapValue:{fields:s.document.fields}}),h=tv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Jm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=py(e,v.document),y=v.readTime?ly(v.readTime):fp.min(),g=tv.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Jm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=py(e,w.document),x=w.removedTargetIds||[];n=new Jm([],x,b,null)}else{if(!("filter"in t))return Kd();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new Nm(I),S=_.targetId;n=new Xm(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return fp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?fp.min():t.readTime?ly(t.readTime):fp.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=yy(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=vv(r)?{documents:Iy(e,r)}:{query:Ey(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=sy(e,t.resumeToken):t.snapshotVersion.compareTo(fp.min())>0&&(n.readTime=uy(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=yy(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(zw),Ww=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return X(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Wo=!1,s}return ee(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,un(ae(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Wd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Wd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ly(e.updateTime):ly(t);return n.isEqual(fp.min())&&(n=ly(t)),new fm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ly(e.commitTime);return this.listener.Jo(n,t)}return Wd(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=yy(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return xy(t.M,e)}))};this.Oo(n)}}]),n}(zw),Gw=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a){var o;return X(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return ee(n,[{key:"tu",value:function(){if(this.Zo)throw new Qd(Hd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Hd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Qd(Hd.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Hd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Qd(Hd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ee((function e(){X(this,e)}))}()),Hw=function(){function e(t,n){X(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ee(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Bd(t),this.su=!1):jd("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Qw=ee((function e(t,n,r,i,a){var o=this;X(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ab(o),!e.t0){e.next=5;break}return jd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).lu.add(4),e.next=4,Jw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,$w(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Hw(r,i)}));function $w(e){return Yw.apply(this,arguments)}function Yw(){return Yw=Ye(de().mark((function e(t){var n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ab(t)){e.next=18;break}n=te(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Yw.apply(this,arguments)}function Jw(e){return Xw.apply(this,arguments)}function Xw(){return Xw=Ye(de().mark((function e(t){var n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=te(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Xw.apply(this,arguments)}function Zw(e,t){var n=Gd(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),ib(n)?rb(n):Ob(n).Co()&&tb(n,t))}function eb(e,t){var n=Gd(e),r=Ob(n);n.hu.delete(t),r.Co()&&nb(n,t),0===n.hu.size&&(r.Co()?r.ko():ab(n)&&n._u.set("Unknown"))}function tb(e,t){e.wu.Z(t.targetId),Ob(e).Qo(t)}function nb(e,t){e.wu.Z(t),Ob(e).jo(t)}function rb(e){e.wu=new ty({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),Ob(e).start(),e._u.iu()}function ib(e){return ab(e)&&!Ob(e).Do()&&e.hu.size>0}function ab(e){return 0===Gd(e).lu.size}function ob(e){e.wu=void 0}function ub(e){return sb.apply(this,arguments)}function sb(){return sb=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){tb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e,t){return lb.apply(this,arguments)}function lb(){return lb=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ob(t),ib(t)?(t._u.uu(n),rb(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function fb(e,t,n){return hb.apply(this,arguments)}function hb(){return hb=Ye(de().mark((function e(t,n,r){var i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Zm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=te(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,db(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Jm?t.wu.ut(n):n instanceof Xm?t.wu._t(n):t.wu.ht(n),r.isEqual(fp.min())){e.next=29;break}return e.prev=14,e.next=17,Xk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(wp.EMPTY_BYTE_STRING,n.snapshotVersion)),nb(e,t);var r=new Eg(n.target,t,1,n.sequenceNumber);tb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,db(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),hb.apply(this,arguments)}function db(e,t,n){return pb.apply(this,arguments)}function pb(){return pb=Ye(de().mark((function e(t,n,r){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vg(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Jw(t);case 5:t._u.set("Offline"),r||(r=function(){return Xk(t.localStore)}),t.asyncQueue.enqueueRetryable(Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,$w(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t){return t().catch((function(n){return db(e,n,t)}))}function mb(e){return yb.apply(this,arguments)}function yb(){return yb=Ye(de().mark((function e(t){var n,r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gd(t),r=Lb(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!gb(n)){e.next=19;break}return e.prev=3,e.next=6,tw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,kb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,db(n,e.t0);case 17:e.next=2;break;case 19:wb(n)&&bb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),yb.apply(this,arguments)}function gb(e){return ab(e)&&e.cu.length<10}function kb(e,t){e.cu.push(t);var n=Lb(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function wb(e){return ab(e)&&!Lb(e).Do()&&e.cu.length>0}function bb(e){Lb(e).start()}function xb(e){return _b.apply(this,arguments)}function _b(){return _b=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lb(t).Xo();case 1:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Ib(e){return Eb.apply(this,arguments)}function Eb(){return Eb=Ye(de().mark((function e(t){var n,r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Lb(t),r=te(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=_g.from(i,n,r),e.next=3,vb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,mb(t);case 5:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Cb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=Ye(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Lb(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Am(i=n.code)||i===Hd.ABORTED){e.next=7;break}return r=t.cu.shift(),Lb(t).No(),e.next=5,vb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,mb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:wb(t)&&bb(t);case 5:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Ab(e,t){return Db.apply(this,arguments)}function Db(){return Db=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gd(t)).asyncQueue.verifyOperationInProgress(),jd("RemoteStore","RemoteStore received new credentials"),i=ab(r),r.lu.add(3),e.next=6,Jw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,$w(r);case 12:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Rb(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,$w(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Jw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Ob(e){return e.mu||(e.mu=function(e,t,n){var r=Gd(e);return r.tu(),new Kw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:ub.bind(null,e),Jr:cb.bind(null,e),Ko:fb.bind(null,e)}),e.fu.push(function(){var t=Ye(de().mark((function t(n){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),ib(e)?rb(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:ob(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Lb(e){return e.gu||(e.gu=function(e,t,n){var r=Gd(e);return r.tu(),new Ww(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:xb.bind(null,e),Jr:Cb.bind(null,e),Yo:Ib.bind(null,e),Jo:Sb.bind(null,e)}),e.fu.push(function(){var t=Ye(de().mark((function t(n){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,mb(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(jd("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Mb=function(){function e(t,n,r,i,a){X(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new $d,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ee(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qd(Hd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Fb(e,t){if(Bd("AsyncQueue","".concat(t,": ").concat(e)),vg(e))return new Qd(Hd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ub=function(){function e(t){X(this,e),this.comparator=t?function(e,n){return t(e,n)||Pp.comparator(e.key,n.key)}:function(e,t){return Pp.comparator(e.key,t.key)},this.keyedMap=qm(),this.sortedSet=new Pm(this.comparator)}return ee(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Vb=function(){function e(){X(this,e),this.yu=new Pm(Pp.comparator)}return ee(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Kd():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),jb=function(){function e(t,n,r,i,a,o,u,s){X(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ee(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Ub.emptySet(n),a,r,i,!0,!1)}}]),e}(),Bb=ee((function e(){X(this,e),this.Iu=void 0,this.listeners=[]})),qb=ee((function e(){X(this,e),this.queries=new Rm((function(e){return zv(e)}),qv),this.onlineState="Unknown",this.Tu=new Set}));function zb(e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=Ye(de().mark((function e(t,n){var r,i,a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Bb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Fb(e.t0,"Initialization of query '".concat(Kv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&$b(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Kb.apply(this,arguments)}function Wb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=Ye(de().mark((function e(t,n){var r,i,a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Hb(e,t){var n,r=Gd(e),i=!1,a=te(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=te(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&$b(r)}function Qb(e,t,n){var r=Gd(e),i=r.queries.get(t);if(i){var a,o=te(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function $b(e){e.Tu.forEach((function(e){e.next()}))}var Yb=function(){function e(t,n,r){X(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ee(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=te(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new jb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=jb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Jb=function(){function e(t,n){X(this,e),this.payload=t,this.byteLength=n}return ee(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Xb=function(){function e(t){X(this,e),this.M=t}return ee(e,[{key:"li",value:function(e){return py(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?wy(this.M,e.document,!1):tv.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return ly(e)}}]),e}(),Zb=function(){function e(t,n,r){X(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ex(t)}return ee(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=mp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Xb(this.M),i=te(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=te(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Gm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cw(this.localStore,new Xb(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=te(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,fw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ex(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var tx=ee((function e(t){X(this,e),this.key=t})),nx=ee((function e(t){X(this,e),this.key=t})),rx=function(){function e(t,n){X(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Gm(),this.mutatedKeys=Gm(),this.Lu=Hv(t),this.Uu=new Ub(this.Lu)}return ee(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new Vb,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Ov(this.query)&&i.size===this.query.limit?i.last():null,c=Lv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Wv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Ov(this.query)||Lv(this.query))for(;o.size>this.query.limit;){var l=Ov(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kd()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new jb(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Vb,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Gm(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new nx(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new tx(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=Gm();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return jb.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),ix=ee((function e(t,n,r){X(this,e),this.query=t,this.targetId=n,this.view=r})),ax=ee((function e(t){X(this,e),this.key=t,this.Xu=!1})),ox=function(){function e(t,n,r,i,a,o){X(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new Rm((function(e){return zv(e)}),qv),this.ea=new Map,this.na=new Set,this.sa=new Pm(Pp.comparator),this.ia=new Map,this.ra=new vw,this.oa={},this.ua=new Map,this.aa=mk.gn(),this.onlineState="Unknown",this.ca=void 0}return ee(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=Ye(de().mark((function e(t,n){var r,i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=e_(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,nw(r.localStore,jv(n));case 8:return u=e.sent,r.isPrimaryClient&&Zw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,cx(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t,n,r){return lx.apply(this,arguments)}function lx(){return lx=Ye(de().mark((function e(t,n,r,i){var a,o,u,s,c,l;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=Ye(de().mark((function e(t,n,r,i){var a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,aw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ax(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,aw(t.localStore,n,!0);case 3:return a=e.sent,o=new rx(n,a.hi),u=o.Gu(a.documents),s=Ym.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Ax(t,r,c.zu),l=new ix(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!qv(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,rw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),eb(r.remoteStore,i.targetId),Cx(r,i.targetId)})).catch(bk);case 9:e.next=14;break;case 11:return Cx(r,i.targetId),e.next=14,rw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t,n){return px.apply(this,arguments)}function px(){return px=Ye(de().mark((function e(t,n,r){var i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t_(t),e.prev=1,e.next=4,function(e,t){var n,r=Gd(e),i=lp.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Gm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=te(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ym(c,n.get(c.key));null!=l&&u.push(new bm(c.key,l,ev(l.value.mapValue),hm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Pm(up)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Px(i,a.changes);case 9:return e.next=11,mb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Fb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),px.apply(this,arguments)}function vx(e,t){return mx.apply(this,arguments)}function mx(){return mx=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,Zk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(Wd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Wd(n.Xu):e.removedDocuments.size>0&&(Wd(n.Xu),n.Xu=!1))})),e.next=8,Px(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,bk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),mx.apply(this,arguments)}function yx(e,t,n){var r=Gd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=te(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&$b(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function gx(e,t,n){return kx.apply(this,arguments)}function kx(){return kx=Ye(de().mark((function e(t,n,r){var i,a,o,u,s,c;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Pm(Pp.comparator)).insert(o,tv.newNoDocument(o,fp.min())),s=Gm().add(o),c=new $m(fp.min(),new Map,new Mm(up),u,s),e.next=9,vx(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),Rx(i),e.next=16;break;case 14:return e.next=16,rw(i.localStore,n,!1).then((function(){return Cx(i,n,r)})).catch(bk);case 16:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e,t){return bx.apply(this,arguments)}function bx(){return bx=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=n.batch.batchId,e.prev=1,e.next=4,Jk(r.localStore,n);case 4:return a=e.sent,Tx(r,i,null),Sx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Px(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,bk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bx.apply(this,arguments)}function xx(e,t,n){return _x.apply(this,arguments)}function _x(){return _x=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gd(t),e.prev=1,e.next=4,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return Wd(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Tx(i,n,r),Sx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Px(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,bk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),_x.apply(this,arguments)}function Ix(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=Ye(de().mark((function e(t,n){var r,i,a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ab((r=Gd(t)).remoteStore)||jd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Fb(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Ex.apply(this,arguments)}function Sx(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function Tx(e,t,n){var r=Gd(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function Cx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=te(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||Nx(e,t)}))}function Nx(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(eb(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Rx(e))}function Ax(e,t,n){var r,i=te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof tx?(e.ra.addReference(a.key,t),Dx(e,a)):a instanceof nx?(jd("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||Nx(e,a.key)):Kd()}}catch(o){i.e(o)}finally{i.f()}}function Dx(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(jd("SyncEngine","New document in limbo: "+n),e.na.add(r),Rx(e))}function Rx(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Pp(mp.fromString(t)),r=e.aa.next();e.ia.set(r,new ax(n)),e.sa=e.sa.insert(n,r),Zw(e.remoteStore,new Eg(jv(Pv(n.path)),r,2,ip.A))}}function Px(e,t,n){return Ox.apply(this,arguments)}function Ox(){return Ox=Ye(de().mark((function e(t,n,r){var i,a,o,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=[],o=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Wk.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=Ye(de().mark((function e(t,n){var r,i,a,o,u,s,c,l;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return lg.forEach(n,(function(t){return lg.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return lg.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),vg(e.t0)){e.next=10;break}throw e.t0;case 10:jd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=te(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gd(t)).currentUser.isEqual(n)){e.next=11;break}return jd("SyncEngine","User change. New user:",n.toKey()),e.next=5,$k(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new Qd(Hd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Px(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t){var n=Gd(e),r=n.ia.get(t);if(r&&r.Xu)return Gm().add(r.key);var i=Gm(),a=n.ea.get(t);if(!a)return i;var o,u=te(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Ux(e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,aw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Ax(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Vx.apply(this,arguments)}function jx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=Ye(de().mark((function e(t,n){var r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.abrupt("return",uw(r.localStore,n).then((function(e){return Px(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}function qx(e,t,n,r){return zx.apply(this,arguments)}function zx(){return zx=Ye(de().mark((function e(t,n,r,i){var a,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gd(t),e.next=3,function(e,t){var n=Gd(e),r=Gd(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):lg.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,mb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Tx(a,n,i||null),Sx(a,n),function(e,t){Gd(Gd(e).$s).dn(t)}(a.localStore,n)):Kd();case 11:return e.next=13,Px(a,o);case 13:e.next=16;break;case 15:jd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}function Kx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=Ye(de().mark((function e(t,n){var r,i,a,o,u,s,c,l;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e_(r=Gd(t)),t_(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Gx(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,Rb(r.remoteStore,!0);case 9:o=te(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Zw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Cx(r,t),rw(r.localStore,t,!0)})),eb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Gx(r,c);case 21:return function(e){var t=Gd(e);t.ia.forEach((function(e,n){eb(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new Pm(Pp.comparator)}(r),r.ca=!1,e.next=25,Rb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Gx(e,t,n){return Hx.apply(this,arguments)}function Hx(){return Hx=Ye(de().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gd(t),a=[],o=[],u=te(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ea.get(c))||0===f.length){e.next=34;break}return e.next=11,nw(i.localStore,jv(f[0]));case 11:l=e.sent,h=te(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ta.get(p),e.next=20,Ux(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ow(i.localStore,c);case 36:return y=e.sent,e.next=39,nw(i.localStore,y);case 39:return l=e.sent,e.next=42,cx(i,Qx(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Hx.apply(this,arguments)}function Qx(e){return Rv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function $x(e){var t=Gd(e);return Gd(Gd(t.localStore).persistence).Os()}function Yx(e,t,n,r){return Jx.apply(this,arguments)}function Jx(){return Jx=Ye(de().mark((function e(t,n,r,i){var a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gd(t)).ca){e.next=3;break}return e.abrupt("return",void jd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,uw(a.localStore,Gv(o[0]));case 10:return u=e.sent,s=$m.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Px(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,rw(a.localStore,n,!0);case 17:return Cx(a,n,i),e.abrupt("break",20);case 19:Kd();case 20:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=Ye(de().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=e_(t)).ca){e.next=45;break}a=te(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return jd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ow(i.localStore,u);case 12:return s=e.sent,e.next=15,nw(i.localStore,s);case 15:return c=e.sent,e.next=18,cx(i,Qx(s),c.targetId,!1);case 18:Zw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=te(r),e.prev=30,h=de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,rw(i.localStore,t,!1).then((function(){eb(i.remoteStore,t),Cx(i,t)})).catch(bk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Zx.apply(this,arguments)}function e_(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gx.bind(null,t),t.Zu.Ko=Hb.bind(null,t.eventManager),t.Zu.la=Qb.bind(null,t.eventManager),t}function t_(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xx.bind(null,t),t}function n_(e,t,n){var r=Gd(e);(function(){var e=Ye(de().mark((function e(t,n,r){var i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gd(e),r=ly(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ex(i)),a=new Zb(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Px(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(qd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var r_=function(){function e(){X(this,e),this.synchronizeTabs=!1}return ee(e,[{key:"initialize",value:function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Bw(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return Qk(this.persistence,new Gk,e.initialUser,this.M)}},{key:"_a",value:function(e){return new bw(_w.Wi,this.M)}},{key:"da",value:function(e){return new Pw}},{key:"terminate",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),i_=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ee(n,[{key:"initialize",value:function(){var e=Ye(de().mark((function e(t){var r=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,t_(this.ga.syncEngine);case 6:return e.next=8,mb(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return Qk(this.persistence,new Gk,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Ek(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sk.withCacheSize(this.cacheSizeBytes):sk.DEFAULT;return new jk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vw(),jw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new Pw}}]),n}(r_),a_=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ee(n,[{key:"initialize",value:function(){var e=Ye(de().mark((function e(t){var r,i=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof Rw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:qx.bind(null,r),Mr:Yx.bind(null,r),Or:Xx.bind(null,r),Os:$x.bind(null,r),Nr:jx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kx(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=Vw();if(!Rw.vt(t))throw new Qd(Hd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(i_),o_=function(){function e(){X(this,e)}return ee(e,[{key:"initialize",value:function(){var e=Ye(de().mark((function e(t,n){var r=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return yx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Lx.bind(null,this.syncEngine),e.next=12,Rb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new qb}},{key:"createDatastore",value:function(e){var t,n=Bw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Uw(t));return function(e,t,n,r){return new Gw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return yx(o.syncEngine,e,0)},a=Lw.vt()?new Lw:new Ow,new Qw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ox(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gd(t),jd("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Jw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function u_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ye(de().mark((function r(){var i;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var s_=function(){function e(t){X(this,e),this.observer=t,this.muted=!1}return ee(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),c_=function(){function e(t,n){var r=this;X(this,e),this.Ia=t,this.M=n,this.metadata=new $d,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ee(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=Ye(de().mark((function e(){var t,n,r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new Jb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=Ye(de().mark((function e(){var t,n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=Ye(de().mark((function e(){var t,n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),l_=function(){function e(t){X(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ee(e,[{key:"lookup",value:function(){var e=Ye(de().mark((function e(t){var n,r=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Qd(Hd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ye(de().mark((function e(t,n){var r,i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=yy(r.M)+"/documents",a={documents:n.map((function(e){return dy(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=by(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Wd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Tm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ye(de().mark((function e(){var t,n=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Pp.fromPath(t);n.mutations.push(new Cm(r,n.precondition(r)))})),e.next=7,function(){var e=Ye(de().mark((function e(t,n){var r,i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=yy(r.M)+"/documents",a={writes:n.map((function(e){return xy(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kd();t=fp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Qd(Hd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hm.updateTime(t):hm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fp.min()))throw new Qd(Hd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hm.updateTime(t)}return hm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),f_=function(){function e(t,n,r,i){X(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new qw(this.asyncQueue,"transaction_retry")}return ee(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(Ye(de().mark((function t(){var n,r;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new l_(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!Ap(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Am(t)}return!1}}]),e}(),h_=function(){function e(t,n,r,i){var a=this;X(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Md.UNAUTHENTICATED,this.clientId=op.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ee(e,[{key:"getConfiguration",value:function(){var e=Ye(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Qd(Hd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new $d;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ye(de().mark((function n(){var r;return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Fb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function d_(e,t){return p_.apply(this,arguments)}function p_(){return p_=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,$k(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),p_.apply(this,arguments)}function v_(e,t){return m_.apply(this,arguments)}function m_(){return m_=Ye(de().mark((function e(t,n){var r,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,y_(t);case 3:return r=e.sent,jd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ab(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ab(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function y_(e){return g_.apply(this,arguments)}function g_(){return g_=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return jd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,d_(t,new r_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e){return w_.apply(this,arguments)}function w_(){return w_=Ye(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return jd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,v_(t,new o_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function b_(e){return y_(e).then((function(e){return e.persistence}))}function x_(e){return y_(e).then((function(e){return e.localStore}))}function __(e){return k_(e).then((function(e){return e.remoteStore}))}function I_(e){return k_(e).then((function(e){return e.syncEngine}))}function E_(e){return S_.apply(this,arguments)}function S_(){return S_=Ye(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ux.bind(null,n.syncEngine),r.onUnlisten=fx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function T_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function i(){return de().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new s_({next:function(a){t.enqueueAndForget((function(){return Wb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Qd(Hd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Qd(Hd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Yb(Pv(n.path),a,{includeMetadataChanges:!0,Du:!0});return zb(e,o)},i.next=3,E_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function C_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function i(){return de().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new s_({next:function(n){t.enqueueAndForget((function(){return Wb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Qd(Hd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Yb(n,a,{includeMetadataChanges:!0,Du:!0});return zb(e,o)},i.next=3,E_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var N_=new Map;function A_(e,t,n){if(!n)throw new Qd(Hd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function D_(e,t,n,r){if(!0===t&&!0===r)throw new Qd(Hd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function R_(e){if(!Pp.isDocumentKey(e))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function P_(e){if(Pp.isDocumentKey(e))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function O_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Kd()}function L_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qd(Hd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=O_(e);throw new Qd(Hd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function M_(e,t){if(t<=0)throw new Qd(Hd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var F_=function(){function e(t){var n;if(X(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Qd(Hd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qd(Hd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,D_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ee(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),U_=function(){function e(t,n,r){X(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F_({}),this._settingsFrozen=!1,t instanceof Np?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qd(Hd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Np(e.options.projectId)}(t))}return ee(e,[{key:"app",get:function(){if(!this._app)throw new Qd(Hd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Qd(Hd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jd;switch(e.type){case"gapi":var t=e.client;return Wd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new tp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Qd(Hd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=N_.get(e);t&&(jd("ComponentProvider","Removing Datastore"),N_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function V_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=L_(e,U_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&qd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Md.MOCK_USER;else{o=we(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Qd(Hd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Md(s)}e._authCredentials=new Xd(new Yd(o,u))}}var j_=function(){function e(t,n,r){X(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ee(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new q_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),B_=function(){function e(t,n,r){X(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ee(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),q_=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this,e,r,Pv(i)))._path=i,a.type="collection",a}return ee(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new j_(this.firestore,null,new Pp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(B_);function z_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Be(e),A_("collection","path",t),e instanceof U_){var a=mp.fromString.apply(mp,[t].concat(r));return P_(a),new q_(e,null,a)}if(!(e instanceof j_||e instanceof q_))throw new Qd(Hd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mp.fromString.apply(mp,[t].concat(r)));return P_(o),new q_(e.firestore,null,o)}function K_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Be(e),1===arguments.length&&(t=op.R()),A_("doc","path",t),e instanceof U_){var a=mp.fromString.apply(mp,[t].concat(r));return R_(a),new j_(e,null,new Pp(a))}if(!(e instanceof j_||e instanceof q_))throw new Qd(Hd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mp.fromString.apply(mp,[t].concat(r)));return R_(o),new j_(e.firestore,e instanceof q_?e.converter:null,new Pp(o))}function W_(e,t){return e=Be(e),t=Be(t),(e instanceof j_||e instanceof q_)&&(t instanceof j_||t instanceof q_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function G_(e,t){return e=Be(e),t=Be(t),e instanceof B_&&t instanceof B_&&e.firestore===t.firestore&&qv(e._query,t._query)&&e.converter===t.converter}var H_=function(){function e(){var t=this;X(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new qw(this,"async_queue_retry"),this.Ua=function(){var e=jw();e&&jd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=jw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return ee(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=jw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new $d;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=Ye(de().mark((function e(){var t=this;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),vg(e.t0)){e.next=12;break}throw e.t0;case 12:jd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=Mb.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&Kd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=Ye(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=te(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=te(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function Q_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=te(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var $_=function(){function e(){X(this,e),this._progressObserver={},this._taskCompletionResolver=new $d,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ee(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Y_=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new H_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ee(n,[{key:"_terminate",value:function(){return this._firestoreClient||X_(this),this._firestoreClient.terminate()}}]),n}(U_);function J_(e){return e._firestoreClient||X_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function X_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Cp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new h_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Z_(e,t,n){var r=new $d;return e.asyncQueue.enqueue(Ye(de().mark((function i(){return de().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d_(e,n);case 3:return i.next=5,v_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Hd.FAILED_PRECONDITION||e.code===Hd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function eI(e){return function(e){return e.asyncQueue.enqueue(Ye(de().mark((function t(){var n,r;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b_(e);case 2:return n=t.sent,t.next=5,__(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gd(e);return t.lu.delete(0),$w(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(J_(e=L_(e,Y_)))}function tI(e){return function(e){return e.asyncQueue.enqueue(Ye(de().mark((function t(){var n,r;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b_(e);case 2:return n=t.sent,t.next=5,__(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).lu.add(0),e.next=4,Jw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(J_(e=L_(e,Y_)))}function nI(e,t){var n=J_(e=L_(e,Y_)),r=new $_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new c_(e,t)}(function(e,t){if(e instanceof Uint8Array)return u_(e,t);if(e instanceof ArrayBuffer)return u_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Bw(t));e.asyncQueue.enqueueAndForget(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n_,t.next=3,I_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function rI(e,t){return function(e,t){return e.asyncQueue.enqueue(Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,x_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(J_(e=L_(e,Y_)),t).then((function(t){return t?new B_(e,null,t.query):null}))}function iI(e){if(e._initialized||e._terminated)throw new Qd(Hd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var aI=function(){function e(){X(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gp(n)}return ee(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var oI=function(){function e(t){X(this,e),this._byteString=t}return ee(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(wp.fromBase64String(t))}catch(t){throw new Qd(Hd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(wp.fromUint8Array(t))}}]),e}(),uI=ee((function e(t){X(this,e),this._methodName=t})),sI=function(){function e(t,n){if(X(this,e),!isFinite(t)||t<-90||t>90)throw new Qd(Hd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qd(Hd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ee(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return up(this._lat,e._lat)||up(this._long,e._long)}}]),e}(),cI=/^__.*__$/,lI=function(){function e(t,n,r){X(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ee(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new bm(e,this.data,this.fieldMask,t,this.fieldTransforms):new wm(e,this.data,t,this.fieldTransforms)}}]),e}(),fI=function(){function e(t,n,r){X(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ee(e,[{key:"toMutation",value:function(e,t){return new bm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function hI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kd()}}var dI=function(){function e(t,n,r,i,a,o){X(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ee(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return PI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(hI(this.Ya)&&cI.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),pI=function(){function e(t,n,r){X(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Bw(t)}return ee(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dI({Ya:e,methodName:t,oc:n,path:gp.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function vI(e){var t=e._freezeSettings(),n=Bw(e._databaseId);return new pI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);NI("Data must be an object, but it was:",o,r);var u,s,c=TI(r,o);if(a.merge)u=new kp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=te(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=AI(t,d,n);if(!o.contains(p))throw new Qd(Hd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));OI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new kp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new lI(new Zp(c),u,s)}var yI=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(uI);function gI(e,t,n){return new dI({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var kI=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"_toFieldTransform",value:function(e){return new lm(e.path,new nm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(uI),wI=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e)).ac=r,i}return ee(n,[{key:"_toFieldTransform",value:function(e){var t=gI(this,e,!0),n=this.ac.map((function(e){return SI(e,t)})),r=new rm(n);return new lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(uI),bI=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e)).ac=r,i}return ee(n,[{key:"_toFieldTransform",value:function(e){var t=gI(this,e,!0),n=this.ac.map((function(e){return SI(e,t)})),r=new am(n);return new lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(uI),xI=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e)).cc=r,i}return ee(n,[{key:"_toFieldTransform",value:function(e){var t=new um(e.M,Jv(e.M,this.cc));return new lm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(uI);function _I(e,t,n,r){var i=e.uc(1,t,n);NI("Data must be an object, but it was:",i,r);var a=[],o=Zp.empty();dp(r,(function(e,r){var u=RI(t,e,n);r=Be(r);var s=i.nc(u);if(r instanceof yI)a.push(u);else{var c=SI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new kp(a);return new fI(o,u,i.fieldTransforms)}function II(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[AI(t,r,n)],s=[i];if(a.length%2!=0)throw new Qd(Hd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(AI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Zp.empty(),h=u.length-1;h>=0;--h)if(!OI(l,u[h])){var d=u[h],p=s[h];p=Be(p);var v=o.nc(d);if(p instanceof yI)l.push(d);else{var m=SI(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new kp(l);return new fI(f,y,o.fieldTransforms)}function EI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return SI(n,e.uc(r?4:3,t))}function SI(e,t){if(CI(e=Be(e)))return NI("Unsupported field value:",t,e),TI(e,t);if(e instanceof uI)return function(e,t){if(!hI(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=te(e);try{for(a.s();!(n=a.n()).done;){var o=SI(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Be(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=lp.fromDate(e);return{timestampValue:uy(t.M,n)}}if(e instanceof lp){var r=new lp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:uy(t.M,r)}}if(e instanceof sI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oI)return{bytesValue:sy(t.M,e._byteString)};if(e instanceof j_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:fy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(O_(e)))}(e,t)}function TI(e,t){var n={};return pp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dp(e,(function(e,r){var i=SI(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function CI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lp||e instanceof sI||e instanceof oI||e instanceof j_||e instanceof uI)}function NI(e,t,n){if(!CI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=O_(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function AI(e,t,n){if((t=Be(t))instanceof aI)return t._internalPath;if("string"==typeof t)return RI(e,t);throw PI("Field path arguments must be of type string or ",e,!1,void 0,n)}var DI=new RegExp("[~\\*/\\[\\]]");function RI(e,t,n){if(t.search(DI)>=0)throw PI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return le(aI,Qe(t.split(".")))._internalPath}catch(r){throw PI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function PI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Qd(Hd.INVALID_ARGUMENT,u+e+s)}function OI(e,t){return e.some((function(e){return e.isEqual(t)}))}var LI=function(){function e(t,n,r,i,a){X(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ee(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new j_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),MI=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"data",value:function(){return un(ae(n.prototype),"data",this).call(this)}}]),n}(LI);function FI(e,t){return"string"==typeof t?RI(e,t):t instanceof aI?t._internalPath:t._delegate._internalPath}var UI=function(){function e(t,n){X(this,e),this.hasPendingWrites=t,this.fromCache=n}return ee(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),VI=function(e){ie(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return X(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ee(n,[{key:"exists",value:function(){return un(ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new jI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(FI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(LI),jI=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return un(ae(n.prototype),"data",this).call(this,e)}}]),n}(VI),BI=function(){function e(t,n,r,i){X(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new UI(i.hasPendingWrites,i.fromCache),this.query=r}return ee(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new jI(n._firestore,n._userDataWriter,r.key,r,new UI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qd(Hd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new jI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new jI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new UI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:qI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function qI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kd()}}function zI(e,t){return e instanceof VI&&t instanceof VI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof BI&&t instanceof BI&&e._firestore===t._firestore&&G_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function KI(e){if(Lv(e)&&0===e.explicitOrderBy.length)throw new Qd(Hd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var WI=ee((function e(){X(this,e)}));function GI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var HI=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return ee(n,[{key:"_apply",value:function(e){var t=vI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){iE(o,a);var s,c=[],l=te(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(rE(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=rE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||iE(o,a),u=EI(n,"where",o,"in"===a||"not-in"===a);var h=yv.create(i,a,u);return function(e,t){if(t.S()){var n=Fv(e);if(null!==n&&!n.isEqual(t.field))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Mv(e);null!==r&&aE(e,t.field,r)}var i=function(e,t){var n,r=te(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new B_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Dv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(WI);var QI=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return ee(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Tv(t,n);return function(e,t){if(null===Mv(e)){var n=Fv(e);null!==n&&aE(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new B_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Dv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(WI);var $I=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return ee(n,[{key:"_apply",value:function(e){return new B_(e.firestore,e.converter,Bv(e._query,this._c,this.wc))}}]),n}(WI);var YI=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return ee(n,[{key:"_apply",value:function(e){var t=nE(e,this.type,this.mc,this.gc);return new B_(e.firestore,e.converter,function(e,t){return new Dv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(WI);function JI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new YI("startAt",t,!0)}function XI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new YI("startAfter",t,!1)}var ZI=function(e){ie(n,e);var t=ce(n);function n(e,r,i){var a;return X(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return ee(n,[{key:"_apply",value:function(e){var t=nE(e,this.type,this.mc,this.gc);return new B_(e.firestore,e.converter,function(e,t){return new Dv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(WI);function eE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("endBefore",t,!1)}function tE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("endAt",t,!0)}function nE(e,t,n,r){if(n[0]=Be(n[0]),n[0]instanceof LI)return function(e,t,n,r,i){if(!r)throw new Qd(Hd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=te(Vv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(zp(t,r.key));else{var c=r.data.field(s.field);if(Ep(c))throw new Qd(Hd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Sv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=vI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Qd(Hd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Uv(e)&&-1!==c.indexOf("/"))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(mp.fromString(c));if(!Pp.isDocumentKey(l))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Pp(l);u.push(zp(t,f))}else{var h=EI(n,r,c);u.push(h)}}return new Sv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function rE(e,t,n){if("string"==typeof(n=Be(n))){if(""===n)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uv(t)&&-1!==n.indexOf("/"))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(mp.fromString(n));if(!Pp.isDocumentKey(r))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return zp(e,new Pp(r))}if(n instanceof j_)return zp(e,n._key);throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(O_(n),"."))}function iE(e,t){if(!Array.isArray(e)||0===e.length)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function aE(e,t,n){if(!n.isEqual(t))throw new Qd(Hd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var oE=function(){function e(){X(this,e)}return ee(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _p(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ip(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return dp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new sI(_p(e.latitude),_p(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Sp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=xp(e);return new lp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=mp.fromString(e);Wd(Ly(n));var r=new Np(n.get(1),n.get(3)),i=new Pp(n.popFirst(5));return r.isEqual(t)||Bd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function uE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var sE=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).firestore=e,r}return ee(n,[{key:"convertBytes",value:function(e){return new oI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new j_(this.firestore,null,t)}}]),n}(oE),cE=function(){function e(t,n){X(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vI(t)}return ee(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=lE(e,this._firestore),i=uE(r.converter,t,n),a=mI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,hm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=lE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Be(t))||t instanceof aI?II(this._dataReader,"WriteBatch.update",i._key,t,n,o):_I(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,hm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=lE(e,this._firestore);return this._mutations=this._mutations.concat(new Tm(t._key,hm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Qd(Hd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function lE(e,t){if((e=Be(e)).firestore!==t)throw new Qd(Hd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var fE=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).firestore=e,r}return ee(n,[{key:"convertBytes",value:function(e){return new oI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new j_(this.firestore,null,t)}}]),n}(oE);function hE(e){e=L_(e,j_);var t=L_(e.firestore,Y_),n=J_(t),r=new fE(t);return function(e,t){var n=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function r(){return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ye(de().mark((function e(t,n,r){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Qd(Hd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Fb(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,x_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new VI(t,r,e._key,n,new UI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function dE(e){e=L_(e,B_);var t=L_(e.firestore,Y_),n=J_(t),r=new fE(t);return function(e,t){var n=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function r(){return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ye(de().mark((function e(t,n,r){var i,a,o,u,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,aw(t,n,!0);case 3:i=e.sent,a=new rx(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Fb(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,x_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new BI(t,r,e,n)}))}function pE(e,t,n){e=L_(e,j_);var r=L_(e.firestore,Y_),i=uE(e.converter,t,n);return gE(r,[mI(vI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hm.none())])}function vE(e,t,n){e=L_(e,j_);for(var r=L_(e.firestore,Y_),i=vI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return gE(r,[("string"==typeof(t=Be(t))||t instanceof aI?II(i,"updateDoc",e._key,t,n,o):_I(i,"updateDoc",e._key,t)).toMutation(e._key,hm.exists(!0))])}function mE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Be(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Q_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Q_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof j_)l=L_(e.firestore,Y_),f=Pv(e._key.path),c={next:function(t){n[s]&&n[s](kE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=L_(e,B_);l=L_(p.firestore,Y_),f=p._query;var v=new fE(l);c={next:function(e){n[s]&&n[s](new BI(l,v,p,e))},error:n[s+1],complete:n[s+2]},KI(e._query)}return function(e,t,n,r){var i=new s_(r),a=new Yb(t,i,n);return e.asyncQueue.enqueueAndForget(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zb,t.next=3,E_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wb,t.next=3,E_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(J_(l),f,h,c)}function yE(e,t){return function(e,t){var n=new s_(t);return e.asyncQueue.enqueueAndForget(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Tu.add(t),t.next()},t.next=3,E_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(Ye(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Tu.delete(t)},t.next=3,E_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(J_(e=L_(e,Y_)),Q_(t)?t:{next:t})}function gE(e,t){return function(e,t){var n=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function r(){return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=dx,r.next=3,I_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(J_(e),t)}function kE(e,t,n){var r=n.docs.get(t._key),i=new fE(e);return new VI(e,i,t._key,r,new UI(n.hasPendingWrites,n.fromCache),t.converter)}var wE=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,r))._firestore=e,i}return ee(n,[{key:"get",value:function(e){var t=this,r=lE(e,this._firestore),i=new fE(this._firestore);return un(ae(n.prototype),"get",this).call(this,e).then((function(e){return new VI(t._firestore,i,r._key,e._document,new UI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){X(this,e),this._firestore=t,this._transaction=n,this._dataReader=vI(t)}return ee(e,[{key:"get",value:function(e){var t=this,n=lE(e,this._firestore),r=new sE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Kd();var i=e[0];if(i.isFoundDocument())return new LI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new LI(t._firestore,r,n._key,null,n.converter);throw Kd()}))}},{key:"set",value:function(e,t,n){var r=lE(e,this._firestore),i=uE(r.converter,t,n),a=mI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=lE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Be(t))||t instanceof aI?II(this._dataReader,"Transaction.update",i._key,t,n,o):_I(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=lE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function bE(e,t){return function(e,t){var n=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function r(){var i;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return k_(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new f_(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(J_(e=L_(e,Y_)),(function(n){return t(new wE(e,n))}))}function xE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wI("arrayUnion",t)}function _E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fd=e}(Ct),bt(new Je("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Y_(i,new Zd(e.getProvider("auth-internal")),new rp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ot(Ld,"3.4.7",e),Ot(Ld,"3.4.7","esm2017")}();function IE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Qd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function EE(){if("undefined"===typeof Uint8Array)throw new Qd("unimplemented","Uint8Arrays are not available in this environment.")}function SE(){if("undefined"==typeof atob)throw new Qd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var TE=function(){function e(t){X(this,e),this._delegate=t}return ee(e,[{key:"toBase64",value:function(){return SE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return EE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return SE(),new e(oI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return EE(),new e(oI.fromUint8Array(t))}}]),e}();function CE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=te(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var NE=function(){function e(){X(this,e)}return ee(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){iI(e=L_(e,Y_));var n=J_(e),r=e._freezeSettings(),i=new o_;return Z_(n,i,new i_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){iI(e=L_(e,Y_));var t=J_(e),n=e._freezeSettings(),r=new o_;return Z_(t,r,new a_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Qd(Hd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new $d;return e._queue.enqueueAndForgetEvenWhileRestricted(Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ye(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hg.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,hg.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(zk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),AE=function(){function e(t,n,r){var i=this;X(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Np||(this._appCompat=t)}return ee(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};V_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return eI(this._delegate)}},{key:"disableNetwork",value:function(){return tI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&D_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new $d;return e.asyncQueue.enqueueAndForget(Ye(de().mark((function n(){return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ix,n.next=3,I_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(J_(e=L_(e,Y_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return yE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Qd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new KE(this,z_(this._delegate,e))}catch(t){throw ME(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new LE(this,K_(this._delegate,e))}catch(t){throw ME(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new BE(this,function(e,t){if(e=L_(e,U_),A_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Qd(Hd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new B_(e,null,function(e){return new Dv(mp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ME(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return bE(this._delegate,(function(n){return e(new RE(t,n))}))}},{key:"batch",value:function(){var e=this;return J_(this._delegate),new PE(new cE(this._delegate,(function(t){return gE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return nI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return rI(this._delegate,e).then((function(e){return e?new BE(t,e):null}))}}]),e}(),DE=function(e){ie(n,e);var t=ce(n);function n(e){var r;return X(this,n),(r=t.call(this)).firestore=e,r}return ee(n,[{key:"convertBytes",value:function(e){return new TE(new oI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return LE.forKey(t,this.firestore,null)}}]),n}(oE);var RE=function(){function e(t,n){X(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return ee(e,[{key:"get",value:function(e){var t=this,n=WE(e);return this._delegate.get(n).then((function(e){return new VE(t._firestore,new VI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=WE(e);return n?(IE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WE(e);return this._delegate.delete(t),this}}]),e}(),PE=function(){function e(t){X(this,e),this._delegate=t}return ee(e,[{key:"set",value:function(e,t,n){var r=WE(e);return n?(IE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),OE=function(){function e(t,n,r){X(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ee(e,[{key:"fromFirestore",value:function(e,t){var n=new jI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new DE(t),n),i.set(n,a)),a}}]),e}();OE.INSTANCES=new WeakMap;var LE=function(){function e(t,n){X(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return ee(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new KE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new KE(this.firestore,z_(this._delegate,e))}catch(t){throw ME(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Be(e))instanceof j_&&W_(this._delegate,e)}},{key:"set",value:function(e,t){t=IE("DocumentReference.set",t);try{return t?pE(this._delegate,e,t):pE(this._delegate,e)}catch(n){throw ME(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?vE(this._delegate,e):vE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ME(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return gE(L_(e.firestore,Y_),[new Tm(e._key,hm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=FE(n),a=UE(n,(function(t){return new VE(e.firestore,new VI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return mE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?hE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=L_(e,j_);var t=L_(e.firestore,Y_);return T_(J_(t),e._key,{source:"server"}).then((function(n){return kE(t,e,n)}))}(this._delegate):function(e){e=L_(e,j_);var t=L_(e.firestore,Y_);return T_(J_(t),e._key).then((function(n){return kE(t,e,n)}))}(this._delegate),t.then((function(e){return new VE(n.firestore,new VI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(OE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Qd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new j_(n._delegate,r,new Pp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new j_(n._delegate,r,t))}}]),e}();function ME(e,t,n){return e.message=e.message.replace(t,n),e}function FE(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!CE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function UE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=CE(e[0])?e[0]:CE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var VE=function(){function e(t,n){X(this,e),this._firestore=t,this._delegate=n}return ee(e,[{key:"ref",get:function(){return new LE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return zI(this._delegate,e._delegate)}}]),e}(),jE=function(e){ie(n,e);var t=ce(n);function n(){return X(this,n),t.apply(this,arguments)}return ee(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Kd()}(void 0!==t),t}}]),n}(VE),BE=function(){function e(t,n){X(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return ee(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,GI(this._delegate,function(e,t,n){var r=t,i=FI("where",e);return new HI(i,r,n)}(t,n,r)))}catch(i){throw ME(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,GI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=FI("orderBy",e);return new QI(n,t)}(t,n)))}catch(r){throw ME(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,GI(this._delegate,function(e){return M_("limit",e),new $I("limit",e,"F")}(t)))}catch(n){throw ME(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,GI(this._delegate,function(e){return M_("limitToLast",e),new $I("limitToLast",e,"L")}(t)))}catch(n){throw ME(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,GI(this._delegate,JI.apply(void 0,arguments)))}catch(t){throw ME(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,GI(this._delegate,XI.apply(void 0,arguments)))}catch(t){throw ME(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,GI(this._delegate,eE.apply(void 0,arguments)))}catch(t){throw ME(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,GI(this._delegate,tE.apply(void 0,arguments)))}catch(t){throw ME(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return G_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?dE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=L_(e,B_);var t=L_(e.firestore,Y_),n=J_(t),r=new fE(t);return C_(n,e._query,{source:"server"}).then((function(n){return new BI(t,r,e,n)}))}(this._delegate):function(e){e=L_(e,B_);var t=L_(e.firestore,Y_),n=J_(t),r=new fE(t);return KI(e._query),C_(n,e._query).then((function(n){return new BI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new zE(n.firestore,new BI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=FE(n),a=UE(n,(function(t){return new zE(e.firestore,new BI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return mE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(OE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),qE=function(){function e(t,n){X(this,e),this._firestore=t,this._delegate=n}return ee(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),zE=function(){function e(t,n){X(this,e),this._firestore=t,this._delegate=n}return ee(e,[{key:"query",get:function(){return new BE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new qE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return zI(this._delegate,e._delegate)}}]),e}(),KE=function(e){ie(n,e);var t=ce(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ee(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new LE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new LE(this.firestore,void 0===e?K_(this._delegate):K_(this._delegate,e))}catch(t){throw ME(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=L_(e.firestore,Y_),r=K_(e),i=uE(e.converter,t);return gE(n,[mI(vI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new LE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return W_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(OE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(BE);function WE(e){return L_(e,j_)}var GE=function(){function e(){X(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=le(aI,n)}return ee(e,[{key:"isEqual",value:function(e){return(e=Be(e))instanceof aI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(gp.keyField().canonicalString())}}]),e}(),HE=function(){function e(t){X(this,e),this._delegate=t}return ee(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new kI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new yI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=xE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=_E.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new xI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),QE={Firestore:AE,GeoPoint:sI,Timestamp:lp,Blob:TE,Transaction:RE,WriteBatch:PE,DocumentReference:LE,DocumentSnapshot:VE,Query:BE,QueryDocumentSnapshot:jE,QuerySnapshot:zE,CollectionReference:KE,FieldPath:GE,FieldValue:HE,setLogLevel:function(e){!function(e){Ud.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Je("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},QE)))}(e,(function(e,t){return new AE(e,t,new NE)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(an);var $E=an.initializeApp({apiKey:"AIzaSyAfaQAxiHcHkrz1f1foX5fb3jaNL729BBc",authDomain:"tuffys-trading-post.firebaseapp.com",projectId:"tuffys-trading-post",storageBucket:"tuffys-trading-post.appspot.com",messagingSenderId:"481583233912",appId:"1:481583233912:web:32578c054a8ae83b71268d",measurementId:"G-2SW86JKNL6"}),YE=(an.firestore($E),an.auth()),JE=n(184);var XE=function(){var e=V(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(""),2),o=a[0],u=a[1];return(0,JE.jsx)("div",{className:"login",children:(0,JE.jsxs)("div",{className:"login_container",children:[(0,JE.jsx)("h1",{children:"Sign-In"}),(0,JE.jsxs)("form",{children:[(0,JE.jsx)("h5",{children:"E-mail"}),(0,JE.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)}}),(0,JE.jsx)("h5",{children:"Password"}),(0,JE.jsx)("input",{type:"password",value:o,onChange:function(e){return u(e.target.value)}}),(0,JE.jsx)("br",{}),(0,JE.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),YE.signInWithEmailAndPassword(n,o).then((function(t){e("/")})).catch((function(e){return alert(e.message)}))},children:"Sign In"}),(0,JE.jsx)("br",{}),(0,JE.jsx)(Y,{to:"/create_account",children:(0,JE.jsx)("button",{children:"Create account"})})]}),(0,JE.jsx)("p",{children:"test text"}),(0,JE.jsx)(Y,{to:"/",children:(0,JE.jsx)("button",{children:" home "})})]})})},ZE=(0,r.createContext)(),eS=function(e){var t=e.reducer,n=e.initialState,i=e.children;return(0,JE.jsx)(ZE.Provider,{value:(0,r.useReducer)(t,n),children:i})},tS=function(){return(0,r.useContext)(ZE)};var nS=function(){var e=c(tS(),2),t=(e[0].basket,e[1]),n=V();return(0,JE.jsx)("div",{className:"upload",children:(0,JE.jsx)("div",{className:"upload__container",children:(0,JE.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({type:"ADD_TO_BASKET",item:{title:e.target.product_title.value,image:e.target.url_image.value,price:e.target.product_price.value,description:e.target.product_des.value,seller:e.target.product_seller.value,category:e.target.category.value}}),$E.firestore().collection("items").add({id:Date(),item:{title:e.target.product_title.value,image:e.target.url_image.value,price:e.target.product_price.value,description:e.target.product_des.value,seller:e.target.product_seller.value,category:e.target.category.value}})},children:[(0,JE.jsxs)("fieldset",{children:[(0,JE.jsx)("p",{children:"Image Url: "}),(0,JE.jsx)("input",{type:"url",name:"url_image",id:""}),(0,JE.jsx)("p",{children:"Product Title"}),(0,JE.jsx)("input",{type:"text",name:"product_title",id:""}),(0,JE.jsx)("p",{children:"Product Description"}),(0,JE.jsx)("input",{type:"text",name:"product_des",id:""}),(0,JE.jsx)("p",{children:"Seller Name"}),(0,JE.jsx)("input",{type:"text",name:"product_seller",id:""}),(0,JE.jsx)("p",{children:"Price"}),(0,JE.jsx)("input",{type:"number",name:"product_price",id:""}),(0,JE.jsx)("p",{children:"Choose an item Category"}),(0,JE.jsxs)("select",{name:"category",id:"",children:[(0,JE.jsx)("option",{value:"book",children:"Book"}),(0,JE.jsx)("option",{value:"tech",children:"Tech"}),(0,JE.jsx)("option",{value:"clothing",children:"Clothing"}),(0,JE.jsx)("option",{value:"exercise",children:"Exercise"}),(0,JE.jsx)("option",{value:"collectible",children:"Collectibles"}),(0,JE.jsx)("option",{value:"other",children:"Other"})]})]}),(0,JE.jsx)("button",{onClick:n("/"),type:"submit",children:"Submit"})]})})})};var rS=function(){var e=c(tS(),2),t=e[0].user;return e[1],(0,JE.jsxs)("div",{className:"header",children:[(0,JE.jsx)(Y,{to:"/",children:(0,JE.jsx)("img",{className:"header_logo",src:"https://i0.wp.com/www.win-magazine.com/wp-content/uploads/2011/04/CalStateFullerton.gif?fit=600%2C239&ssl=1"})}),(0,JE.jsx)("div",{className:"header_search",children:(0,JE.jsx)("input",{className:"header_searchInput",type:"text",placeholder:"Search item"})}),(0,JE.jsxs)("div",{className:"header_nav",children:[(0,JE.jsx)(Y,{to:!t&&"/login",children:(0,JE.jsx)("div",{onClick:function(){t&&YE.signOut()},className:"header_option",children:(0,JE.jsx)("span",{className:"log_in",children:t?[t.email,(0,JE.jsx)("br",{}),"Sign Out"]:"Log In"})})}),(0,JE.jsx)("div",{className:"header_option",children:(0,JE.jsx)("span",{className:"profile",children:t?"My Profile":""})}),(0,JE.jsx)("div",{className:"header_option",children:(0,JE.jsx)(Y,{to:"/upload_page",children:(0,JE.jsx)("span",{className:"profile",children:t?"Upload an Item":""})})}),(0,JE.jsx)("div",{className:"header_option",children:(0,JE.jsx)("span",{className:"aboutUs",children:(0,JE.jsx)("a",{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstleyautoplay=1",className:"href",children:"About Us"})})}),(0,JE.jsx)("div",{className:"header_option",children:(0,JE.jsx)("span",{className:"contactUs",children:"Contact Us"})})]})]})};var iS=function(e){var t=e.title,n=e.image,r=e.price,i=e.description,a=e.seller;return(0,JE.jsxs)("div",{className:"product_Container",children:[(0,JE.jsx)("img",{src:n}),(0,JE.jsxs)("div",{className:"product_Info",children:[(0,JE.jsx)("p",{className:"product_title",children:(0,JE.jsx)("strong",{children:t})}),(0,JE.jsx)("br",{}),(0,JE.jsxs)("p",{className:"product_description",children:[(0,JE.jsx)("em",{children:"Description:"})," ",i]}),(0,JE.jsx)("br",{}),(0,JE.jsxs)("p",{className:"product_seller",children:[(0,JE.jsx)("em",{children:"Seller:"})," ",a]}),(0,JE.jsx)("br",{}),(0,JE.jsxs)("p",{className:"product_price",children:[(0,JE.jsx)("em",{children:"Price:"})," $",r]})]})]})};var aS=function(){var e=c(tS(),2),t=e[0],n=(t.basket,t.user,e[1],c((0,r.useState)([]),2)),i=n[0],a=n[1];return(0,r.useEffect)((function(){$E.firestore().collection("items").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),a(t)}))}),[]),(0,JE.jsxs)("div",{className:"home_Container",children:[(0,JE.jsx)("div",{className:"homepage_image",children:(0,JE.jsx)("img",{src:"https://asi.fullerton.edu/wp-content/uploads/TITANS_Letters.jpg",alt:""})}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Books"})}),(0,JE.jsx)(iS,{title:"Crime and Punishment",price:9.99,image:"https://u-mercari-images.mercdn.net/photos/m83702213756_1.jpg?width=1024&height=1024&format=pjpg&auto=webp&fit=crop&_=1643496851",description:"Book about Crime",seller:"Bob"}),(0,JE.jsx)(iS,{title:"Narnia",price:17.96,image:"https://images-na.ssl-images-amazon.com/images/I/51WbmTRk-4L._SX331_BO1,204,203,200_.jpg",description:"Book about a lion and friends",seller:"Jake"}),i.filter((function(e){return"book"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Tech"})}),(0,JE.jsx)(iS,{title:"Apple Watch",price:100,image:"https://cdn.cultofmac.com/wp-content/uploads/2018/06/Apple-Watch-watchOS-5-alt.jpg",description:"Apple Watch Gen 4",seller:"Marc"}),(0,JE.jsx)(iS,{title:"PS3",price:90,image:"https://media.threatpost.com/wp-content/uploads/sites/103/2021/06/25165550/PS32-e1624654587886.jpg",description:"Bluetooth keyboard",seller:"Jacob"}),i.filter((function(e){return"tech"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Clothing"})}),(0,JE.jsx)(iS,{title:"Titan Sweatshirt",price:44.99,image:"https://www.titanshops.com/images/2408865-CSUF%20CHAMPION%20CLASSIC%20HOODIE%20CORE_navy-1.jpg",description:"CSUF Unisex Sweatshirt. Size: M",seller:"Kelly"}),(0,JE.jsx)(iS,{title:"Hat",price:15,image:"https://m.media-amazon.com/images/I/71RUxoV0VjL._AC_SX569_.jpg",description:"Black Baseball Hat ",seller:"Marc"}),i.filter((function(e){return"clothing"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Exercise Gear"})}),(0,JE.jsx)(iS,{title:"Indoor Cycling Bike",price:120,image:"https://i5.walmartimages.com/asr/165f664b-afda-44de-8c74-d290e242af3d.fbf7cd213869923719f388f40c11f780.jpeg",description:"Cycling Bike, Like New",seller:"Antoni"}),(0,JE.jsx)(iS,{title:"Medicine Ball",price:34.99,image:"https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcQbJGq54T7bU7OMSjTEntupl8WsDwtx5MDu9TMlJyxvf5H2KU-QYTENeyMJ8RfL2QhN5OxTQLLAP9A1UXD25f9pLcCOKHWqCH1kzr5AZ2Q&usqp=CAE",description:"20lb Medicine Ball",seller:"Amanda"}),i.filter((function(e){return"exercise"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Collectibles"})}),(0,JE.jsx)(iS,{title:"Batman Figure",price:49.99,image:"https://m.media-amazon.com/images/I/71-yH-5o4oS._AC_SY606_.jpg",description:"Old Batman Action Figure",seller:"Tiff"}),(0,JE.jsx)(iS,{title:"Marvel Collection",price:39.99,image:"https://m.media-amazon.com/images/I/91Y2edldmiL._AC_SL1500_.jpg",description:"Marvel Team Action Figures",seller:"Howard"}),i.filter((function(e){return"collectible"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]}),(0,JE.jsxs)("div",{className:"home_Row",children:[(0,JE.jsx)("span",{className:"home_Tag",children:(0,JE.jsx)("h2",{children:"Other"})}),i.filter((function(e){return"other"===e.item.category})).map((function(e){return(0,JE.jsx)(iS,{title:e.item.title,image:e.item.image,price:e.item.price,description:e.item.description,seller:e.item.seller})}))]})]})};var oS=function(){var e=V(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(""),2),o=a[0],u=a[1];return(0,JE.jsx)("div",{className:"CreateAccount",children:(0,JE.jsxs)("form",{children:[(0,JE.jsx)("h5",{children:"Username"}),(0,JE.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)}}),(0,JE.jsx)("h5",{children:"Password"}),(0,JE.jsx)("input",{type:"password",value:o,onChange:function(e){return u(e.target.value)}}),(0,JE.jsx)("br",{}),(0,JE.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),YE.createUserWithEmailAndPassword(n,o).then((function(t){t&&e("/")})).catch((function(e){return alert(e.message)}))},children:"  Create"}),(0,JE.jsx)("br",{})]})})};var uS=function(){var e=c(tS(),2);!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e[0]);var t=e[1];return(0,r.useEffect)((function(){YE.onAuthStateChanged((function(e){console.log("THE USER IS >>> ",e),t(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),(0,JE.jsx)($,{children:(0,JE.jsxs)("div",{className:"app",children:[(0,JE.jsx)(rS,{}),(0,JE.jsxs)(K,{children:[(0,JE.jsx)(q,{path:"/",element:[(0,JE.jsx)(aS,{})]}),(0,JE.jsx)(q,{path:"/login",element:[(0,JE.jsx)(XE,{})]}),(0,JE.jsx)(q,{path:"/create_account",element:[(0,JE.jsx)(oS,{})]}),(0,JE.jsx)(q,{path:"/upload_page",element:[(0,JE.jsx)(nS,{})]})]})]})})},sS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function cS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cS(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fS=function(e,t){switch(console.log(t),t.type){case"ADD_TO_BASKET":return lS(lS({},e),{},{basket:[].concat(Qe(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var n=e.basket.findIndex((function(e){return e.id===t.id})),r=Qe(e.basket);return n>=0?r.splice(n,1):console.warn("Can't remove product (id: ".concat(t.id,") as it's not in basket!")),lS(lS({},e),{},{basket:r});case"SET_USER":return lS(lS({},e),{},{user:t.user});default:return e}};i.render((0,JE.jsx)(r.StrictMode,{children:(0,JE.jsx)(eS,{initialState:{basket:[],user:null},reducer:fS,children:(0,JE.jsx)(uS,{})})}),document.getElementById("root")),sS()}()}();
//# sourceMappingURL=main.74dea902.js.map